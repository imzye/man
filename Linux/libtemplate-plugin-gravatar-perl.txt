Template::Plugin::Gravatar(3pm)                                                     User Contributed Perl Documentation                                                     Template::Plugin::Gravatar(3pm)

Name
       Template::Plugin::Gravatar - Configurable TT2-based generation of Gravatar URLs from email addresses.

Synopsis
         [% USE Gravatar %]
         [% FOR user IN user_list %]
          <img src="[% Gravatar( email => user.email ) | html %]"
            alt="[% user.name | html %]" />
         [% END %]

         # OR a mini CGI example
         use strict;
         use CGI qw( header start_html end_html );
         use Template;

         my %config = ( # ... your other config stuff
                       GRAVATAR => { default => "http://myhost.moo/local/image.png",
                                     size => 80,
                                     rating => "R" },
                       );
         # note the "default" must be an absolute URI to work correctly

         my $tt2 = Template->new(\%config);

         my $user = { email => 'whatever@wherever.whichever',
                      rating => "PG",
                      name => "Manamana",
                      size => 75 };

         print header(), start_html();

         $tt2->process(\*DATA, { user => $user })
             or warn $Template::ERROR;

         print end_html();

         __DATA__
         [% USE Gravatar %]
         [% FILTER html %]
          <img src="[% Gravatar( user ) | html %]"
            alt="[% user.name | html %]" />
         [% END %]

Description
       Please see <http://gravatar.com/site/implement/url> for more on the service interface and <http://gravatar.com/> for information about Gravatars (globally recognized avatars) in general.

       All of the options supported in Gravatars—default, rating, and size—can be used here. The "gravatar_id" is generated from a given email.

Interface/Settings
   new
       Not called directly. Called when you "USE" the plugin. Takes defaults from the template config hash and mixes them with any per template defaults. E.g.–

         [% USE Gravatar %]
         Use config arguments if any.

         [% USE Gravatar(default => 'http://mysite.moo/local/default-image.gif') %]
         Mix config arguments, if any, with new instance arguments.

   Arguments
       email (required)
           The key to using Gravatars is a hex hash of the user's email. This is generated automatically and sent to gravatar.com as the "gravatar_id".

       default (optional)
           The local (any valid absolute image URI) image to use if there is no Gravatar corresponding to the given email.

       size (optional)
           Gravatars are square. Size is 1 through 80 (pixels) and sets the width and the height.

       rating (optional)
           G|PG|R|X. The maximum rating of Gravatar you wish returned. If you have a family friendly forum, for example, you might set it to "G."

       border (DEPRECATED)
           A hex color, e.g. FF00FF or F0F. Gravatar no longer does anything with these so we don't even pass them along. If included they will give a warning.

       base (developer override)
           This is provided as a courtesy for the one or two developers who might need it. More below.

       gravatar_id (not allowed)
           This is not an option but a generated variable. It is an MD5 hex hash of the email address. The reason is it not supported as an optional variable is it would allow avatar hijacking.

       The only argument that must be given when you call the "Gravatar" plugin is the email. Everything else—rating, default image, border, and size—can be set in three different places: the config, the
       "USE" call, or the "Gravatar" call. All three of the following produce the same Gravatar URL.

   Settings via config
       Used if the entire "site" should rely on one set of defaults.

         use Template;
         my %config = (
            GRAVATAR => {
                default => "http://mysite.moo/img/avatar.png",
                rating => "PG",
                size => 80,
            }
         );

         my $template = <<;
         [% USE Gravatar %]
         [% Gravatar(email => 'me@myself.ego') | html %]

         my $tt2 = Template->new(\%config);
         $tt2->process(\$template);

   Settings via instance
       Used if a particular template needs its own defaults.

         use Template;
         my $template = <<;
         [% USE Gravatar( rating => "PG",
                          size => 80 ) %]
         [% Gravatar(email => 'me@myself.ego') | html %]

         my $tt2 = Template->new();
         $tt2->process(\$template);

       Any other calls with different emails will share the defaults in this template.

   Settings in the Gravatar call
       Used for per URL control.

         use Template;
         my $template = <<;
         [% USE Gravatar %]
         [% Gravatar(email => 'me@myself.ego',
                     default => "http://mysite.moo/img/avatar.png",
                     rating => "PG",
                     size => 80 ) | html %]

         my $tt2 = Template->new();
         $tt2->process(\$template);

   Base URL (for developers only)
       You may also override the base URL for retrieving the Gravatars. It's set to use the service from <https://gravatar.com/>. It can be overridden in the config or the "USE".

Diagnostics
       Email is the only required argument. Croaks without it.

       Rating and size are also validated on each call. Croaks if an invalid size (like 0 or 100) or rating (like MA or NC-17).

Configuration AND ENVIRONMENT
       No  configuration is necessary. You may use the configuration hash of your new template to pass default information like the default image location for those without Gravatars. You can also set it
       in the "USE" call per template if needed.

Dependencies (see also)
       Template, Template::Plugin, Carp, Digest::MD5, and URI::Escape.

       <http://gravatar.com/>

Bugs and Limitations
       None known. I certainly appreciate bug reports and feedback via <https://github.com/pangyre/p5-template-plugin-gravatar/issues>.

Author
       Ashley Pond V, "<ashley@cpan.org>".

License
       Copyright 2007-2016, Ashley Pond V.

       This program is free software; you can redistribute it and modify it under the same terms as Perl itself.

       See <http://dev.perl.org/licenses/artistic.html>.

See Also
       Gravatar::URL - standalone Gravatar URL generation.

       <http://gravatar.com> - The Gravatar web site.

       <http://gravatar.com/site/implement/> - The Gravatar URL implementation guide.

perl v5.34.0                                                                                     2022-06-17                                                                 Template::Plugin::Gravatar(3pm)
