calc(1)                                                                                   General Commands Manual                                                                                   calc(1)

NAME
       calc - arbitrary precision calculator

SYNOPSIS
       calc [-c] [-C] [-d]
            [-D calc_debug[:resource_debug[:user_debug]]]
            [-e] [-f filename] [-h] [-i] [-m mode] [-O]
            [-p] [-q] [-s] [-u] [-v] [[--] calc_cmd ...]

       #!/usr/bin/calc [optional_other_flags ...] -f

DESCRIPTION
       -c     Continue reading command lines even after a scan/parse error has caused the abandonment of a line.  Note that this option only deals with scanning and parsing of the calc language.  It does
              not deal with execution or run-time errors.

              For example:

                   calc read many_errors.cal

              will cause calc to abort on the first syntax error, whereas:

                   calc -c read many_errors.cal

              will cause calc to try to process each line being read despite the scan/parse errors that it encounters.

              By default, calc startup resource files are silently ignored if not found.  This flag will report missing startup resource files unless -d is also given.

       -C     Permit the execution of custom builtin functions.  Without this flag, calling the custom() builtin function will simply generate an error.

              Use of this flag may cause calc to execute functions that are non-standard and that are not portable.  Custom builtin functions are disabled by default for this reason.

       -d     Disable the printing of the opening title.  The printing of resource file debug and informational messages is also disabled as if config("resource_debug", 0) had been executed.

              For example:

                   calc "read qtime; qtime(2)"

              will output something like:

                   qtime(utc_hr_offset) defined
                   It's nearly ten past six.

              whereas:

                   calc -d "read qtime; qtime(2)"

              will just print:

                   It's nearly ten past six.

              This flag disables the reporting of missing calc startup resource files.

              This flag also disables the printing the leading tilde. For example:

                   calc 2/3

              will print:

                   ~0.66666666666666666667

              whereas:

                   calc -d 2/3

              will just print:

                   0.66666666666666666667

       -D calc_debug[:resource_debug[:user_debug]]
              Force the initial value of config("calc_debug"), config("resource_debug") and config("user_debug").

              The : separated strings are interpreted as signed 32 bit integers.  After an optional leading sign a leading zero indicates octal conversion, and a leading ``0x'' or ``0X'' hexadecimal con‐
              version.  Otherwise, decimal conversion is assumed.

              By default, calc_debug is 0, resource_debug is 3 and user_debug is 0.

              For more information use the following calc command:

                   help config

       -e     Ignore any environment variables on startup.  The getenv() builtin will still return values, however.

       -f filename
              This flag is normally only with calc shell scripts.

              This flag is required when using calc in shell script mode.  It must be at the end of the initial #!  line of the script, as in:

                   #!/usr/bin/calc [optional_other_flags ...] -f

              the rest of the file will be processed in shell script mode.

              A common flag to use, prior to the -f on the #! line is the -q flag.  For example:

                   #!/usr/bin/calc -q -f

              See SHELL SCRIPT MODE section of this man page below for details.

              While the actual form of this flag is:

                   -f filename

              for systems that treat an executable that begins with #!  as a script, the path of the executable is appended by the kernel as the final argument to the exec() system call.  This is why the
              -f flag at the very end of the #!  line.

              It is possible use -f filename on the command line:

                   calc [optional_other_flags ...] -f filename

              This will cause calc to process lines in filename in shell script mode.

              NOTE: The use of -f does NOT imply -q and thus one would need to use

                   calc [optional_other_flags ...] -q -f filename

              to disable the use of calc startup files as well.

              The use of -f filename implies the -s flag.

       -h     Print a help message.  This option implies -q.  This is equivalent to the calc command help help.  The help facility is disabled unless the mode is 5 or 7.  See -m.

       -i     Become  interactive  if possible.  This flag will cause calc to drop into interactive mode after the calc_cmd arguments on the command line are evaluated.  Without this flag, calc will exit
              after they are evaluated.

              For example:

                   calc 2+5

              will print the value 7 and exit whereas:

                   calc -i 2+5

              will print the value 7 and prompt the user for more calc commands.

       -m mode
              This flag sets the permission mode of calc.  It controls the ability for calc to open files and execute programs.  Mode may be a number from 0 to 7.

              The mode value is interpreted in a way similar to that of the chmod(1) octal mode:

                   0  do not open any file, do not execute progs
                   1  do not open any file
                   2  do not open files for reading, do not execute progs
                   3  do not open files for reading
                   4  do not open files for writing, do not execute progs
                   5  do not open files for writing
                   6  do not execute any program
                   7  allow everything (default mode)

              If one wished to run calc from a privileged user, one might want to use -m 0 in an effort to make calc somewhat more secure.

              Mode bits for reading and writing apply only on an open.  Files already open are not effected.  Thus if one wanted to use the -m 0 in an effort to make calc somewhat more secure, but  still
              wanted to read and write a specific file, one might want to do in sh(1), ksh(1), bash(1)-like shells:

                   calc -m 0 3<a.file

              Files presented to calc in this way are opened in an unknown mode.  Calc will attempt to read or write them if directed.

              If  the  mode  disables  opening  of files for reading, then the startup resource files are disabled as if -q was given.  The reading of key bindings is also disabled when the mode disables
              opening of files for reading.

       -O     Use the old classic defaults instead of the default configuration.  This flag as the same effect as executing config("all", "oldcfg") at startup time.

              NOTE: Older versions of calc used -n to setup a modified form of the default calc configuration.  The -n flag currently does nothing.  Use of the -n flag is now deprecated and may  be  used
              for something else in the future.

       -p     Pipe processing is enabled by use of -p.  For example:

                   calc -p "2^21701-1" | fizzbin

              In pipe mode, calc does not prompt, does not print leading tabs and does not print the initial header.  The -p flag overrides -i.

              When running calc as a shell script (see SHELL SCRIPT MODE for details), calc will close standard input (stdin) during startup UNLESS the -p flag is given on the command line.  When calc is
              running in shell script mode, shell scripts that call the prompt(str) builtin will not work properly (the prompt builtin will always fail) unless the -p flag is given on the command line.

       -q     Disable the reading of the startup scripts.

              This  allows  the  script  to  run independently of startup scripts such those managed by the $CALCRC environment variable.  For example, this will disable the use of the common calcrc file
              (usually ~/.calcrc).

       -s     By default, all calc_cmd args are evaluated and executed.  This flag will disable their evaluation and instead make them available as strings for the argv() builtin function.

       -u     Disable buffering of stdin and stdout.

       -v     Print the calc version number and exit.

       --     The double dash indicates to calc that no more options follow.  Thus calc will ignore a later argument on the command line even if it starts with a dash.  This is useful when entering nega‐
              tive values on the command line as in:

                   calc -p -- -1 - -7

CALC COMMAND LINE
       With no calc_cmd arguments, calc operates interactively.  If one or more arguments are given on the command line and -s is NOT given, then calc will read and execute them and either attempt to  go
       interactive according as the -i flag was present or absent.

       If -s is given, calc will not evaluate any calc_cmd arguments but instead make them available as strings to the argv() builtin function.

       Sufficiently  simple commands with no characters like parentheses, brackets, semicolons, '*', which have special interpretations in UNIX shells may be entered, possibly with spaces, until the ter‐
       minating newline.  For example:

            calc 23 + 47

       will print 70.  However, command lines will have problems:

            calc 23 * 47

            calc -23 + 47

       The first example above fails because the shell interprets the '*' as a file glob.  The second example fails because '-23' is viewed as a calc option (which it is not) and do calc objects to  that
       it thinks of as an unknown option.  These cases can usually be made to work as expected by enclosing the command between quotes:

            calc '23 * 47'

            calc "print sqrt(2), exp(1)"

       or in parentheses and quotes to avoid leading -'s as in:

            calc '(-23 + 47)'

       One may also use a double dash to denote that calc options have ended as in:

            calc -- -23 + 47

            calc -q -- -23 + 47

       If  '!'  is to be used to indicate the factorial function, for shells like csh(1) for which '!' followed by a non-space character is used for history substitution, it may be necessary to include a
       space or use a backslash to escape the special meaning of '!'.  For example, the command:

            print 27!^2

       may have to be replaced by:

            print 27! ^2    or      print 27\!^2

       Reading from standard input when calc is part of a pipe works as long as the -p flag is given to calc.  For example, this will print chongo was here:

            echo chongo was here | calc -p 'print fgetline(files(0));'

       while this does not:

            echo chongo was here | calc 'print fgetline(files(0));'

       nor will this print chongo was here:

            echo chongo was here | calc -i 'print fgetline(files(0));'

       This is because without -p, the interactive parser, in an effort to parse interactive commands, flushes data on standard input.

CALC STARTUP FILES
       Normally on startup, if the environment variable $CALCRC is undefined and calc is invoked without the -q flag, or if $CALCRC is defined and calc is invoked with -e, calc looks for a file "startup"
       in the calc resource directory .calcrc in the user's home directory, and .calcinit in the current directory.  If one or more of these are found, they are read in succession  as  calc  scripts  and
       their commands executed.  When defined, $CALCRC is to contain a ':' separated list of names of files, and if calc is then invoked without either the -q or -e flags, these files are read in succes‐
       sion and their commands executed.  No error condition is produced if a listed file is not found.

       If the mode specified by -m disables opening of files for reading, then the reading of startup files is also disabled as if -q was given.

CALC FILE SEARCH PATH
       If the environment variable $CALCPATH is undefined, or if it is defined and calc is invoked with the -e flag, when a file name not beginning with /, ~ or ./, is specified as in:

            calc read myfile

       calc searches in succession:

            ./myfile
            ./myfile.cal
            /usr/lib/myfile
            /usr/lib/myfile.cal
            /usr/share/calc/custom/myfile
            /usr/share/calc/custom/myfile.cal

       If the file is found, the search stops and the commands in the file are executed.  It is an error if no readable file with the specified name is found.  An alternative search path can be specified
       by defining $CALCPATH in the same way as PATH is defined, as a ':' separated list of directories, and then invoking calc without the -e flag.

       Calc treats all open files, other than stdin, stdout and stderr as files available for reading and writing.  One may present calc with an already open file using sh(1), ksh(1), bash(1)-like shells
       is to:

            calc 3<open_file 4<open_file2

       For more information use the following calc commands:

            help help
            help overview
            help usage
            help environment
            help config

SHELL SCRIPT MODE
       If the first line of an executable file begins #!  followed by the absolute pathname of the calc program and the first line ends with the flag -f as in:

            #!/usr/bin/calc [optional_other_flags ...] -f

       the rest of the file will be processed in shell script mode.  Note that -s -f must be at the end of the initial ``#!'' line.  Any other optional optional_other_flags must come before the -f flag.

       In  shell  script mode the contents of the file are read and executed as if they were in a file being processed by a read command, except that a "command" beginning with '#' followed by whitespace
       and ending at the next newline is treated as a comment.  Any optional optional_other_flags will be parsed first followed by the later lines within the script itself.

       In shell script mode, -s is always assumed.  In addition, -d and -p are automatically set if -i is not given.

       NOTE: The use of -f does NOT imply -q and thus one would need to use

            calc [optional_other_flags ...] -q -f filename

       to disable the use of calc startup files as well.

       For example, if the file /tmp/mersenne:

            #!/usr/bin/calc -q -f

            /* setup */
            argc = argv();
            program = argv(0);
            stderr = files(2);

            /* parse args */
            if (argc != 2) {
                fprintf(stderr, "usage: %s exp0, program);
                abort "must give one exponent arg";
            }
            exp = eval(argv(1));
            if (!isint(exp) || exp < 0) {
                fprintf(stderr, "%s: exp must be non-negative integer0, program);
                abort "must give one exponent arg";
            }

            /* print the mersenne number */
            print "2^": exp : "-1 =", 2^exp-1;

       is made an executable file by:

            chmod +x /tmp/mersenne

       then the command line:

            /tmp/mersenne 127

       will print:

            2^127-1 = 170141183460469231731687303715884105727

       Note that because -s is required in shell script mode non-dashed args are made available as strings via the argv() builtin function.  Therefore:

            2^eval(argv(1))-1

       will print the decimal value of 2^n-1 whereas

            2^argv(1)-1

       will not.

       By default, using calc startup in shell script mode, calc will close standard input (stdin).  Thus builtin functions such as prompt(str) will fail (return a null value).  Calc shell  scripts  that
       call the prompt(str) builtin will not work properly (the prompt builtin will always fail and return a null value) unless the -p flag is given on the command line.

       The following shell script will always print "got null" because stdin will be closed by calc during startup:

            #!/usr/bin/calc -q -f

            # The prompt will ALWAYS FAIL and return a null value
            n = prompt("Test> ");
            if (isnull(n)) {
              print("got null");
            } else {
              print("got " + n);
            }

       However the following shell script (note the -p before the -f in the 1st line) will be interactive, prompt with "Test> " and print the "got" result as expected:

            #!/usr/bin/calc -q -p -f

            n = prompt("Test> ");
            if (isnull(n)) {
              print("got null");
            } else {
              print("got " + n);
            }

       Note in the example above, the -p flag must be given before the final -f command line flag.

DATA TYPES
       Fundamental builtin data types include integers, real numbers, rational numbers, complex numbers and strings.

       By  use  of an object, one may define an arbitrarily complex data types.  One may define how such objects behave a wide range of operations such as addition, subtraction, multiplication, division,
       negation, squaring, modulus, rounding, exponentiation, equality, comparison, printing and so on.

       For more information use the following calc commands:

          help types
          help obj
          show objfuncs

VARIABLES
       Variables in calc are typeless.  In other words, the fundamental type of a variable is determined by its content.  Before a variable is assigned a value it has the value of zero.

       The scope of a variable may be global, local to a file, or local to a procedure.  Values may be grouped together in a matrix, or into a list that permits stack and queue style operations.

       For more information use the following calc commands:

          help variable
          help mat
          help list
          show globals

INPUT/OUTPUT
       A leading ``0x'' implies a hexadecimal value, a leading ``0b'' implies a binary value, and a ``0'' followed by a digit implies an octal value.  Complex numbers are indicated by  a  trailing  ``i''
       such  as  in ``3+4i''.  Strings may be delimited by either a pair of single or double quotes.  By default, calc prints values as if they were floating point numbers.  One may change the default to
       print values in a number of modes including fractions, integers and exponentials.

       A number of stdio-like file I/O operations are provided.  One may open, read, write, seek and close files.  Filenames are subject to `` '' expansion to home directories in a way similar to that of
       the Korn or C-Shell.

       For example:

          ~/.calcrc
          ~chongo/lib/fft_multiply.cal

       For more information use the following calc command:

          help file

CALC LANGUAGE
       The calc language is a C-like language.  The language includes commands such as variable declarations, expressions, tests, labels, loops, file operations, function calls.  These commands are  very
       similar to their counterparts in C.

       The  language also include a number of commands particular to calc itself.  These include commands such as function definition, help, reading in resource files, dump files to a file, error notifi‐
       cation, configuration control and status.

       For more information use the following calc command:

          help command
          help statement
          help expression
          help operator
          help config

FILES
       /usr/bin/calc
            calc binary

       /usr/share/doc/calc/examples/*
            calc shell scripts

       /usr/lib/*.cal
            calc standard resource files

       /usr/lib/help/*
            help files

       /usr/lib/bindings
            non-GNU-readline command line editor bindings

       /usr/include/calc/*.h
            include files for C interface use

       /usr/lib/libcalc.a
            calc binary link library

       /usr/lib/libcustcalc.a
            custom binary link library

       /usr/share/calc/custom/*.cal
            custom resource files

       /usr/share/calc/custhelp/*
            custom help files

ENVIRONMENT
       CALCPATH
            A :-separated list of directories used to search for calc resource filenames that do not begin with /, ./ or ~.

            Default value: .:./cal:~/.cal:/usr/local/share/calc:/usr/share/calc:/usr/share/calc/custom

       CALCRC
            On startup (unless -h or -q was given on the command line), calc searches for files along this :-separated environment variable.

            Default value: ./.calcinit:~/.calcrc:/usr/local/share/calc/startup:/usr/share/calc/startup

       CALCBINDINGS
            On startup (unless -h or -q was given on the command line, or -m disallows opening files for reading), calc reads key bindings from the filename specified by this environment  variable.   The
            key binding file is searched for along the $CALCPATH list of directories.

            Default value: binding

            This variable is not used if calc was compiled with GNU-readline support.  In that case, the standard readline mechanisms (see readline(3)) are used.

       CALCHISTFILE
            Location of the calc history file.

            Default value: ~/.calc_history

            This variable is not used if calc was compiled with GNU-readline support.

       CALCHELP
            Location of the calc help directory.

            Default value: /usr/share/calc/help

       CALCCUSTOMHELP
            Location of the calc custom help directory.

            Default value: /usr/share/calc/custhelp

CREDIT
       The main chunk of calc was written by David I. Bell.

       The calc primary mirror, and calc bug report processing is performed by Landon Curt Noll.

       Landon Curt Noll maintains the master reference source, performs release control functions as well as other calc maintenance functions.

       Thanks for suggestions and encouragement from Peter Miller, Neil Justusson, and Landon Noll.

       Thanks to Stephen Rothwell for writing the original version of hist.c which is used to do the command line editing.

       Thanks to Ernest W. Bowen for supplying many improvements in accuracy and generality for some numeric functions.  Much of this was in terms of actual code which I gratefully accepted.  Ernest also
       supplied the original text for many of the help files.

       Portions of this program are derived from an earlier set of public domain arbitrarily precision routines which was posted to the net around 1984.  By now, there is almost no recognizable code left
       from that original source.

COPYING / CALC GNU LESSER GENERAL PUBLIC LICENSE
       Calc  is  open software, and is covered under version 2.1 of the GNU Lesser General Public License.  You are welcome to change it and/or distribute copies of it under certain conditions.  The calc
       commands:

            help copyright
            help copying
            help copying-lgpl
            help credit

       should display the contents of the COPYING and COPYING-LGPL files.  Those files contain information about the calc's GNU Lesser General Public License, and in particular the conditions under which
       you are allowed to change it and/or distribute copies of it.

       You should have received a copy of the version 2.1 of the GNU Lesser General Public License.  If you do not have these files, write to:

            Free Software Foundation, Inc.
            51 Franklin Street
            Fifth Floor
            Boston, MA  02110-1301
            USA

       Calc is copyrighted in several different ways.  These ways include:

            Copyright (C) year  David I. Bell
            Copyright (C) year  David I. Bell and Landon Curt Noll
            Copyright (C) year  David I. Bell and Ernest Bowen
            Copyright (C) year  David I. Bell, Landon Curt Noll and Ernest Bowen
            Copyright (C) year  Landon Curt Noll
            Copyright (C) year  Ernest Bowen and Landon Curt Noll
            Copyright (C) year  Ernest Bowen
            Copyright (C) year  Petteri Kettunen and Landon Curt Noll
            Copyright (C) year  Christoph Zurnieden
            Copyright (C) year  Landon Curt Noll and Thomas Jones-Low
            Copyright (C) year  Klaus Alexander Seistrup and Landon Curt Noll

       This man page is:

            Copyright (C) 1999-2023  Landon Curt Noll

       and is covered under version 2.1 GNU Lesser General Public License.

       A few files in calc are covered under "The Unlicense".  For more information on this license, see:

            https://unlicense.org

CALC QUESTIONS
       To ask the calc maintainers a general question about calc, see the output of the following calc command:

            ; help question

       or read the source file:

            QUESTIONS

       or visit the following URL:

            https://github.com/lcn2/calc/blob/master/QUESTIONS

BUG REPORTS / BUG FIXES
       To inform the calc maintainers about a bug, or to submit a bug fix, see the output of the following calc command:

            ; help bugs

       or read the source file:

            BUGS

       or visit the following URL:

            https://github.com/lcn2/calc/blob/master/BUGS

CONTRIBUTING CODE TO CALC
       Calc is open source.  You are welcome to contribute code to calc, or submit bug fixes to to calc.

       To contribute code to calc, please see see the output of the following calc command:

            ; help contrib

       or read the source file:

            CONTRIB-CODE

       or visit the following URL:

            https://github.com/lcn2/calc/blob/master/CONTRIB-CODE

CALC WEB SITE
       Landon Noll maintains the calc web site is located at:

            www.isthe.com/chongo/tech/comp/calc/

CALC SOURCE CODE
       The latest version of calc source code may be obtained at the following GitHub repo:

            https://github.com/lcn2/calc

       The very latest calc source is found at the top master branch.

       You may download the calc releases from:

            https://github.com/lcn2/calc/releases

       The releases marked ((Pre-release)) are beta releases.

       The most recent release that is NOT  marked ((Pre-release)) is the recommended stable release.

Share and enjoy!  :-)                                                                               ^..^                                                                                            calc(1)
