DEBARCHIVER.FR(1)                                                                               Debarchiver                                                                               DEBARCHIVER.FR(1)

NOM
       debarchiver - Outil de gestion des paquets Debian au sein d'une archive de paquet.

SYNOPSIS
       debarchiver [options]

DESCRIPTION
       L'archiveur Debian (debarchiver) est un outil qui installe les paquets Debian dans une structure de fichiers exploitable par apt-get, aptitude, dselect et d'autres outils semblables. Il peut être
       utilisé pour la mise à jour des systèmes Debian. Il est destiné à être employé par des administrateurs locaux qui ont besoin de paquets spéciaux, ou de versions particulières, afin d'en faciliter
       la gestion.

       La structure de fichiers est basée sur celle de potato et ne reconnaît pas la structure de paquets en « pools ». (NdT : Structure utilisée à partir de woody).

OPTIONS
       -a | --autoscan
           Exécute « --autoscanpackages » et « --autoscansources ».

       --autoscanall
           Identique à « --scanall --autoscan ».

       --autoscanpackages
           Démarre automatiquement « dpkg-scanpackages » après l'installation de tous les nouveaux paquets.

       --autoscansources
           Lance automatiquement « dpkg-scansources » après l'installation de tous les nouveaux paquets.

       -b | --bzip
           Crée les fichiers « Packages.bz2 » et « Sources.bz2 » comprimés avec bzip2.

       --cachedir répertoire
           Indique le répertoire de cache utilisé par apt-ftparchive, si « --index » est utilisé. La valeur par défaut est « $cachedir ».

       --cinstall répertoire
           Indique le répertoire où le fichier « .changes » sera installé. L'utilisation d'une chaîne vide permet de supprimer ce fichier. La valeur par défaut est « $cinstall ».

       --configfile fichier
           Indique un fichier de configuration supplémentaire à lire. Il sera lu après la configuration « etc » et après les fichiers de configuration utilisateur.

       --copycmd
           Commande à utiliser pour l'installation. La valeur par défaut est « $copycmd ». Les paquets ainsi que les fichiers indiqués dans « .changes » seront installés grâce à cette commande.

       -d | --dest | --destdir répertoire
           Indique  le  répertoire de destination. C'est le répertoire de base où seront situés tous les paquets de la distribution et où l'arborescence « $distrib/$major/$arch/$section » sera créée. Par
           défaut le chemin relatif « $destdir » sera utilisé.

       --debug-level | --dl niveau
           Indique le niveau des informations qui seront affichées. 1=critique, 2=erreur, 3=normal, 4=message, 5=débogage, 6=débogage détaillé (modules).

       --distinputcriteria
           Indique les critères définissant quels paquets binaires devront être installés même en l'absence de fichier « .changes ». La valeur par défaut est « $distinputcriteria ».

       --gpgkey
           Indique la clé GnuPG à utiliser pour signer l'archive.

       --gpgpassfile
           Indique le fichier qui fournit le mot de passe à GnuPG.

       --help
           Affiche ce fichier d'aide. (NdT : Affiche, en fait, l'original en anglais.)

       -i | --input | --indir | --inputdir répertoire
           Indique le répertoire où debarchiver cherchera les nouvelles versions du paquet, ainsi que les fichiers «  *.changes  »  correspondants  qui  devront  être  installés  au  sein  du  répertoire
           « --dest ». La valeur par défaut est « $instdir ».

       --ignoredestcheck
           Force  l'installation  conformément  au  fichier  «  .changes  »  même si certains fichiers indiqués dans le fichier « .changes » existent déjà avec une taille erronée ou une mauvaise somme de
           contrôle md5.

       --incompletetime
           Indique la durée autorisée, en secondes, pendant laquelle le fichier « .changes » peut être incomplet. La valeur par défaut est de 24 heures.

       --index | -x
           Lance automatiquement « apt-ftparchive » après l'installation de tous les nouveaux paquets. Utiliser cette option OU « --autoscan », mais pas les deux ensemble.

       --instcmd
           Obsolète !

       --lockfile fichier
           Indique le fichier de verrouillage à utiliser. La valeur par défaut est « $lockfile ».

       --mailcmd
           Indique le programme à utiliser pour envoyer des courriels. Par défaut, la commande « sendmail  »  est  utilisée.  Vous  pouvez  désactiver  l'envoi  du  courriel  en  spécifiant  la  commande
           « /bin/true ».

       --mailformat
           Indique  le  format  à  utiliser  pour  envoyer  les  courriels avec le programme spécifié par « --mailfrom ». Seuls les formats « mail » et « sendmail » sont acceptés. Par défaut, debarchiver
           utilisera le format « sendmail ». Les valeurs autorisées sont :
            sendmail = utilise le format « sendmail » ;
            mail     = utilise le format « mail ».

       --mailfrom
           Indique l'expéditeur du courriel.

       --majordefault
           Indique la section principale à utiliser. La valeur par défaut est « main ».

       --movecmd
           Indique la commande à utiliser pour déplacer des fichiers. (Actuellement cette option n'est pas utilisée du tout).

       --nosort
           Permet de ne pas trier pas les paquets.

       --nostructurefix
           Permet de ne pas créer les répertoires et actualise (touch) les fichiers « Package ».

       -o | --addoverride
           Ajoute automatiquement de nouveaux paquets au fichier des exclusions (override).

       --quit-level niveau
           Indique le niveau d'erreurs qui produira l'arrêt de l'exécution. Cf. « --debug-level » ci-dessus.

       --rmcmd
           Indique la commande à utiliser pour la suppression. La valeur par défaut est « $rmcmd ». Cette commande peut être utilisée pour déplacer les anciens paquets à un autre emplacement.

       --scanall
           Explore toutes les distributions, sections, etc.

       --scandetect | -s
           Choisit automatiquement d'utiliser, soit « apt-ftparchive », soit « dpkg-scan* » (« dpkg-scanpackages » et « dpkg-scansources »), selon ce qui est installé sur le  système.  C'est  la  méthode
           recommandée. N'utilisez « --index » ou « --autoscan » que si vous savez parfaitement ce que vous faites.

       --scanonly
           Identique à « --nosort --nostructurefix ».

       -v | --version
           Affiche le numéro de version.

FICHIERS DE CONFIGURATION
       Vous  pouvez  également  utiliser  des  fichiers  de  configuration portant les noms suivants (dans l'ordre suivant) : « /etc/debarchiver.conf »,> « ~/.debarchiver.conf » et « input.conf » (chemin
       relatif) qui seront lus et exploités dans cet ordre. Les arguments de la commande auront priorité sur ces fichiers de configuration. Dans les fichiers ci-dessus vous pouvez modifier les  variables
       suivantes :

       Les fichiers de configuration sont lus comme des fichiers perl et doivent se terminer avec une valeur « true ». Par conséquent ils doivent toujours finir par une ligne d'état « 1 ».

       $bzip
           Si cette variable est positionnée à 0, aucun fichier bzip2 ne sera créé. Si elle est positionnée à 1 les fichiers bzip2 seront créés.

       $cachedir
           Indique le répertoire de cache pour apt-ftparchive utilisé si « --index » est précisé.

       $cinstall
           Emplacement où les fichiers « .changes » sont installés (voir « --cinstall » ci-dessus).

       $copycmd
           Commande d'installation (voir « --copycmd » ci-dessus).

       $destdir
           Répertoire de destination (voir « --destdir » ci-dessus).

       $distinputcriteria
           Critères permettant de déterminer les paquets qui devront être installés même en l'absence de fichier « .changes ». La valeur par défaut est « $distinputcriteria ».

       %distinputdirs
           Répertoires  (distribution  →  répertoire)  où  sont  cherchés  les  paquets  binaires supplémentaires qui n'ont pas besoin de fichier « .changes » pour être installés mais qui correspondent à
           « $distinputcriteria ». Par défaut cela accepte les paquets du noyau, produits par « make-kpkg » (qui ne génèrent pas de fichier « .changes »). En plus, les paquets binaires  avec  un  fichier
           «  .changes » correct passeront outre la distribution par défaut et seront placés dans le répertoire de la file d'attente actuelle. Cela produira la remontée vers une file d'attente spécifique
           pour placer le paquet directement dans cette distribution.

       $gpgkey
           Indique la clé GnuPG utilisée pour signer l'archive. Si cette variable est renseignée, le fichier « Release » de chaque  partie  modifiée  de  l'archive  sera  signé  par  GnuPG  en  utilisant
           «  $gpgkey  »  comme  clé  d'identification.  À  moins d'utiliser une clé sans mot de passe ou de se servir de la variable « $gpgpassfile », il est nécessaire d'exécuter debarchiver de manière
           interactive afin de pouvoir fournir le mot de passe si cette option est utilisée.

       $gpgpassfile
           Indique le nom du fichier qui contient le mot de passe de la clé GnuPG. Voir « $gpgkey » pour plus d'informations.

       $ignoredestcheck
           Force l'installation conformément au fichier « .changes » même si certains fichiers déjà existants ont une taille erronée ou une mauvaise somme de contrôle md5.

       $incompletetime
           Indique la durée autorisée, en secondes, pendant laquelle le fichier « .changes » peut demeurer incomplet. Ceci est utile pour les remontées lentes. La valeur par défaut est de 24 heures.

       $inputdir
           Répertoire d'entrée (n'affecte pas « $inputconfigfile »).

       $lockfile
           Indique le fichier de verrouillage à utiliser. La valeur par défaut est « $lockfile ».

       @mailtos
           Tableau de chaînes indiquant les destinataires de courriels. Si la chaîne contient une adresse de courrier électronique, celle-ci sera utilisée. Si elle contient une  adresse  incomplète,  par
           exemple  «  @nom_hôte  »,  le  nom  de l'utilisateur propriétaire du fichier sera utilisé en combinaison avec le « @nom_hôte » indiqué. Si aucun caractère « @ » n'est trouvé dans la chaîne, on
           considérera qu'il s'agit d'un champ dans le fichier « .changes ». Ce champ peut par exemple être « Maintainer » ou « Uploaders ».

       $mailformat
           Format utilisé pour envoyer les courriels. (Voir « --mailformat » ci-dessus.)

       $mailfrom
           Indique l'expéditeur des courriels. Par défaut : aucun ("").

       $majordefault
           Section principale par défaut. Voir « --majordefault » ci-dessus.

       $movecmd
           Commande de déplacement (voir « --movecmd » ci-dessus).

       %release
           Information complémentaire à ajouter au fichier « Release ». Les mots-clés acceptés sont : « origin », « label », et « description ».

       $rmcmd
           Commande de suppression (voir « --rmcmd » ci-dessus).

       $vrfycmd
           Commande de vérification obsolète. Cette commande est toujours fonctionnelle, mais il est conseillé de définir @vrfycmd à la place, car $vrfycmd pourrait  être  supprimé  dans  les  prochaines
           versions.

       @vrfycmd
           Commande  de  vérification.  Si  la  liste  @vrfycmd  est  vide,  la  liste est définie à ($vrfycmd) juste avant l'exécution de la commande de vérification. Cela a été fait pour des raisons de
           rétrocompatibilité.

       $verifysignatures
           Permet d'activer (1) ou de désactiver (0) la vérification de la signature des paquets remontés vers « $inputdir » (pas ceux vers « %distinputdirs »).

       $verifysignaturesdistinput
           Permet d'activer (1) ou de désactiver (2) la vérification de la signature des paquets remontés vers « %distinputdirs ». Cette option fonctionne indépendamment de « $verifysignatures ».

       $usermailcmd
           Cela permet à l'utilisateur d'indiquer à debarchiver le programme à utiliser pour envoyer les courriels. Il est également possible de spécifier le format que cette commande  doit  utiliser  en
           définissant la valeur de la variable « $mailformat ». L'utilisation de l'option « --mailcmd », dans la ligne de commande, surchargera cette variable. Vous pouvez désactiver l'envoi du courriel
           en spécifiant la commande « /bin/true ».

INDEXATION DES PAQUETS
       Il y a deux manières de produire des index exploitables par apt-get :

       On peut utiliser --autoscanpackages, --autoscansources, ou --autoscan ce qui exploitera dpkg-scanpackages et dpkg-scansources. Ceci produira les paquets et les fichiers source mais ne générera pas
       les fichiers « Contents » et risque d'être lent avec un référentiel de grande taille.

       En  revanche,  l'option --index  config utilisera apt-ftparchive pour indexer l'arborescence des paquets. apt-ftparchive peut également produire des fichiers « Contents » (destinés à apt-file), et
       il peut, éventuellement, employer un cache afin d'accélérer des exécutions multiples. Le fichier  de  configuration  apt-ftparchive  sera  produit  automatiquement.  Cela  n'a  cependant  pas  été
       complètement testé.

       Vous devez employer soit --autoscanpackages et --autoscansources soit --index, mais pas les deux, puisqu'ils font fondamentalement la même chose.

       L'action  par  défaut  (et celle qui est recommandée) est --scandetect qui analyse les logiciels déjà installés et choisit efficacement entre « --index » et « --autoscan » suivant ce que vous avez
       implanté sur votre système.

REJET
       Les fichiers « changes » sont rejetés dans les conditions suivantes :
        - Si un fichier en cours d'installation existe déjà dans l'archive et n'est pas identique à celui en cours d'installation.
        - Si le fichier « changes » n'est pas terminé bien que présent depuis un délai supérieur à « $incompletetime ».
        - Si un des fichiers qui font partie du fichier « changes » est incomplet depuis un délai supérieur à « $incompletetime ».
        - Si un des fichiers mentionnés dans le fichier « changes » est plus grand que spécifié.
        - Si la vérification des signatures est activée et que la signature ne correspond pas.

       EXEMPLE

       Supposons que vous venez de téléverser un paquet dans le référentiel, par exemple, avec dput(1), et vous ne voulez pas attendre que le processus cron les récupère. Vous pouvez forcer le traitement
       immédiat de la file entrante avec cette commande. La deuxième option permet de remplacer les fichiers d’archives existants.
        # debarchiver --scandetect --addoverride

FICHIERS
       /etc/debarchiver.conf

VOIR AUSSI
       apt-ftparchive(1)

AUTEUR
       Ola Lundqvist <ola@inguza.com>

TRADUCTION
       Valéry Perrin <valery.perrin.debian@free.fr> le 23 février 2005. Dernière mise à jour le 5 novembte 2011.

       L'équipe de traduction a fait le maximum pour réaliser une adaptation française de qualité.

       La version anglaise la plus à jour de ce document est toujours consultable via la commande  « man -L en debarchiver ».

       N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute erreur dans cette page de manuel.

Debarchiver                                                                           Tue, 07 Sep 2021 14:10:31 +0100                                                                     DEBARCHIVER.FR(1)
