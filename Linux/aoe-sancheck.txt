aoe-sancheck(8)                                                                             System Manager's Manual                                                                             aoe-sancheck(8)

NAME
       aoe-sancheck - verify storage network capabilities

SYNOPSIS
       aoe-sancheck [-v]

DESCRIPTION
       The aoe-sancheck command collects information about the local interfaces and probes the network for ATA over Ethernet devices, validating the paths for each device. It does not use the aoe kernel mod‐
       ule but rather the bpf interface to evaluate the network.  As such, the aoe module does not need to be loaded to perform the test.

       The output of the command is divided into two sections: information about the local interfaces followed by a list of detected AoE devices.  The first section displays the local interfaces, if the  in‐
       terface is up or down, its configured MTU, and the PCI ID for the interface.

       The second section lists detected AoE devices, one per line, with the following information:

       Device The device name of the form eX.Y where X is the AoE device shelf address, and Y is the AoE device slot address.

       Macs   The number of mac addresses detected for this device.

       Payload
              The number of bytes of data the device can handle in a single AoE request. This number does not represent the total frame size as it does not include bytes from ethernet or AoE headers.

       Local Interfaces
              The list of local interfaces from which the device is visible.

   Options
       -v     Prints out additional raw information.

DIAGNOSIS
       For each device, aoe-sancheck may print out additional lines of suggestions or warnings.  The following checks are made:

       The MTU of the local interfaces is set high enough to handle the AoE device's reported payload.
              Depending on the host NIC's capabilities and storage network switch's capabilities, best performance may or may not be with local interface MTU set higher than a device's payload size.

       The number of local interfaces matches the number of interfaces on the device.
              Best  performance  comes from having a host and device with comparable bandwidth. Aoe-sancheck simply counts the number of interfaces involved and does not figure link bandwidth in its compari‐
              son.

       All local interfaces for an AoE device have the same MTU.
              If one interface for a device has a smaller MTU than the others, the AoE driver must use the smaller payload size for all interfaces.

       Each path to the device is capable of the configured payload size.
              This check detects the situation where a local interface is configured for jumbo frames and the AoE device is capable of jumbo frames, but some aspect of the network  is  incapable  of  passing
              frames that size, for example, a misconfigured switch.  Aoe-sancheck reports the maximum payload size the path is capable of if less than the configured payload size.

BUGS
       The  program  may sometimes display inconsistent results between runs showing that a path is capable of a smaller frame size than it actually is.  If you see this behavior, please email one of the au‐
       thors with your verbose output.

SEE ALSO
       aoeping(8), aoetools(8)

AUTHORS
       Justin Sanders (justin@coraid.com), Sam Hopkins (sah@coraid.com)

                                                                                                                                                                                                aoe-sancheck(8)
