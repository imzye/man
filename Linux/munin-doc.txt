Munin::Node::Service(3pm)                                                           User Contributed Perl Documentation                                                           Munin::Node::Service(3pm)

NAME
       Munin::Node::Service - Methods related to handling of Munin services

SYNOPSIS
        my $services = Munin::Node::Service->new(timeout => 30);
        $services->prepare_plugin_environment;
        if ($services->is_a_runnable_service($file_name)) {
           $services->fork_service($file_name);
        }

METHODS
       new
            my $services = Munin::Node::Service->new(%args);

           Constructor.  All arguments are optional.  Valid arguments are:

           "servicedir"
                   The directory that will be searched for services.

           "defuser", "defgroup"
                   The default uid and gid that services will run as.  Service-specific user and group directives (as set by the service configuration files) will override this.

           "timeout"
                   The  default  timeout  for  services.  Services taking longer than this to run will be killed.  Service-specific timeouts will (as set in the service configuration files) will override
                   this value.

       is_a_runnable_service
            my $bool = $services->is_a_runnable_service($file_name);

           Runs miscellaneous tests on $file_name in the service directory, to try and establish whether it is a runnable service.

       list
             my @services = $services->list;

           Returns a list of all the runnable services in the directory.

       prepare_plugin_environment
            $services->prepare_plugin_environment(@services);

           Carries out various tasks that plugins require before being run, such as loading service configurations and exporting common environment variables.

       export_service_environment
            $services->export_service_enviromnent($service);

           Exports all the environment variables specific to service $service.

       change_real_and_effective_user_and_group
            $service->change_real_and_effective_user_and_group($service);

           Changes the current process' effective group and user IDs to those specified in the configuration, or the default user or group otherwise.  Also changes the real group  and  user  IDs  if  the
           operating system supports it.

           On failure, causes the process to exit.

       exec_service
            $service->exec_service($service, [@arguments]);

           Replaces the current process with an instance of service $service in $directory, running with the correct environment and privileges.

           This function never returns.  The process will exit(2) if the service to be run failed the paranoia check.

       fork_service
            $result = $service->fork_service($service, [$argument]);

           Identical to exec_service(), except it runs the service in a subprocess.  If the service takes longer than the timeout, it will be terminated.

           Returns a hash reference containing (among other things) the service's output and exit value.  (See documentation for run_as_child() in Munin::Node::Service for a comprehensive description.)

perl v5.40.1                                                                                     2025-04-12                                                                       Munin::Node::Service(3pm)
