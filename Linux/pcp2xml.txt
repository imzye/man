PCP2XML(1)                  General Commands Manual                 PCP2XML(1)

NAME
       pcp2xml - pcp-to-xml metrics exporter

SYNOPSIS
       pcp2xml  [-5CGHIjLmnrRvVxXz?]   [-4  action] [-8|-9 limit] [-a archive]
       [-A align] [--archive-folio  folio]  [-b|-B  space-scale]  [-c  config]
       [--container container] [--daemonize] [-e derived] [-f format] [-F out‐
       file] [-h host] [-i instances] [-J rank] [-K spec] [-N  predicate]  [-O
       origin]  [-P|-0  precision] [-q|-Q count-scale] [-s samples] [-S start‐
       time] [-t interval] [-T endtime] [-y|-Y time-scale] [-Z timezone]  met‐
       ricspec [...]

DESCRIPTION
       pcp2xml is a customizable performance metrics exporter tool from PCP to
       XML.  Any available performance metric, live or archived, system and/or
       application,  can  be  selected for exporting using either command line
       arguments or a configuration file.

       pcp2xml is a close relative of pmrep(1).  Refer  to  pmrep(1)  for  the
       metricspec   description   accepted   on  pcp2xml  command  line.   See
       pmrep.conf(5) for description of the  pcp2xml.conf  configuration  file
       overall  syntax.  This page describes pcp2xml specific options and con‐
       figuration file differences with pmrep.conf(5).   pmrep(1)  also  lists
       some usage examples of which most are applicable with pcp2xml as well.

       Only  the command line options listed on this page are supported, other
       options recognized by pmrep(1) are not supported.

       Options via environment values (see pmGetOptions(3)) override the  cor‐
       responding  built-in  default  values  (if  any).   Configuration  file
       options override the  corresponding  environment  variables  (if  any).
       Command  line  options  override  the  corresponding configuration file
       options (if any).

CONFIGURATION FILE
       pcp2xml uses a configuration file  with  overall  syntax  described  in
       pmrep.conf(5).   The following options are common with pmrep.conf: ver‐
       sion, source, speclocal, derived, header, globals,  samples,  interval,
       type,  type_prefer, ignore_incompat, names_change, instances, live_fil‐
       ter, rank, limit_filter, limit_filter_force, invert_filter,  predicate,
       omit_flat,  include_labels,  precision,  precision_force,  count_scale,
       count_scale_force,    space_scale,    space_scale_force,    time_scale,
       time_scale_force.   The  output  option  is  recognized but ignored for
       pmrep.conf compatibility.

   pcp2xml specific options
       extended (boolean)
           Write extended information about  metrics.   Corresponding  command
           line option is -x.  Default is no.

       everything (boolean)
           Write  everything  known about metrics, including PCP internal IDs.
           Labels  are,  however,  omitted  for  backward  compatibility,  use
           include_labels  yes to include them as well.  Corresponding command
           line option is -X.  Default is no.

OPTIONS
       The available command line options are:

       -0 precision, --precision-force=precision
            Like -P but this option will override per-metric specifications.

       -4 action, --names-change=action
            Specify which action to take on receiving a  metric  names  change
            event  during  sampling.  These events occur when a PMDA discovers
            new metrics sometime after starting up, and informs running client
            tools  like  pcp2xml.  Valid values for action are update (refresh
            metrics being sampled), ignore (do nothing -  the  default  behav‐
            iour) and abort (exit the program if such an event happens).

       -5, --ignore-unknown
            Silently ignore any metric name that cannot be resolved.  At least
            one metric must be found for the tool to start.

       -8 limit, --limit-filter=limit
            Limit results to instances with values above/below limit.  A posi‐
            tive  integer  will  include instances with values at or above the
            limit in reporting.  A negative  integer  will  include  instances
            with  values  at or below the limit in reporting.  A value of zero
            performs no limit filtering.  This option will not override possi‐
            ble per-metric specifications.  See also -J and -N.

       -9 limit, --limit-filter-force=limit
            Like -8 but this option will override per-metric specifications.

       -a archive, --archive=archive
            Performance  metric  values  are retrieved from the set of Perfor‐
            mance Co-Pilot (PCP) archive log files identified by  the  archive
            argument,  which is a comma-separated list of names, each of which
            may be the base name of an archive or the name of a directory con‐
            taining one or more archives.

       -A align, --align=align
            Force  the initial sample to be aligned on the boundary of a natu‐
            ral time unit align.  Refer to PCPIntro(1) for a complete descrip‐
            tion of the syntax for align.

       --archive-folio=folio
            Read  metric source archives from the PCP archive folio created by
            tools like pmchart(1) or, less often, manually with mkaf(1).

       -b scale, --space-scale=scale
            Unit/scale for  space  (byte)  metrics,  possible  values  include
            bytes, Kbytes, KB, Mbytes, MB, and so forth.  This option will not
            override possible per-metric specifications.  See  also  pmParseU‐
            nitsStr(3).

       -B scale, --space-scale-force=scale
            Like -b but this option will override per-metric specifications.

       -c config, --config=config
            Specify  the config file or directory to use.  In case config is a
            directory all files under it ending .conf will be  included.   The
            default     is     the    first    found    of:    ./pcp2xml.conf,
            $HOME/.pcp2xml.conf,          $HOME/pcp/pcp2xml.conf,          and
            $PCP_SYSCONF_DIR/pcp2xml.conf.  For details, see the above section
            and pmrep.conf(5).

       --container=container
            Fetch performance metrics from  the  specified  container,  either
            local or remote (see -h).

       -C, --check
            Exit before reporting any values, but after parsing the configura‐
            tion and metrics and printing possible headers.

       --daemonize
            Daemonize on startup.

       -e derived, --derived=derived
            Specify derived performance metrics.  If  derived  starts  with  a
            slash  (``/'')  or  with a dot (``.'') it will be interpreted as a
            derived metrics configuration file, otherwise it  will  be  inter‐
            preted  as  comma-  or  semicolon-separated derived metric expres‐
            sions.  For details  see  pmLoadDerivedConfig(3)  and  pmRegister‐
            Derived(3).

       -G, --no-globals
            Do not include global metrics in reporting (see pmrep.conf(5)).

       -f format, --timestamp-format=format
            Use  the  format  string for formatting the timestamp.  The format
            will be used  with  Python's  datetime.strftime  method  which  is
            mostly  the same as that described in strftime(3).  The default is
            %Y-%m-%d %H:%M:%S.

       -F outfile, --output-file=outfile
            Specify the output file outfile.

       -h host, --host=host
            Fetch performance metrics from pmcd(1) on host, rather  than  from
            the default localhost.

       -H, --no-header
            Do not print any headers.

       -i instances, --instances=instances
            Retrieve  and  report  only  the  specified  metric instances.  By
            default all instances, present and future, are reported.

            Refer to pmrep(1) for complete description of this option.

       -I, --ignore-incompat
            Ignore incompatible  metrics.   By  default  incompatible  metrics
            (that  is,  their  type is unsupported or they cannot be scaled as
            requested) will cause pcp2xml to terminate with an error  message.
            With  this  option  all  incompatible metrics are silently omitted
            from reporting.  This may be  especially  useful  when  requesting
            non-leaf nodes of the PMNS tree for reporting.

       -j, --live-filter
            Perform  instance live filtering.  This allows capturing all named
            instances even if processes are restarted at  some  point  (unlike
            without  live  filtering).   Performing live filtering over a huge
            number of instances will add some internal overhead so  a  bit  of
            user caution is advised.  See also -n.

       -J rank, --rank=rank
            Limit  results  to  highest/lowest  ranked instances of set-valued
            metrics.  A positive integer will include highest valued instances
            in  reporting.   A  negative  integer  will  include lowest valued
            instances in reporting.  A value  of  zero  performs  no  ranking.
            Ranking does not imply sorting, see -6.  See also -8.

       -K spec, --spec-local=spec
            When fetching metrics from a local context (see -L), the -K option
            may be used to control the DSO PMDAs that should be made  accessi‐
            ble.   The  spec  argument  conforms  to  the  syntax described in
            pmSpecLocalPMDA(3).  More than one -K option may be used.

       -L, --local-PMDA
            Use a local context to collect metrics from DSO PMDAs on the local
            host without PMCD.  See also -K.

       -m, --include-labels
            Include metric labels in the output.

       -n, --invert-filter
            Perform  ranking  before live filtering.  By default instance live
            filtering (when requested, see -j) happens before instance ranking
            (when  requested, see -J).  With this option the logic is inverted
            and ranking happens before live filtering.

       -N predicate, --predicate=predicate
            Specify a comma-separated list of predicate filter reference  met‐
            rics.   By  default ranking (see -J) happens for each metric indi‐
            vidually.  With predicates, ranking is done only for the specified
            predicate  metrics.   When  reporting, rest of the metrics sharing
            the same instance domain (see PCPIntro(1)) as the  predicate  will
            include  only  the  highest/lowest ranking instances of the corre‐
            sponding predicate.  Ranking does not imply sorting, see -6.

            So for example, using proc.memory.rss  (resident  memory  size  of
            process) as the predicate metric together with proc.io.total_bytes
            and mem.util.used as metrics to be reported,  only  the  processes
            using  most/least (as per -J) memory will be included when report‐
            ing total bytes written by processes.  Since  mem.util.used  is  a
            single-valued metric (thus not sharing the same instance domain as
            the process related metrics), it will be reported as usual.

       -O origin, --origin=origin
            When reporting archived metrics, start reporting at origin  within
            the  time window (see -S and -T).  Refer to PCPIntro(1) for a com‐
            plete description of the syntax for origin.

       -P precision, --precision=precision
            Use precision for numeric non-integer output values.  The  default
            is  to  use  3 decimal places (when applicable).  This option will
            not override possible per-metric specifications.

       -q scale, --count-scale=scale
            Unit/scale for count metrics,  possible  values  include  count  x
            10^-1, count, count x 10, count x 10^2, and so forth from 10^-8 to
            10^7.  (These values are currently space-sensitive.)  This  option
            will  not  override  possible per-metric specifications.  See also
            pmParseUnitsStr(3).

       -Q scale, --count-scale-force=scale
            Like -q but this option will override per-metric specifications.

       -r, --raw
            Output raw metric values, do not convert  cumulative  counters  to
            rates.   This  option will override possible per-metric specifica‐
            tions.

       -R, --raw-prefer
            Like -r but this option will not  override  per-metric  specifica‐
            tions.

       -s samples, --samples=samples
            The samples argument defines the number of samples to be retrieved
            and reported.  If samples is 0 or -s  is  not  specified,  pcp2xml
            will  sample  and report continuously (in real time mode) or until
            the end of the set of PCP archives (in archive  mode).   See  also
            -T.

       -S starttime, --start=starttime
            When  reporting archived metrics, the report will be restricted to
            those records logged at or after starttime.  Refer to  PCPIntro(1)
            for a complete description of the syntax for starttime.

       -t interval, --interval=interval
            Set  the  reporting interval to something other than the default 1
            second.  The interval argument follows  the  syntax  described  in
            PCPIntro(1),  and  in the simplest form may be an unsigned integer
            (the implied units in this case are seconds).   See  also  the  -T
            option.

       -T endtime, --finish=endtime
            When  reporting archived metrics, the report will be restricted to
            those records logged before or at endtime.  Refer  to  PCPIntro(1)
            for a complete description of the syntax for endtime.

            When  used  to  define the runtime before pcp2xml will exit, if no
            samples is given (see -s) then  the  number  of  reported  samples
            depends  on  interval (see -t).  If samples is given then interval
            will be adjusted to allow reporting of samples during runtime.  In
            case  all  of  -T,  -s,  and  -t are given, endtime determines the
            actual time pcp2xml will run.

       -v, --omit-flat
            Report only set-valued metrics with instances (e.g. disk.dev.read)
            and  omit  single-valued  ``flat'' metrics without instances (e.g.
            kernel.all.sysfork).  See -i and -I.

       -V, --version
            Display version number and exit.

       -x, --with-extended
            Write extended information.

       -X, --with-everything
            Write everything known about metrics, including PCP internal  IDs.
            Labels are, however, omitted for backward compatibility, use -m to
            include them as well.

       -y scale, --time-scale=scale
            Unit/scale for time metrics, possible values include nanosec,  ns,
            microsec,  us,  millisec,  ms,  and so forth up to hour, hr.  This
            option will not override possible per-metric specifications.   See
            also pmParseUnitsStr(3).

       -Y scale, --time-scale-force=scale
            Like -y but this option will override per-metric specifications.

       -z, --hostzone
            Use  the local timezone of the host that is the source of the per‐
            formance metrics, as  identified  by  either  the  -h  or  the  -a
            options.  The default is to use the timezone of the local host.

       -Z timezone, --timezone=timezone
            Use  timezone for the date and time.  Timezone is in the format of
            the environment variable TZ as described in environ(7).  Note that
            when  including  a  timezone string in output, ISO 8601 -style UTC
            offsets are used (so something like -Z EST+5 will become UTC-5).

       -?, --help
            Display usage message and exit.

FILES
       pcp2xml.conf
            pcp2xml configuration file (see -c)

PCP ENVIRONMENT
       Environment variables with the prefix PCP_ are used to parameterize the
       file  and  directory names used by PCP.  On each installation, the file
       /etc/pcp.conf contains the  local  values  for  these  variables.   The
       $PCP_CONF  variable may be used to specify an alternative configuration
       file, as described in pcp.conf(5).

       For environment variables affecting PCP tools, see pmGetOptions(3).

SEE ALSO
       mkaf(1), PCPIntro(1),  pcp(1),  pcp2elasticsearch(1),  pcp2graphite(1),
       pcp2influxdb(1), pcp2json(1), pcp2spark(1), pcp2xlsx(1), pcp2zabbix(1),
       pmcd(1),  pminfo(1),  pmrep(1),  pmGetOptions(3),   pmSpecLocalPMDA(3),
       pmLoadDerivedConfig(3), pmParseUnitsStr(3), pmRegisterDerived(3), LOGA‐
       RCHIVE(5), pcp.conf(5), PMNS(5), pmrep.conf(5) and environ(7).

Performance Co-Pilot                  PCP                           PCP2XML(1)
