aoe-stat(8)                                                                                 System Manager's Manual                                                                                 aoe-stat(8)

NAME
       aoe-stat - print aoe device status report

SYNOPSIS
       modprobe aoe
       aoe-stat
       env sysfs_dir=/sys aoe-stat

DESCRIPTION
       The aoe-stat script collects information on ATA over Ethernet devices from sysfs.

       For each AoE device the kernel has discovered, there is one row in the script's output.  Each row has the following columns.

       devicename
              The device name is of the form eX.Y,
               with X being the AoE device shelf address, and Y being the AoE slot address.

       size   The size of the AoE device is in gigabytes (billions of bytes).

       ifname The network interface name is printed in the third column.

       payload
              The number of bytes read from or written to the storage target in each AoE packet appears in the fourth column, unless the aoe driver does not export this information.

       status The  device  status  is  in  the last column.  Possible values are  up,  down, and  down,closewait.  The "up" status means the aoe driver considers this device ready for I/O.  The "down" status
              means the opposite.  The "down,closewait" status means that some software still has the device open, and when this straggler closes the device, it will enter the "down" state.

UNAVAILABLE TARGETS
       If a discovered AoE target will not respond to I/O commands, some of the information needed to allow Linux to use the device is not available.  The aoe-stat command shows the  missing  information  as
       "(NA)" fields.

       It is normal for "(NA)" fields to appear during the brief time between the time that an AoE target is detected and the time the Linux kernel finishes reading its partition table.

ENVIRONMENT VARIABLES
       If the sysfs_dir variable is set in the environment, it will override the default location where aoe-stat will look for sysfs, namely  /sys.

WARNINGS
       If the minor device number of a device node does not match that of its namesake, aoe-stat will print a warning as shown below.

              nai:~# aoe-stat
                    e0.3         0.104GB   eth0 up
                    e0.4      4398.046GB   eth0 up
                   e20.0      1000.215GB   eth0 up
                   e42.0      2000.431GB   eth0 up
              aoe-stat Warning: device node /dev/etherd/e45.1 has wrong minor device number
                   e45.1      1152.874GB   eth0 up

       Using  such  a device node is dangerous, because its name doesn't match the actual device that you would be reading from and writing to.  Such a broken device node should be removed.  Device nodes are
       created by udev or (on systems without udev) by aoe-mkdevs.

EXAMPLE
       In this example, the root user on a host named nai loads the aoe driver module and then prints a list of all the available aoe devices.  Then he remembers to bring up the storage  network  interfaces,
       does an AoE discovery, and prints the list again.  This time the list shows all the devices in shelf seven.

              nai:~# modprobe aoe
              nai:~# aoe-stat
              nai:~# ifconfig eth3 up
              nai:~# aoe-discover
              nai:~# aoe-stat
                    e0.0     10995.116GB   eth3 up
                    e0.1     10995.116GB   eth3 up
                    e0.2     10995.116GB   eth3 up
                    e1.0      1152.874GB   eth3 up
                    e7.0       370.566GB   eth3 up
              nai:~#

SEE ALSO
       aoe-discover(8), aoe-interfaces(8), aoe-mkdevs(8), aoe-mkshelf(8), aoetools(8), udev(7).

AUTHOR
       Ed L. Cashin (ecashin@coraid.com)

                                                                                                                                                                                                    aoe-stat(8)
