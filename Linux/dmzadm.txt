dmzadm(8)                   System Manager's Manual                  dmzadm(8)

NAME
       dmzadm - manage zoned block device format for use with the dm-zoned de‐
       vice mapper target

SYNOPSIS
       dmzadm -h | --help

       dmzadm --version

       dmzadm  operation  [  regular-block-device  ]  zoned-block-device-0   [
       zoned-block-device-1 [...]  ] [ options ]

DESCRIPTION
       dmzadm  is used to format, check and repair block devices used with the
       dm-zoned device mapper. zoned-block-device-0 specifies the device  node
       of the zoned block device to use (e.g. /dev/sdX).

       regular-block-device is an optional device node corresponding to a reg‐
       ular block device to be used together with the zoned  block  device  to
       store  metadata  and  to act as the conventional zone storage space for
       the zoned device.

       When regular-block-device is used, more than one zoned block device can
       be  specified  (zoned-block-device-1  etc). If multiple zoned block de‐
       vices are specified, all devices must have the same zone size.

       operation specifies the action to be taken on the device.

       dmzadm returns 0 on success and 1 on failure.

OPERATIONS
       dmzadm defines the following operations.

       -h, --help
              Print a short usage description of dmzadm.

       --version
              Print the current version number and exit dmzadm.

       --format
              Write to the zoned block device(s) and  optional  regular  block
              device dm-zoned metadata, whiping clean all data that was stored
              on the device(s).

       --check
              Check the device(s) metadata consistency. No  repair  action  is
              taken.   Metadata corruptions are not corrected with this opera‐
              tion. For repairing incorrect metadata, the  --repair  operation
              must be used.

       --repair
              Check  the  consistency of the device(s) metadata and try to re‐
              pair any error detected.

       --relabel
              Change the label (DM device name) of a  formatted  dm-zoned  de‐
              vice.

       --start
              Load the metadata information from the block device(s) and acti‐
              vate the dm-zoned device.

       --stop Deactivate the dm-zoned device associated  with  the  block  de‐
              vice(s).

COMMON OPTIONS
       The following options can be used with all operations.

       --verbose
              Verbose output detailing actions taken.

       --vverbose
              Very detailed output of actions taken.

FORMAT OPERATION OPTIONS
       The following options can be used when the --format operation is speci‐
       fied.

       --seq=num
              Specify the number of sequential zones to be  reserved  for  re‐
              claim (default: 16 per zoned block device).

       --label=str
              Define  the label of the device-mapper device. If not specified,
              the label defaults to dmz-serial, where  serial  is  the  serial
              number of the block device storing the metadata (the first block
              device specified). If the serial number for the  metadata  block
              device  is  not  available,  the  label defaults to dmz-bdevname
              where bdevname is the name of the metadata block device.

RELABEL OPERATION OPTIONS
       The following options can be used when the --relabel operation is spec‐
       ified.

       --label=str
              Define  the new label of the device-mapper device. If not speci‐
              fied, the new label defaults to dmz-serial, where serial is  the
              serial  number  of  the  block  device storing the metadata (the
              first block device specified).  If the  serial  number  for  the
              metadata  block  device  is not available, the label defaults to
              dmz-bdevname where bdevname is the name of  the  metadata  block
              device.

AUTHORS
       This    version   of   dmzadm   was   written   by   Damien   Le   Moal
       <damien.lemoal@wdc.com> and Albert H. Chen  <albert.chen@wdc.com>  with
       contributions from Hannes Reinecke <hare@suse.de>.

COPYRIGHT
       GNU General Public Licence version 3 or later

        (c) 2016-2020 Western Digital Corportation and its affiliates

       Manual  written  by  Damien  Le  Moal  <damien.lemoal@wdc.com and by Tj
       <ubuntu@iam.tj> for Debian and Ubuntu.

AVAILABILITY
       dmzadm is available from the dm-zoned-tools project hosted on github at
       https://github.com/westerndigitalcorporation/dm-zoned-tools

SEE ALSO
       dmsetup(8)

                                  May 20 2020                        dmzadm(8)
