
ethsetupsnmp(8)                                                                              EFSFFCLIRG (Man Page)                                                                              ethsetupsnmp(8)

NAME
       ethsetupsnmp

       Sets up SNMP on hosts to allow ethreport to query fabric data through SNMP.

Syntax
       ethsetupsnmp [-p] [-f  hostfile] [-h 'hosts'] [-a  admin]

       [-c  community] [-m  mibs]

Options
       --help

                 Produces full help text.

       -p

                 Performs operation against all hosts in parallel.

       -f hostfile

                 Specifies the file with hosts in cluster.
                 Default is /etc/eth-tools/hosts.

       -h hosts

                 Specifies the list of hosts in cluster.

       -a admin

                 Specifies the list of admin hosts that can issue SNMP query. Default is the current host.

       -c community

                 Specifies the community string used for SNMP query. Default is public.

       -m mibs

                 Specifies the list of MIBs that are readable in SNMP queries. Default is all MIBs required by FastFabric.

Examples
       ethsetupssh -h 'elrond arwen' -a 'elrond'

       HOSTS='elrond arwen' ethsetupsnmp -a 'elrond'

       ethsetupsnmp -a 'elrond' -c 'public' -m '1.3.6.1.2.1.1 1.3.6.1.2.1.2'

Environment Variables
       The following environment variables are also used by this command:

       HOSTS

                 List of hosts, used if -h option not supplied.

       HOSTS_FILE

                 File containing list of hosts, used in absence of -f and -h.

       FF_MAX_PARALLEL

                 When -p option is used, maximum concurrent operations.

Description
       ethreport  collects  fabric  data  through  issuing SNMP queries to hosts and switches. Intel recommends that you set up SNMP using ethsetupsnmp to ensure ethreport has proper permission to query each
       host; each host can provide desired data; and, all hosts have consistent SNMP configuration. ethsetupsnmp accepts the following parameters to configure SNMP. These parameters can be specified as  com‐
       mand line arguments or collected during user interaction. ethsetupsnmp works under user interaction mode when one or more of the required parameters are not specified in command line.

       ·      admin: Space separated management node names. ethsetupsnmp will configure each host to allow SNMP query from these nodes.

       ·      community: The community string for SNMP v2 query. The default is public. If set to a different string, ensure update hpnmgmt_config.xml with the string.

       ·      mibs: The MIBs allow SNMP query. FastFabric requires the following MIBs. You can provide extra MIBs if they are required by other applications.1.3.6.1.2.1.1 (SNMPv2-MIB:system)

              1.3.6.1.2.1.2 (IF-MIB:interfaces)

              1.3.6.1.2.1.4 (IP-MIB:ip)

              1.3.6.1.2.1.10.7 (EtherLike-MIB:dot3)

              1.3.6.1.2.1.31.1 (IP-MIB:ifMIBObjects)

       When working under interactive mode, follow the prompts to complete the operation.Configuring SNMP...

       Enter space separated list of admin hosts (mindy1):

       Enter SNMP community string (public):

       Fast Fabric requires the following MIBs:

              1.3.6.1.2.1.1 (SNMPv2-MIB:system)

              1.3.6.1.2.1.2 (IF-MIB:interfaces)

              1.3.6.1.2.1.4 (IP-MIB:ip)

              1.3.6.1.2.1.10.7 (EtherLike-MIB:dot3)

              1.3.6.1.2.1.31.1 (IP-MIB:ifMIBObjects)

       Do you accept these MIBs [y/n] (y):

       Enter space separated list of extra MIBs to support (NONE):

       Will config SNMP with the following settings:

       admin hosts: mindy1

       community: public

       MIBs: 1.3.6.1.2.1.1 1.3.6.1.2.1.2 1.3.6.1.2.1.4 1.3.6.1.2.1.10.7

       1.3.6.1.2.1.31.1

       Do you accept these settings [y/n] (y):

       scp -q /usr/sbin/ethsetupsnmp root@[mindy1]:/tmp/ethsetupsnmp

       scp -q /usr/sbin/ethsetupsnmp root@[mindy2]:/tmp/ethsetupsnmp

       [root@phwfstl005]# /tmp/ethsetupsnmp -l -a 'mindy1' -c 'public' -m

       '1.3.6.1.2.1.1 1.3.6.1.2.1.2 1.3.6.1.2.1.4 1.3.6.1.2.1.10.7 1.3.6.1.2.1.31.1

       ';rm -f /tmp/ethsetupsnmp

       Configuring SNMP...

       SNMP configuration completed

       [root@phwfstl006]# /tmp/ethsetupsnmp -l -a 'mindy1' -c 'public' -m

       '1.3.6.1.2.1.1 1.3.6.1.2.1.2 1.3.6.1.2.1.4 1.3.6.1.2.1.10.7 1.3.6.1.2.1.31.1

       ';rm -f /tmp/ethsetupsnmp

       Configuring SNMP...

       SNMP configuration completed

       SNMP configuration completed

Copyright(C) 2020                                                                              Intel Corporation                                                                                ethsetupsnmp(8)
