autopkgtest-build-qemu(1)                                                                   General Commands Manual                                                                   autopkgtest-build-qemu(1)

NAME
       autopkgtest-build-qemu - Create autopkgtest virtual machine images for autopkgtest-virt-qemu

SYNOPSIS
       autopkgtest-build-qemu RELEASE IMAGE [MIRROR] [ARCHITECTURE] [SCRIPT] [SIZE]

DESCRIPTION
       autopkgtest-build-qemu creates virtual machine images suitable for use with autopkgtest's QEMU runner autopkgtest-virt-qemu(1).

       Under the hood, it uses vmdb2(1) to create the images.

       The MIRROR parameter can be used to control which distrition to install.  It defaults to  http://deb.debian.org/debian (i.e. Debian), but you can pass a mirror of any Debian derivative.

       The ARCHITECTURE parameter controls the architecture the virtual machine image. If omitted, the host architecture is assumed.

       The  SCRIPT  parameter  specifies  a  user  script  that will be called with the root filesystem of the image as its first parameter. This script can them make any necesssary modifications to the root
       filesystem.

       The SIZE parameter specifies the image size for the virtual machine, and defaults to 25G.

       It defaults to the native architecture, but you can specify a different one as fourth parameter.

       The path to a script to be executed inside the virtual machine root filesystem can be passed as the fifth parameter. The script must be a POSIX shell script, and should  not  depend  on  bash-specific
       features. This script will be executed inside a chroot(1) call in the virtual machine root filesystem.

       Note that you need to call this as root.

ENVIRONMENT
       If the $AUTOPKGTEST_KEEP_APT_SOURCES environment variable is set to a non-empty value, autopkgtest-build-qemu will keep whatever /etc/apt/sources.list was created by debootstrap.

       Otherwise,  if  the $AUTOPKGTEST_APT_SOURCES_FILE environment variable is set to a non-empty value, for example AUTOPKGTEST_APT_SOURCES_FILE=/home/me/mydistro/sources.list, then autopkgtest-build-qemu
       will read that file (on the host system) and use it to populate /etc/apt/sources.list in the virtual machine; or if the $AUTOPKGTEST_APT_SOURCES environment variable is set to a non-empty  value,  for
       example AUTOPKGTEST_APT_SOURCES=$(cat /home/me/mydistro/sources.list), autopkgtest-build-qemu will write it directly into /etc/apt/sources.list in the virtual machine.

       You  can  specify an apt proxy to use in the virtual machine in the $AUTOPKGTEST_APT_PROXY environment variable. If you have an apt proxy configured on the host, the virtual machine will automatically
       use this, otherwise there is no default.

EXAMPLES
       # autopkgtest-build-qemu unstable /path/to/debian-unstable.img

       $ sudo autopkgtest-build-qemu stable /path/to/debian-stable-i386.img i386

       $ sudo autopkgtest-build-qemu bionic /path/to/ubuntu-bionic.img http://archive.ubuntu.com/ubuntu

SEE ALSO
       autopkgtest-virt-qemu(1), vmdb2(1), autopkgtest(1), /usr/share/doc/autopkgtest/.

AUTHORS AND COPYRIGHT
       autopkgtest-build-qemu was written by Antonio Terceiro <terceirio@debian.org>

       This manpage is part of autopkgtest, a tool for testing Debian binary packages.  autopkgtest is Copyright (C) 2006-2018 Canonical Ltd and others.

       See /usr/share/doc/autopkgtest/CREDITS for the list of contributors and full copying conditions.

Linux Programmer's Manual                                                                             2014                                                                            autopkgtest-build-qemu(1)
