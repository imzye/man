WESNOTHD(6)                                                           韦诺之战多人网络守护进程                                                           WESNOTHD(6)

名称
       wesnothd - 韦诺之战（Battle for Wesnoth）多人网络守护进程

摘要
       wesnothd [-dv] [-c path] [-p port] [-t number] [-T number]
       wesnothd -V

描述
       管理韦诺之战的多人游戏。请参见http://www.wesnoth.org/wiki/ServerAdministration以查看服务器可以接受的命令列表。服务器可以从wesnoth客户端（/query       ...）或
       者fifo接受命令。

选项
       -c path, --config path
              指定wesnothd查找配置文件的目录。欲获知命令语法，请查看下面的服务器配置小节。通过发送SIGHUP信号给服务器可以重新装载配置文件。

       -d, --daemon
              以守护进程方式运行wesnothd。

       -h, --help
              显示命令行选项的作用。

       --log-level=domain1,domain2,...
              设置日志域的严重度级别。all可以用来匹配任意日志域。可选的级别有：error, warning, info, debug。默认的级别是error，对server域而言，默认级别是info。

       -p port, --port port
              绑定服务器到指定的端口。如果不指定，则将使用15000端口。

       -t number, --threads number
              设置网络I/O中等待状态的工作线程的最大数量为n（默认值：5， 最大值： 30）。

       -T number, --max-threads number
              设置允许创建的最大工作线程数。如果设置为0则不限制线程数（默认值：0）

       -V, --version
              显示版本号并退出。

       -v, --verbose
              开启调试日志记录。

服务器配置
   通用的语法为：
       [tag]

              key="value"

              key="value,value,..."

       [/tag]

   全局主键：
       allow_remote_shutdown
              如果设置为 no （默认值），shut_down（关闭）和restart（重启）请求将被忽略，除非这些请求来自于fifo。如果设为 yes 则允许管理员通过 /query 远程关闭。

       ban_save_file
              一个服务器可读可写的（经gzip压缩的）文件的完整路径或相对路径。封禁信息会自动保存在这个文件里，并在服务器启动时读取。

       compress_stored_rooms
              指定房间文件是否应该以压缩形式读写。默认值为yes。

       connections_allowed
              同一IP允许的连接数。0 表示无限制。（默认值：5）

       disallow_names
              服务器不允许使用的用户名/昵称。可以使用*和?通配符。更多详细信息请查看glob(7)。默认值（如果用户没有指定则自动使
              用）是：*admin*,*admln*,*server*,ai,ai?,computer,human,network,player。

       fifo_path
              服务器所使用的fifo文件的路径（与在wesnoth中使用  /query  ...  的功能相同），您可以向该文件内echo服务器命令。如果不指定，则默认为编译时指定的路径（默认
              值：/var/run/socket/wesnothd/socket）。

       max_messages
              messages_time_period内允许的消息数。（默认值：4）

       messages_time_period
              消息泛滥检测的时间间隔（秒）。（默认值：10秒）

       motd   每日一言。

       new_room_policy
              指定谁能在服务器上创建新房间。可选值为 everyone，registered，admin和nobody，分别代表所有人，注册用户，管理员或者禁止创建新房间。默认值为 everyone。

       passwd 用来获取管理员权限的密码（通过 /query admin password来取得权限）。

       replay_save_path
              服务器用于存放游戏录像的目录。（不要忘了以/结尾！）默认为`'（空），意指wesnothd启动时的当前目录。

       restart_command
              这是服务器通过restart命令开启新服务器进程时使用的命令。（只能通过fifo来调用。参见allow_remote_shutdown设置。）

       room_save_file
              指定存放房间信息的文件的路径。这个文件在服务器启动时读取，之后会写入。如果设为空或者不设置，则房间不会被读取或保存。

       save_replays
              设置服务器是否自动保存游戏录像。（默认值：false）

       versions_accepted
              服务器接受的客户端版本号列表，是以逗号分隔的字符串。支持*和?通配符。（默认为与服务器版本一致的wesnoth版本）
              例如: versions_accepted="*" 允许所有版本连接。

       user_handler
              希望使用的用户信息处理器的名称。目前可选的有forum（将wesnothd与phpbb论坛的数据库连接起来）和sample（一个用户信息处理接口的样例实现，如果您真的在实际中
              使用它，那您一定是疯了）。默认值是forum，同时您必须添加一个[user_handler]小节，请看下面。

   全局标签：
       [redirect] 这个标签用于设定一个服务器，以将某些版本的客户端重定向到该服务器上。

              host   重定向到的服务器的地址。

              port   应连接的端口。

              version
                     用逗号分隔的需要重定向的版本号列表。可以使用通配符，在这方面和 versions_accepted 一样。

       [ban_time] 这个标签用于定义一些方便的关键字，以对应一些常用的临时封禁时间长度。

              name   用于引用封禁时间的名字。

              time   时间长度定义。    格式为：%d[%s[%d%s[...]]]    其中%s是s（秒），m（分钟），h（小时），D（天），M（月），Y（年），%d是一个数字。如果不指定时间单
                     位，默认为分钟（m）。例如：time= 代表的是1天零12小时又30分钟的封禁。

       [proxy] 这个标签用于告诉服务器扮演代理服务器角色，把连接在本服务器上的用户的请求转发到指定的服务器。与[redirect]接受一样的主键。

       [user_handler] 配置用户数据处理器。可设置的主键取决于通过user_handler设置的用户数据处理器是哪一个。如果配置文件中没有[user_handler]小节，则服务器在运行中将不
       提供任何昵称注册服务。forum_user_handler正常运作所需的额外数据表可以在韦诺源代码库的table_definitions.sql中找到。

              db_host
                     （当user_handler=forum时）数据库服务器的主机名

              db_name
                     （当user_handler=forum时）数据库名

              db_user
                     （当user_handler=forum时）数据库登录用户名

              db_password
                     （当user_handler=forum时）这个用户的密码

              db_users_table
                     （当user_handler=forum时）phpbb论坛中存放用户数据的表名。很可能是<table-prefix>_users（例如phpbb3_users）。

              db_extra_table
                     （当user_handler=forum时）用于保存wesnothd自有数据的表名，其中是与用户相关的数据。你必须手动创建此表。

              db_game_info_table
                     （当user_handler=forum时）用于保存wesnothd自有数据的表名，其中是与游戏相关的数据。

              db_game_player_info_table
                     （当user_handler=forum时）用于保存wesnothd自有数据的表名，其中是与单场游戏中玩家相关的数据。

              db_game_modification_info_table
                     （当user_handler=forum时）用于保存wesnothd自有数据的表名，其中是与单场游戏中使用的模组相关的数据。

              db_user_group_table
                     （当user_handler=forum时）phpbb论坛中存放用户组数据的表名。很可能是<table-prefix>_users_group（例如phpbb3_users_group）。

              mp_mod_group
                     （当user_handler=forum时）论坛用户组ID，该组将视为拥有管理员权限。

              user_expiration
                     （如果user_handler=sample）注册昵称的失效时间（天数）。

       [mail] 设置一个SMTP服务器，通过它用户信息处理器可以发送邮件。目前只在样例处理器中使用。

              server 邮件服务器的主机名

              username
                     登录到邮件服务器的用户名。

              password
                     这个用户的密码。

              from_address
                     您的邮箱的“回复到”邮件地址。

              mail_port
                     邮件服务器的端口。默认值为25。

退出状态码
       正常退出时状态码为0，此时服务器正常关闭。状态码2代表命令行选项中有错误。

作者
       由  David  White  <davidnwhite@verizon.net>  编写。经  Nils  Kneuper  <crazy-ivanovic@gmx.net>，ott  <ott@gaon.net>，Soliton <soliton.de@gmail.com> 和 Thomas
       Baumhauer <thomas.baumhauer@gmail.com> 编辑。这个手册页最初由 Cyril Bouthors <cyril@bouthors.org> 编写。
       请访问官方主页：https://www.wesnoth.org/

版权
       版权所有 © 2003-2018 David White <davidnwhite@verizon.net>
       这是一款自由软件，使用由自由软件基金会发布的GPL版本2协议授权。使用本软件时*不*提供任何保证，甚至没有对“可销售性”和“针对某一特别目的之可用性”的保证。本段中文
       翻译不具有法律效力，只有GPL英文原本才具有法律效力。

参见
       wesnoth(6)

wesnothd                                                                        2018                                                                     WESNOTHD(6)
