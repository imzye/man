Test::HTTP::Server::Simple::StashWarnings(3pm)                                      User Contributed Perl Documentation                                      Test::HTTP::Server::Simple::StashWarnings(3pm)

NAME
       Test::HTTP::Server::Simple::StashWarnings - catch your forked server's warnings

SYNOPSIS
           package My::Webserver::Test;
           use base qw/Test::HTTP::Server::Simple::StashWarnings My::Webserver/;

           sub test_warning_path { "/__test_warnings" }

           package main;
           use Test::More tests => 42;

           my $s = My::WebServer::Test->new;

           my $url_root = $s->started_ok("start up my web server");

           my $mech = WWW::Mechanize->new;

           $mech->get("$url_root/some_action");

           $mech->get("/__test_warnings");
           my @warnings = My::WebServer::Test->decode_warnings($mech->content);
           is(@warnings, 0, "some_action gave no warnings");

DESCRIPTION
       Warnings are an important part of any application. Your web application should warn the user when something is amiss.

       Almost as importantly, we want to be able to test that the web application gracefully copes with bad input, the back button, and all other aspects of the user experience.

       Unfortunately, tests seldom cover what happens when things go poorly. Are you "sure" that your application checks authorization for that action? Are you "sure" it will tomorrow?

       This module lets you retrieve the warnings that your forked server throws. That way you can test that your application continues to throw warnings when it makes sense. Catching the warnings also
       keeps your test output tidy. Finally, you'll be able to see when your application throws new, unexpected warnings.

SETUP
       The way this module works is it catches warnings and makes them available on a special URL (which must be defined by you in the "test_warning_path" method).  You can use "WWW::Mechanize" (or
       whichever HTTP agent you prefer) to download the warnings. The warnings will be serialized. Use decode_warnings to get the list of warnings seen so far (since last request anyway).

       Warnings are encoded using Storable by default, but your subclass may override the "encode_warnings" and "decode_warnings" methods.

TIPS
       Setting the "TEST_VERBOSE" environment variable to a true value will cause warnings to be displayed immediately, even if they would be captured and tested later.

AUTHOR
       Shawn M Moore, "<sartak at bestpractical.com>"

BUGS
       Please report any bugs or feature requests to "bug-test-http-server-simple-stashwarnings at rt.cpan.org", or through the web interface at
       <http://rt.cpan.org/NoAuth/ReportBug.html?Queue=test-http-server-simple-stashwarnings>.

COPYRIGHT & LICENSE
       Copyright 2008 Best Practical Solutions.

       This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.

perl v5.34.0                                                                                     2022-06-17                                                  Test::HTTP::Server::Simple::StashWarnings(3pm)
