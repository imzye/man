
dune(1)                                                                      Dune Manual                                                                     dune(1)

NAME
       dune - composable build system for OCaml

SYNOPSIS
       dune COMMAND ...

DESCRIPTION
       Dune is a build system designed for OCaml projects only. It focuses on providing the user with a consistent experience and takes care of most of the
       low-level details of OCaml compilation. All you have to do is provide a description of your project and Dune will do the rest.

       The scheme it implements is inspired from the one used inside Jane Street and adapted to the open source world. It has matured over a long time and is used
       daily by hundreds of developers, which means that it is highly tested and productive.

COMMANDS
       build
           Build the given targets, or all installable targets if none are given.

       cache
           Manage the shared artifacts cache

       clean
           Clean the project.

       compute
           Compute internal function.

       exec
           Execute a command in a similar environment as if installation was performed.

       external-lib-deps
           Print out external libraries needed to build the given targets.

       format-dune-file
           Format dune files

       help
           Additional Dune help

       init
           Initialize dune components

       install
           Install packages.

       installed-libraries
           Print out libraries installed on the system.

       printenv
           Print the environment of a directory

       promote
           Promote files from the last run

       rules
           Dump internal rules.

       runtest
           Run tests.

       subst
           Substitute watermarks in source files.

       uninstall
           Uninstall packages.

       upgrade
           Upgrade jbuilder projects to dune

       utop
           Load library in utop

OPTIONS
       --build-info
           Show build information.

       -f, --force
           Force actions associated to aliases to be re-executed even if their dependencies haven't changed.

       --help[=FMT] (default=auto)
           Show this help in format FMT. The value FMT must be one of `auto', `pager', `groff' or `plain'. With `auto', the format is `pager` or `plain' whenever
           the TERM env var is `dumb' or undefined.

       --sandbox=VAL (absent DUNE_SANDBOX env)
           Sandboxing mode to use by default. Some actions require a certain sandboxing mode, so they will ignore this setting. The allowed values are: none,
           symlink, copy.

       --version
           Show version information.

       -w, --watch
           Instead of terminating build after completion, wait continuously for file changes.

COMMON OPTIONS
       These options are common to all commands.

       --always-show-command-line
           Always show the full command lines of programs executed by dune

       --auto-promote
           Automatically promote files. This is similar to running dune promote after the build.

       --build-dir=FILE (absent DUNE_BUILD_DIR env)
           Specified build directory. _build if unspecified

       --cache=VAL (absent DUNE_CACHE env)
           Activate binary cache

       --cache-check-probability=VAL (absent=0. or DUNE_CACHE_CHECK_PROBABILITY env)
           Probability cached rules are rerun to check for reproducibility

       --cache-duplication=VAL (absent DUNE_CACHE_DUPLICATION env)
           Binary cache duplication mode

       --cache-transport=VAL (absent DUNE_CACHE_TRANSPORT env)
           Binary cache protocol

       --config-file=FILE
           Load this configuration file instead of the default one.

       --debug-backtraces
           Always print exception backtraces.

       --debug-dependency-path
           In case of error, print the dependency path from the targets on the command line to the rule that failed.

       --debug-findlib
           Debug the findlib sub-system.

       --default-target=TARGET (absent=@@default)
           Set the default target that when none is specified to dune build.

       --diff-command=VAL
           Shell command to use to diff files. Use - to disable printing the diff.

       --disable-promotion (absent DUNE_DISABLE_PROMOTION env)
           Disable all promotion rules

       --display=MODE
           Control the display mode of Dune. See dune-config(5) for more details.

       --ignore-promoted-rules
           Ignore rules with (mode promote), except ones with (only ...). The variable %{ignoring_promoted_rules} in dune files reflects whether this option was
           passed or not.

       -j JOBS
           Run no more than JOBS commands simultaneously.

       --no-buffer
           Do not buffer the output of commands executed by dune. By default dune buffers the output of subcommands, in order to prevent interleaving when multiple
           commands are executed in parallel. However, this can be an issue when debugging long running tests. With --no-buffer, commands have direct access to the
           terminal. Note that as a result their output won't be captured in the log file. You should use this option in conjunction with -j 1, to avoid
           interleaving. Additionally you should use --verbose as well, to make sure that commands are printed before they are being executed.

       --no-config
           Do not load the configuration file

       --no-print-directory
           Suppress "Entering directory" messages

       --only-packages=PACKAGES
           Ignore stanzas referring to a package that is not in PACKAGES. PACKAGES is a comma-separated list of package names. Note that this has the same effect as
           deleting the relevant stanzas from dune files. It is mostly meant for releases. During development, it is likely that what you want instead is to build a
           particular <package>.install target.

       -p PACKAGES, --for-release-of-packages=PACKAGES
           Shorthand for --root . --only-packages PACKAGE --ignore-promoted-rules --no-config --profile release. You must use this option in your <package>.opam
           files, in order to build only what's necessary when your project contains multiple packages as well as getting reproducible builds.

       --profile=VAL (absent DUNE_PROFILE env)
           Select the build profile, for instance dev orrelease. The default is dev.

       --promote-install-files
           Promote the generated <package>.install files to the source tree

       --root=DIR
           Use this directory as workspace root instead of guessing it. Note that this option doesn't change the interpretation of targets given on the command
           line. It is only intended for scripts.

       --store-orig-source-dir (absent DUNE_STORE_ORIG_SOURCE_DIR env)
           Store original source location in dune-package metadata

       --terminal-persistence=MODE
            Changes how the log of build results are displayed to the console between rebuilds while in --watch mode.

       --trace-file=FILE
           Output trace data in catapult format (compatible with chrome://tracing)

       --verbose
           Same as --display verbose

       --workspace=FILE (absent DUNE_WORKSPACE env)
           Use this specific workspace file instead of looking it up.

       -x VAL
           Cross-compile using this toolchain.

MORE HELP
       Use `dune COMMAND --help' for help on a single command.

ENVIRONMENT
       These environment variables affect the execution of dune:

       DUNE_BUILD_DIR
           Specified build directory. _build if unspecified

       DUNE_CACHE
           Activate binary cache

       DUNE_CACHE_CHECK_PROBABILITY
           Probability cached rules are rerun to check for reproducibility

       DUNE_CACHE_DUPLICATION
           Binary cache duplication mode

       DUNE_CACHE_TRANSPORT
           Binary cache protocol

       DUNE_DISABLE_PROMOTION
           Disable all promotion rules

       DUNE_PROFILE
           Build profile. dev if unspecified or release if -p is set.

       DUNE_SANDBOX
           Sandboxing mode to use by default. (see --sandbox)

       DUNE_STORE_ORIG_SOURCE_DIR
           Store original source location in dune-package metadata

       DUNE_WORKSPACE
           Use this specific workspace file instead of looking it up.

BUGS
       Check bug reports at https://github.com/ocaml/dune/issues

Dune 2.1.3                                                                                                                                                   dune(1)
