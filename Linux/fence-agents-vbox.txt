
FENCE_AGENT(8)                                                                            System Manager's Manual                                                                            FENCE_AGENT(8)

NAME
       fence_vbox - Fence agent for VirtualBox

DESCRIPTION
       fence_vbox is a Power Fencing agent which can be used with the virtual machines managed by VirtualBox. It logs via ssh to a dom0 where it runs VBoxManage to do all of the work.

       By default, vbox needs to log in as a user that is a member of the vboxusers group. Also, you must allow ssh login in your sshd_config.

       The  fence agent accepts options on the command line as well as from stdin. Fenced sends parameters through stdin when it execs the agent. The agent can be run by itself with command line options.
       This is useful for testing and for turning outlets on or off from scripts.

       Vendor URL: https://www.virtualbox.org/

PARAMETERS

       -o, --action=[action]
              Fencing action (Default Value: reboot)

       -c, --command-prompt=[prompt]
              Force Python regex for command prompt (Default Value: ['\\[EXPECT\\]#'])

       -k, --identity-file=[filename]
              Identity file (private key) for SSH

       -4, --inet4-only
              Forces agent to use IPv4 addresses only

       -6, --inet6-only
              Forces agent to use IPv6 addresses only

       -a, --ip=[ip]
              IP address or hostname of fencing device This parameter is always required.

       -u, --ipport=[port]
              TCP/UDP port to use for connection with device (Default Value: 22)

       -p, --password=[password]
              Login password or passphrase

       -S, --password-script=[script]
              Script to run to retrieve password

       -n, --plug=[id]
              Physical plug number on device, UUID or identification of machine This parameter is always required.

       -x, --ssh
              Use SSH connection (Default Value: 1)

       --ssh-options=[options]
              SSH options to use (Default Value: -t '/bin/bash -c "PS1=\\[EXPECT\\]# HISTFILE=/dev/null /bin/bash --noprofile --norc"')

       -l, --username=[name]
              Login name This parameter is always required.

       -q, --quiet
              Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       -v, --verbose
              Verbose mode. Multiple -v flags can be stacked on the command line (e.g., -vvv) to increase verbosity.

       --verbose-level
              Level of debugging detail in output. Defaults to the number of --verbose flags specified on the command line, or to 1 if verbose=1 in a stonith device configuration (i.e., on stdin).

       -D, --debug-file=[debugfile]
              Write debug information to given file

       -V, --version
              Display version information and exit

       -h, --help
              Display help and exit

       --plug-separator=[char]
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       -C, --separator=[char]
              Separator for CSV created by 'list' operation (Default Value: ,)

       --delay=[seconds]
              Wait X seconds before fencing is started (Default Value: 0)

       --disable-timeout=[true/false]
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       --host-os=[os]
              Operating system of the host (linux|macos|windows) (Default Value: linux)

       --login-timeout=[seconds]
              Wait X seconds for cmd prompt after login (Default Value: 5)

       --missing-as-off
              Missing port returns OFF instead of failure

       --power-timeout=[seconds]
              Test X seconds for status change after ON/OFF (Default Value: 20)

       --power-wait=[seconds]
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       --shell-timeout=[seconds]
              Wait X seconds for cmd prompt after issuing command (Default Value: 3)

       --stonith-status-sleep=[seconds]
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       --vboxmanage-path=[path]
              Path to VBoxManage on the host (Default Value: VBoxManage)

       --retry-on=[attempts]
              Count of attempts to retry power on (Default Value: 1)

       --use-sudo
              Use sudo (without password) when calling 3rd party software

       --ssh-path=[path]
              Path to ssh binary (Default Value: /usr/bin/ssh)

       --sudo-path=[path]
              Path to sudo binary (Default Value: /usr/bin/sudo)

ACTIONS

       on     Power on machine.

       off    Power off machine.

       reboot Reboot machine.

       status This returns the status of the plug/virtual machine.

       list   List available plugs with aliases/virtual machines if there is support for more then one device. Returns N/A otherwise.

       list-status
              List available plugs with aliases/virtual machines and their power state if it can be obtained without additional commands.

       monitor
              Check the health of fence device

       metadata
              Display the XML metadata describing this resource.

       manpage
               The operational behavior of this is not known.

       validate-all
              Validate if all required parameters are entered.

STDIN PARAMETERS

       action Fencing action (Default Value: reboot)

       command_prompt
              Force Python regex for command prompt (Default Value: ['\\[EXPECT\\]#']) Obsoletes: cmd_prompt

       identity_file
              Identity file (private key) for SSH

       inet4_only
              Forces agent to use IPv4 addresses only

       inet6_only
              Forces agent to use IPv6 addresses only

       ip     IP address or hostname of fencing device This parameter is always required. Obsoletes: ipaddr

       ipport TCP/UDP port to use for connection with device (Default Value: 22)

       password
              Login password or passphrase Obsoletes: passwd

       password_script
              Script to run to retrieve password Obsoletes: passwd_script

       plug   Physical plug number on device, UUID or identification of machine This parameter is always required. Obsoletes: port

       ssh    Use SSH connection (Default Value: 1) Obsoletes: secure

       ssh_options
              SSH options to use (Default Value: -t '/bin/bash -c "PS1=\\[EXPECT\\]# HISTFILE=/dev/null /bin/bash --noprofile --norc"')

       username
              Login name This parameter is always required. Obsoletes: login

       quiet  Disable logging to stderr. Does not affect --verbose or --debug-file or logging to syslog.

       verbose
              Verbose mode. Multiple -v flags can be stacked on the command line (e.g., -vvv) to increase verbosity.

       verbose_level
              Level of debugging detail in output. Defaults to the number of --verbose flags specified on the command line, or to 1 if verbose=1 in a stonith device configuration (i.e., on stdin).

       debug_file
              Write debug information to given file Obsoletes: debug

       version
              Display version information and exit

       help   Display help and exit

       plug_separator
              Separator for plug parameter when specifying more than 1 plug (Default Value: ,)

       separator
              Separator for CSV created by 'list' operation (Default Value: ,)

       delay  Wait X seconds before fencing is started (Default Value: 0)

       disable_timeout
              Disable timeout (true/false) (default: true when run from Pacemaker 2.0+)

       host_os
              Operating system of the host (linux|macos|windows) (Default Value: linux)

       login_timeout
              Wait X seconds for cmd prompt after login (Default Value: 5)

       missing_as_off
              Missing port returns OFF instead of failure

       power_timeout
              Test X seconds for status change after ON/OFF (Default Value: 20)

       power_wait
              Wait X seconds after issuing ON/OFF (Default Value: 0)

       shell_timeout
              Wait X seconds for cmd prompt after issuing command (Default Value: 3)

       stonith_status_sleep
              Sleep X seconds between status calls during a STONITH action (Default Value: 1)

       vboxmanage_path
              Path to VBoxManage on the host (Default Value: VBoxManage)

       retry_on
              Count of attempts to retry power on (Default Value: 1)

       use_sudo
              Use sudo (without password) when calling 3rd party software Obsoletes: sudo

       ssh_path
              Path to ssh binary (Default Value: /usr/bin/ssh)

       sudo_path
              Path to sudo binary (Default Value: /usr/bin/sudo)

fence_vbox (Fence Agent)                                                                         2009-10-20                                                                                  FENCE_AGENT(8)
