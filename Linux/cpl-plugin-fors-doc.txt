FORS_NORMALISE_FLAT(7)                                                                       fors recipes                                                                       FORS_NORMALISE_FLAT(7)

NAME
       fors_normalise_flat - Normalise master flat spectrum

SYNOPSIS
       esorex fors_normalise_flat [OPTIONS] FILE.sof

DESCRIPTION
       This  recipe is used to normalise a master flat field frame dividing it by its large scale illumination trend. This recipe can be applied both to generic multi-slit (MOS/MXU) and to long slit
       exposures (either LSS, or LSS-like MOS/MXU), even if different normalisation methods are applied in such different cases. The input master flat field  image  is  the  product  of  the  recipe
       fors_flat. The input spectral curvature table, product of the recipe fors_detect_spectra, is only required in the case of multi-slit data.

       In  the case of multi-slit data, the flat field spectra are spatially rectified, heavily smoothed, and then mapped back on the CCD. Then the master flat image is divided by its smoothed coun‐
       terpart. The smoothing may be obtained either by applying a running median filter of specified sizes, or by polynomial fitting along the dispersion direction performed independently for  each
       row of the spatially remapped spectra.

       In  the case of long-slit data, the smoothing can still be obtained either by applying a running median filter or by polynomial fitting, but the polynomial fitting will be performed along the
       spatial direction, for each column of the spectrum.

       In the table below the MXU acronym can be alternatively read as MOS or LSS.

       Input files:

         DO category:               Type:       Explanation:         Required:
         MASTER_SCREEN_FLAT_MXU     Calib       Master flat frame       Y
         DISP_COEFF_MXU             Calib       Wavelength calibration  Y
         CURV_COEFF_MXU             Calib       Spectral curvature      .

         SLIT_LOCATION_MXU          Calib       Slit detection          .

         GRISM_TABLE                Calib       Grism table             Y

       Output files:

         DO category:               Data type:  Explanation:
         MASTER_NORM_FLAT_MXU       FITS image  Normalised flat field

OPTIONS
       --dispersion <float>
              Expected spectral dispersion (Angstrom/pixel) (float; default: 0.0). The full name of this option for the EsoRex configuration file is  fors.fors_normalise_flat.dispersion  [default  =
              0.0].

       --startwavelength <float>
              Start  wavelength  in  spectral  extraction (float; default: 0.0). The full name of this option for the EsoRex configuration file is fors.fors_normalise_flat.startwavelength [default =
              0.0].

       --endwavelength <float>
              End wavelength in spectral extraction (float; default: 0.0). The full name of this option for the EsoRex configuration file is fors.fors_normalise_flat.endwavelength [default = 0.0].

       --spa_polydegree <int>
              Polynomial degree for the flat field fitting along spatial direction (int;  default:  -1).  The  full  name  of  this  option  for  the  EsoRex  configuration  file  is  fors.fors_nor‐
              malise_flat.spa_polydegree [default = -1].

       --sradius <int>
              Smooth box radius for flat field along spatial direction (int; default: 10). The full name of this option for the EsoRex configuration file is fors.fors_normalise_flat.sradius [default
              = 10].

       --disp_nknots <int>
              Number  of  knots  in  flat  field  fitting  splines  along  dispersion  direction  (int; default: -1). The full name of this option for the EsoRex configuration file is fors.fors_nor‐
              malise_flat.disp_nknots [default = -1].

       --dradius <int>
              Smooth box radius (median) for flat field along dispersion direction (int; default: 10). The full name of this option for the EsoRex configuration file is fors.fors_normalise_flat.dra‐
              dius [default = 10].

       --dradius_aver <int>
              Smooth box radius (average) for flat field along dispersion direction (performed after median smoothing) (int; default: 10). The full name of this option for the  EsoRex  configuration
              file is fors.fors_normalise_flat.dradius_aver [default = 10].

       --splfit_threshold <float>
              Threshold  percentage  for  flat  spline  fittingwith  respect  to  the maximum (float; default: 0.01). The full name of this option for the EsoRex configuration file is fors.fors_nor‐
              malise_flat.splfit_threshold [default = 0.01].

       Note that it is possible to create a configuration file containing these options, along with suitable default values. Please refer to the details provided by the 'esorex --help' command.

SEE ALSO
       The full documentation for the fors pipeline can be downloaded as a PDF file using the following URL:

              ftp://ftp.eso.org/pub/dfs/pipelines/fors/fors-pipeline-manual-4.9.pdf

       An overview over the existing ESO pipelines can be found on the web page https://www.eso.org/sci/software/pipelines/.

       Basic documentation about the EsoRex program can be found at the esorex (1) man page.

       It is possible to call the pipelines from python using the python-cpl package.  See https://packages.python.org/python-cpl/index.html for further information.

       The other recipes of the fors pipeline are fors_align_sky(7), fors_align_sky_lss(7), fors_bias(7), fors_calib(7), fors_config(7), fors_dark(7), fors_detect_objects(7), fors_detect_spectra(7),
       fors_extract(7), fors_extract_objects(7), fors_extract_slits(7), fors_flatfield(7), fors_img_science(7), fors_img_screen_flat(7), fors_img_sky_flat(7), fors_photometry(7), fors_pmos_calib(7),
       fors_pmos_extract(7), fors_pmos_science(7),  fors_remove_bias(7),  fors_resample(7),  fors_science(7),  fors_spec_mflat(7),  fors_subtract_sky(7),  fors_subtract_sky_lss(7),  fors_sumflux(7),
       fors_trace_flat(7), fors_wave_calib(7), fors_wave_calib_lss(7), fors_zeropoint(7)

VERSION
       fors_normalise_flat 5.5.7

AUTHOR
       Carlo Izzo <usd-help@eso.org>

BUG REPORTS
       Please report any problems to usd-help@eso.org. Alternatively, you may send a report to the ESO User Support Department <usd-help@eso.org>.

LICENSE
       This file is currently part of the FORS Instrument Pipeline Copyright (C) 2002-2010 European Southern Observatory

       This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the
       License, or (at your option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
       General Public License for more details.

       You  should  have  received  a  copy  of  the  GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
       02110-1301  USA

fors_normalise_flat                                                                              5.5.7                                                                          FORS_NORMALISE_FLAT(7)
