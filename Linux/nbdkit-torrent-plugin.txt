nbdkit-torrent-plugin(1)                                                                             NBDKIT                                                                            nbdkit-torrent-plugin(1)

NAME
       nbdkit-torrent-plugin - serve a BitTorrent file or magnet link over NBD

SYNOPSIS
        nbdkit torrent FILE.torrent|'magnet:?xt=urn:...'
                       [file=DISK.iso] [cache=DIR] ...

DESCRIPTION
       "nbdkit-torrent-plugin" is an nbdkit(1) plugin which lets you serve a single file from within a torrent read-only over NBD.  The torrent to download can be a local FILE.torrent file, or a magnet link.

       A single torrent contains a collection of files, and by default this plugin serves the largest file within the torrent.  For operating system installers this is usually the large ISO file and ignores
       other small files like READMEs.  You can also select a particular file by name to serve.

       If you want to turn a file hosted on a web server into an NBD export use nbdkit-curl-plugin(1) instead.  If you have a local ISO you can simply serve it using nbdkit-file-plugin(1).  If you want to
       turn a local directory into an ISO use nbdkit-iso-plugin(1).

NOTES
       This plugin implements a full-featured BitTorrent client.  BitTorrent clients form a peer-to-peer (p2p) network and upload the file to other clients as well as downloading.

       By default the plugin will cache the downloaded torrent into $TMPDIR, potentially consuming a lot of disk space.  See the "cache=DIR" parameter for how to control this.

       By default the plugin will consume all available network bandwidth in both download and upload directions.  To limit it, set "download-rate-limit" and "upload-rate-limit" appropriately.

EXAMPLES
   Boot the Fedora installer
       Choose the right URL from https://torrent.fedoraproject.org/:

        url=https://torrent.fedoraproject.org/torrents/Fedora-Server-dvd-x86_64-32.torrent
        wget $url
        nbdkit -U - torrent Fedora-Server-*.torrent \
               --run 'qemu-system-x86_64 -m 2048 -cdrom $nbd -boot d'

   Boot the Debian installer
       Choose the right URL from https://www.debian.org/CD/torrent-cd/:

        url=https://cdimage.debian.org/debian-cd/current/amd64/bt-dvd/debian-10.4.0-amd64-DVD-1.iso.torrent
        wget $url
        nbdkit -U - torrent debian-*.torrent \
               --run 'qemu-system-x86_64 -m 2048 -cdrom $nbd -boot d'

PARAMETERS
       cache=DIR
           Set a directory which will be used to store the partially downloaded torrent between runs.

           This parameter is optional.  If not given then the plugin will create a randomly named temporary directory under $TMPDIR, and will attempt to ensure it is cleaned up on exit (thus unless you set
           "cache", no state is saved between runs and the whole torrent must be downloaded each time).

       connections-limit=N
           Set limit on number of connections to other peers that this client will open (default 200).

       download-rate-limit=BITS_PER_SEC
           Set the download rate limit in bits per second.  Usual abbreviations can be used such as "download-rate-limit=1M" for 1 megabit per second.  0 means unlimited, which is the default.

       file=DISK.iso
           Select the file from within the torrent to serve.

           This parameter is optional.  If not specified then the plugin searches the torrent for the largest file and serves that.  This is usually the right thing to do for operating system installers and
           similar because it serves the large .iso file and ignores other files like READMEs.

           The parameter is actually a path relative to the root directory of the torrent, so if the torrent contains subdirectories you may need to use a path like "file=SUBDIR/DISK".  To list all the files
           within the torrent try running:

            $ nbdkit -fv -U - torrent file.torrent

           and examining the debug output.  As an alternative you can use standard BitTorrent tools, eg:

            $ transmission-show file.torrent

       listen-interfaces=IP_ADDRESS:PORT[,IP_ADDRESS:PORT[,...]]
           Listening ports that are opened for accepting incoming connections.  The parameter is a comma-separated list of "IP-address:port".

       outgoing-interfaces=IP_ADDRESS[,IP_ADDRESS[,...]]
           Controls which IP address outgoing TCP connections are bound to.  The parameter is a comma-separated list of IP addresses.

       [torrent=]FILE.torrent
           Specify a local torrent file.

       [torrent=]magnet:?xt=urn:...
           Specify a magnet link.

           "torrent=" is a magic config key and may be omitted in most cases.  See "Magic parameters" in nbdkit(1).

       upload-rate-limit=BITS_PER_SEC
           Set the upload rate limit in bits per second.  Usual abbreviations can be used such as "upload-rate-limit=1M" for 1 megabit per second.  0 means unlimited, which is the default.

       user-agent=STRING
           Set the user-agent.  The recommended format is "client-name/client-version".

ENVIRONMENT VARIABLES
       "TMPDIR"
           This directory is used to cache the downloaded torrent file (or /var/tmp if not set).  See also the "cache=DIR" parameter above.

FILES
       $plugindir/nbdkit-torrent-plugin.so
           The plugin.

           Use "nbdkit --dump-config" to find the location of $plugindir.

VERSION
       "nbdkit-torrent-plugin" first appeared in nbdkit 1.22.

SEE ALSO
       nbdkit(1), nbdkit-plugin(3), nbdkit-curl-plugin(1), nbdkit-file-plugin(1), nbdkit-iso-plugin(1), nbdkit-readahead-filter(1), transmission-show(1), https://en.wikipedia.org/wiki/BitTorrent,
       http://libtorrent.org/.

AUTHORS
       Richard W.M. Jones

COPYRIGHT
       Copyright (C) 2020 Red Hat Inc.

LICENSE
       Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the
           distribution.

       •   Neither the name of Red Hat nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
       PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
       TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
       (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

nbdkit-1.28.4                                                                                      2022-01-04                                                                          nbdkit-torrent-plugin(1)
