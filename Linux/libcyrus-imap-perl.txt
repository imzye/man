IMAP(3pm)                                                                           User Contributed Perl Documentation                                                                           IMAP(3pm)

NAME
       Cyrus::IMAP - Interface to Cyrus imclient library

SYNOPSIS
         use Cyrus::IMAP;

         my $client = Cyrus::IMAP->new('mailhost'[, $flags]);
         $flags = Cyrus::IMAP::CONN_NONSYNCLITERAL;

         ($server, $mailbox) = Cyrus::IMAP->fromURL($url);
         $url = Cyrus::IMAP->toURL($server, $mailbox);

         $client->setflags($flags);
         $client->clearflags(Cyrus::IMAP::CONN_INITIALRESPONSE);
         $flags = $client->flags;
         $server = $client->servername;
         $client->authenticate;
         $flags = Cyrus::IMAP::CALLBACK_NUMBERED || Cyrus::IMAP::CALLBACK_NOLITERAL;
         $client->addcallback({-trigger => $str, -flags => $flags,
                               -callback => \&cb, -rock => \$var}, ...);
         $client->send(\&callback, \&cbdata, $format, ...);
         $client->processoneevent;
         ($result, $text) = $client->send(undef, undef, $format, ...);
         ($fd, $writepending) = $client->getselectinfo;

DESCRIPTION
       The Cyrus::IMAP module provides an interface to the Cyrus imclient library.  These are primarily useful for implementing cyradm operations within a Perl script; there are easier ways to implement
       general client operations, although they may be more limited in terms of authentication options when talking to a Cyrus imapd.

       In the normal case, one will attach to a Cyrus server and authenticate using the best available method:

               my $client = Cyrus::IMAP::new('imap');
               $client->authenticate;
               if (!$client->send('', '', 'CREATE %s', 'user.' . $username)) {
                 warn "createmailbox user.$username: $@";
               }

       In simple mode as used above, send() is invoked with "undef", 0, or '' for the callback and rock (callback data) arguments; it returns a list of "($result, $text)" from the command.  If invoked in
       scalar context, it returns $result and places $text in $@.  In this mode, there is no need to use processoneevent().  If more control is desired, use the callback and rock arguments and invoke
       processoneevent() regularly to receive results from the IMAP server.  If still more control is needed, the getselectinfo() method returns a list containing a file descriptor (not Perl filehandle)
       which can be passed to select(); if the second element of the list is true, you should include it in the write mask as well as the read mask because the imclient library needs to perform queued
       output.

       For more information, consult the Cyrus documentation.

NOTES
       send() behaves as if the "Cyrus::IMAP::CONN_NONSYNCLITERAL" flag is always set.  This is because it is a wrapper for the C version, which cannot be made directly available from Perl, and
       synchronous literals require interaction with the IMAP server while parsing the format string.  This is planned to be fixed in the future.

       The 'LOGIN' mechanism can be used to authenticate with a plaintext username and password.  This is intended as a workaround for a bug in early SASL implementations; use of Cyrus::IMAP with non-
       Cyrus servers is not recommended, primarily because there are easier ways to implement IMAP client functionality in Perl.  (However, if you need SASL support, "Cyrus::IMAP" is currently the only
       way to get it.)

       The file descriptor returned by getselectinfo() should not be used for anything other than select().  In particular, I/O on the file descriptor will almost certainly cause more problems than
       whatever problem you think you are trying to solve.

       The toURL and fromURL routines are to ease conversion between URLs and IMAP mailbox and server combinations, and are a simple frontend for the libcyrus functions of the same name.

       The imparse library routines are not implemented, because they are little more than a (failed) attempt to make parsing as simple in C as it is in Perl.

       This module exists primarily so we can integrate Cyrus administration into our Perl-based account management system, and secondarily so that we can rewrite cyradm in a sensible language instead of
       Tcl.  Usability for other purposes is not guaranteed.

AUTHORs
       Brandon S. Allbery <allbery@ece.cmu.edu>, Rob Siemborski <rjs3+@andrew.cmu.edu>

SEE ALSO
       Cyrus::IMAP::Admin perl(1), cyradm(1), imclient(3), imapd(8).

perl v5.40.1                                                                                     2025-08-15                                                                                       IMAP(3pm)
