
ethcaptureall(8)                                                                             EFSFFCLIRG (Man Page)                                                                             ethcaptureall(8)

NAME
       ethcaptureall

       Captures supporting information for a problem report from all hosts and uploads to this system.

       When  a  host  ethcaptureall  is performed, ethcapture is run to create the specified capture file within ~root on each host (with the .tgz suffix added as needed). The files are uploaded and unpacked
       into a matching directory name within upload_dir/hostname/ on the local system. The default file name is hostcapture.

       The uploaded captures are combined into a .tgz file with the file name specified and the suffix .all.tgz added.

Syntax
       ethcaptureall [-p] [-f  hostfile] [-h 'hosts'] [-d  upload_dir]

       [-D  detail_level] [ file]

Options
       --help

                 Produces full help text.

       -p

                 Performs capture upload in parallel on all hosts.

       -f hostfile

                 Specifies the file with hosts in cluster. Default is /etc/eth-tools/hosts file.

       -h hosts

                 Specifies the list of hosts on which to perform a capture.

       -d upload_dir

                 Specifies the directory to upload to. Default is uploads. If not specified, the environment variable UPLOADS_DIR is used.

       -D detail_level

                 Specifies the level of detail of the capture passed to host ethcapture.

                 1 (Local) Obtains local information from each host.

                 2 (Fabric)
                           In addition to Local, also obtains basic fabric information by queries to the fabric and fabric error analysis using ethreport.

                 3 (Analysis)
                           In addition to Fabric, also obtains ethallanalysis results. If ethallanalysis has not yet been run, it is run as part of the capture.

       NOTE: Detail levels 2-3 can be used when fabric operational problems occur. If the problem is node-specific, detail level 1 should be sufficient. Detail levels 2-3 require an operational fabric. Typi‐
       cally, your support representative requests a given detail level. If a given detail level takes excessively long or fails to be gathered, try a lower detail level.For detail levels 2-3, the additional
       information is only gathered on the node running the ethcaptureall command.

       file

                 Specifies the name for capture file. The suffix .tgz is appended if it is not specified in the name.

Examples
       ethcaptureall

       # Creates a hostcapture directory in upload_dir/hostname/ for each host
       in /etc/eth-tools/hosts file, then creates hostcapture.all.tgz.

       ethcaptureall mycapture

       # Creates a mycapture directory in upload_dir/hostname/ for each host
       in /etc/eth-tools/hosts file, then creates mycapture.all.tgz.

       ethcaptureall -h 'arwen elrond' 030127capture

       # Gets the list of hosts from arwen elrond file and creates
       030127capture.tgz file.

Environment Variables
       The following environment variables are also used by this command:

       HOSTS

                 List of hosts, used if -h option not supplied.

       HOSTS_FILE

                 File containing a list of hosts, used in the absence of -f and -h.

       UPLOADS_DIR

                 Directory to upload to, used in the absence of -d.

       FF_MAX_PARALLEL

                 When -p option is used, maximum concurrent operations are performed.

More Information
       When performing ethcaptureall against hosts, internally SSH is used. The command ethcaptureall requires that password-less SSH be set up between the host running Intel(R) Ethernet Fabric  Suite  Fast‐
       Fabric Toolset and the hosts ethcaptureall is operating against. The ethsetupssh command can aid in setting up password-less SSH.

       NOTE:  The  resulting host capture files can require significant amounts of space on the Intel(R) Ethernet Fabric Suite FastFabric Toolset host. Actual size varies, but sizes can be multiple megabytes
       per host. Intel recommends that you ensure adequate space is available on the Intel(R) Ethernet Fabric Suite FastFabric Toolset system. In many cases, it may not  be  necessary  to  run  ethcaptureall
       against all hosts; instead, a representative subset may be sufficient. Consult with your support representative for further information.

Copyright(C) 2020                                                                              Intel Corporation                                                                               ethcaptureall(8)
