APT-SRC(1p)                                                                       User Contributed Perl Documentation                                                                      APT-SRC(1p)

NAME
       apt-src - manage debian source package trees

SYNOPSIS
       apt-src [options] command

       apt-src [options] install|remove pkg1 [pkg2 ...]

       apt-src location pkg

DESCRIPTION
       apt-src is a command line interface for downloading, installing, upgrading, and tracking debian source packages. It can be run as a normal user, or as root.

       Unlike binary packages, source packages are not installed into a canonical location. Instead, they are "installed" by unpacking their source tree into a directory, which can be anywhere you
       wish. A source package can be installed multiple times, in different locations. This program manages source packages installed in this way, and provides querying facilities to help find where
       a source package is installed.

       Unless the -h or --help option is given one of the commands below must be present.

       update
           Update the lists of available packages. Identical to apt-get update, really, and must be run as root in the default configuration.

       install
           Install the named source package or packages into the current directory.  If a package in the current directory is already installed, it will attempt to upgrade it.

           This  command  will  accept the names of binary packages, or source packages.  Just like with apt-get install, you can prefix the name with =version or /release to specify what version to
           install or what release to take the source from.

           It will make sure that the build-dependencies of the source package are satisfied.

           If the --location option is given, the source package will be installed or upgraded into the given location instead of the current directory.

           If the --build option is given, each newly installed or upgraded package will be compiled.

       upgrade
           Upgrade all installed source packages, or, if the --location or --here options are used, update only source packages in the specified directory.

           If the --patch option is given (the default), apt-src will attempt to generate a patch containing any local changes made to the source package, and will apply this patch  to  the  updated
           tree. This will allow your local changes to be preserved across package upgrades, but it may not always work, and you might sometimes have to merge in your changes by hand.

           If the --build option is given, each newly installed or upgraded package will be compiled.

       remove
           Remove the named source package or packages. The --location and --here options may be used to only remove packages in a particular directory.

       build
           Build the specified source or sources. If the source is not installed yet, it will first be installed.

       clean
           Clean the trees of the named source package or packages. The --location and --here options may be used to only clean packages in a particular directory.

       import
           Use  this  option  to  let apt-src know about an existing, unpacked source tree. Besides the name under which it should be imported, you must specify the location of the source tree (with
           --location), and you may need to tell the version of the source (with --version). Don't expect the build command to work on this source, unless it has a debian/ directory.

       list
           With no other parameters, it will list all installed source packages; their status, and the directory they are installed in. If a package's name is given, it will display  only  installed
           instances of that source package. If the --location or --here options are used, they will limit the list to packages in the specified directory.

       location
           Takes a single parameter; the name of a source package. If the package is installed, it will return the root of the package's source tree.

           This command can be used when you need to include files from another source package, or something like that. For example:

            -I`apt-src location pkg`

       version
           Takes a single parameter; the name of a source package. If the package is installed, it will return the version of the package that is installed.

       name
           Takes a single parameter; the name of a source package (may be specified with regexps). Returns the name of the source package installed matching that name, if any.

OPTIONS
       All  command  line options may be set using the configuration file, the descriptions indicate the configuration option to set.  For boolean options you can override the defaults file by using
       something like -f-,--no-f, -f=no or several other variations.

       -h, --help
           Show this help text.

       -b, --build, --compile
           Build source packages after installing or upgrading them.  Configuration Item: APT::Src::Compile.

       -i, --installdebs
           Install packages after building sources. Implies --build.  Configuration Item: APT::Src::InstallDebs

           Note that if multiple packages are generated from a single source package, they will all be installed.

       -p, --patch
           Try to patch local changes into new source tree when upgrading. On by default, use --no-p to disable.  Configuration Item: APT::Src::Patch.

       -l, --location
           Specify a directory; only operate on packages in that directory.  Configuration Item: APT::Src::Location.

       -c, --cwd, --here
           Only operate on packages in the current directory.  Configuration Item: APT::Src::Here.

       --upstream-version
           Only of use with the version command; makes it omit the debian version number from the version of the package output.

       -k, --keep-built
           Do not delete .debs and other built files after installing them with the --installdebs option.  Configuration Item: APT::Src::KeepBuilt

       -n, --no-delete-source
           Do not delete source files when removing source package.  Configuration Item: APT::Src:NoDeleteSource

       --version
           Specify a source tree version. Of use with the import command.

       -q, --quiet
           Direct all command output to /dev/null unless a command fails to run as expected. Configuration item: APT::Src::Quiet

       -t, --trace
           Output each command as it is run. Configuration item: APT::Src::Trace

       In addition to the above options, some less-used configuration items may only be specified in the config files, /etc/apt/apt.conf and ~/.apt-src/config.  They are:

       APT::Src::BuildCommand
           The command to use to build a tree. Run in the tree to build, it defaults to "dpkg-buildpackage -b -us -uc", with "-rfakeroot" appended for non-root users.

       APT::Src::RootCommand
           The command to use if a non-root user needs to become root. This is used for, example, to satisfy build-deps. sudo is a good choice and the default.  If you want to use su, you'll need to
           set it to "su -c".

       APT::Src::BuildDeps
           Controls whether apt-src makes sure a source package's build dependencies are installed when installing or upgrading it. Defaults to true, if you turn it off, packages may fail  to  build
           due to missing build dependencies.

NOTE ON NAMES
       You can use either binary package names, or source package names when installing a new source package.

       The  rest  of the time, when dealing with already installed packages, you currently have to use the source package names (this may later changes).  However, you may use regexps as part of the
       names.

ENVIRONMENT
       This program sets APT_SRC_BUILD when it is building a package.

EXAMPLES
       To install the source to pine to /usr/src, build it, and install the resulting debs:

         apt-src install --location=/usr/src -i pine

       To track changes to said installed pine source package, and install debs whenever a new version comes out:

         apt-src install -i pine

       To install a local copy of package foo, which you are going to apply a local patch to:

         apt-src install foo
         cd foo-version
         patch <~/my-foo-patch
         apt-src build --installdebs foo

       To upgrade your local copy of foo, bringing your patch forward, and building and installing new debs:

         apt-src install -i foo

       To import the source tree in /usr/src/linux, which you unpacked from a ftp.kernel.org tarball (or from the kernel-source package) into apt-src, so it knows about it:

         apt-src import kernel --location=/usr/src/linux --version=2.4.18

       In a debian/rules of a kernel module package that needs to figure out if it is being built by apt-src, and if so set the KVERS, KSRC. and KDREV variables that make-kpkg normally sets:

         ifdef APT_SRC_BUILD
         KDREV=$(shell apt-src version kernel\(-source.\*\)\?)
         KSRC=$(shell apt-src location kernel\(-source.\*\)\?)
         KVERS=$(shell apt-src name kernel\(-source.\*\)\? | sed s/kernel-source-//)
         endif

FILES
       /etc/apt/sources.list
           Locations to fetch packages from.

       ~/.apt-src/status
           apt-src's status file, lists installed packages.

       /etc/apt/apt.conf
           Global config file for apt-src (and apt).

       ~/.apt-src/config
           Per-user config file for apt-src.

SEE ALSO
       apt-get(8), sources.list(5), dpkg-source(1)

AUTHOR
       Copyright 2002 Joey Hess <joeyh@debian.org>

       This is free software; see the GNU General Public Licence version 2 or later for copying conditions. There is NO warranty.

perl v5.32.0                                                                                  2021-01-10                                                                                   APT-SRC(1p)
