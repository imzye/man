POE::Component::Client::Ident::Agent(3pm)                                           User Contributed Perl Documentation                                           POE::Component::Client::Ident::Agent(3pm)

NAME
       POE::Component::Client::Ident::Agent - A component to provide a one-shot non-blocking Ident query.

SYNOPSIS
         use POE::Component::Client::Ident::Agent;

         my $poco = POE::Component::Client::Ident::Agent->spawn(
               PeerAddr => "192.168.1.12", # Originating IP Address
               PeerPort => 12345,          # Originating port
               SockAddr => "192.168.2.24", # Local IP address
               SockPort => 69,             # Local Port
               Socket   => $socket_handle, # Or pass in a socket handle
               IdentPort => 113,           # Port to send queries to on originator
                                           # Default shown
               BuggyIdentd => 0,           # Dealing with an Identd that isn't
                                           # RFC compatible. Default is 0.
               TimeOut => 30,              # Adjust the timeout period.
               Reference => $scalar        # Give the component a reference
         );

         sub _child {
          my ($action,$child,$reference) = @_[ARG0,ARG1,ARG2];

          if ( $action eq 'create' ) {
            # Stuff
          }
         }

         sub ident_agent_reply {
         }

         sub ident_agent_error {
         }

DESCRIPTION
       POE::Component::Client::Ident::Agent is a POE component that provides a single "one shot" look up of a username on the remote side of a TCP connection to other components and sessions, using the
       ident (auth/tap) protocol.  The Ident protocol is described in RFC 1413 <http://www.faqs.org/rfcs/rfc1413.html>.

       The component implements a single ident request. Your session spawns the component, passing the relevant arguments and at some future point will receive either a 'ident_agent_reply' or
       'ident_agent_error', depending on the outcome of the query.

       If you are looking for a robust method of managing Ident::Agent sessions then please consult the documentation for POE::Component::Client::Ident, which takes care of Agent management for you.

CONSTRUCTOR
       "spawn"
           Takes either the arguments:

             "PeerAddr", the remote IP address where a TCP connection has originated;
             "PeerPort", the port where the TCP has originated from;
             "SockAddr", the address of our end of the connection;
             "SockPort", the port of our end of the connection;

           OR:

             "Socket", the socket handle of the connection, the component will work out all the
             details for you. If Socket is defined, it will override the settings of the other arguments,
             except for:

             "IdentPort", which is the port on the remote host where we send our ident queries.
             This is optional, defaults to 113.

           You may also specify BuggyIdentd to 1, to support Identd that doesn't terminate lines as per the RFC.

           You may also specify TimeOut between 5 and 30, to have a shorter timeout in seconds on waiting for a response from the Identd. Default is 30 seconds.

           Optionally, you can specify Reference, which is anything that'll fit in a scalar. This will get passed back as part of the response. See below.

           Returns an POE::Component::Client::Ident::Agent object, which has the following methods.

METHODS
       "session_id"
           Returns the POE session ID of the component.

       "shutdown"
           Terminates the component.

OUTPUT
       All  the events returned by the component have a hashref as ARG0. This hashref contains the arguments that were passed to the component. If a socket handle was passed, the hashref will contain the
       appropriate PeerAddr, PeerPort, SockAddr and SockPort. If the component was spawned with a Reference parameter, this will be passed back as a key of the hashref.

       The following events are sent to the calling session by the component:

       "ident_agent_reply"
           Returned when the component receives a USERID response from the identd. ARG0 is hashref, ARG1 is the opsys field and ARG2 is the userid or something else depending on whether the  opsys  field
           is set to 'OTHER' ( Don't blame me, read the RFC ).

       "ident_agent_error"
           Returned  when  the component receives an ERROR response from the identd, there was some sort of communication error with the remote host ( ie. no identd running ) or it had some other problem
           with making the connection to the other host. No matter. ARG0 is hashref, ARG1 is the type of error.

AUTHOR
       Chris Williams, <chris@bingosnet.co.uk<gt>

LICENSE
       Copyright Â© Chris Williams.

       This module may be used, modified, and distributed under the same terms as Perl itself. Please see the license that came with your Perl distribution for details.

SEE ALSO
       RFC 1413 <http://www.faqs.org/rfcs/rfc1413.html>

       POE::Session

       POE::Component::Client::Ident

perl v5.36.0                                                                                     2022-12-04                                                       POE::Component::Client::Ident::Agent(3pm)
