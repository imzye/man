MOUNT.LOCKFS(8)                                                                            Administration système                                                                           MOUNT.LOCKFS(8)

NOM
       mount.lockfs - script d'aide pour la commande mount

SYNOPSIS
       mount.lockfs SYSTÈME_DE_FICHIERS POINT_DE_MONTAGE [DRAPEAUX] -o OPTIONS_DE_MONTAGE

DESCRIPTION
       /usr/sbin/mount.lockfs  est  un lien symbolique vers /usr/libexec/bilibop/lockfs_mount_helper. Il est utilisé comme un programme d'aide par la commande mount(8) pour le type de système de fichiers
       'lockfs' dans les entrées de /etc/fstab. Ce script ne peut pas être lancé manuellement, et échoue si la racine du système n'est pas déjà gérée par bilibop-lockfs. Son usage correct et  la  manière
       dont il travaille sont les suivants:

       1. Activer  bilibop-lockfs:  fixer la variable BILIBOP_LOCKFS à true dans bilibop.conf(5) et redémarrer l'ordinateur; ou redémarrer l'ordinateur et ajouter le paramètre 'lockfs' à la ligne de com‐
          mande du noyau.

       2. Une fois que la future racine '/' est paramètrée comme point de montage (union) depuis l'environnement du disque de démarrage en mémoire (initramdisk), le fichier  temporaire  fstab(5),  acces‐
          sible  en  écriture,  est modifié pour remplacer les types de certains systèmes de fichiers par 'lockfs'. Les options sont aussi modifiées pour se rappeler du type de système de fichiers d'ori‐
          gine.

       3. Une fois que le point de montage aufs ou overlay est la nouvelle racine du système, les scripts d'initialisation sont éxécutés: fstab(5) est parcouru par 'mount -a', et la commande mount(8) ap‐
          pelle mount.lockfs avec les arguments corrects quand un système de fichiers de type 'lockfs' est rencontré.

       4. mount.lockfs parcourt les arguments et vérifie si le système de fichiers a été mis de côté par bilibop.conf(5), ou pas. Si c'est le cas, le système de fichiers est monté normalement et l'entrée
          de fstab est modifiée pour refléter l'appel réel à mount. Si ni le système de fichiers ni le point de montage n'ont été mis de côté, alors le système de fichiers est monté ailleurs et  en  lec‐
          ture  seule, un système de fichiers temporaire est monté avec ses propres options, taille, permissions et propriétés, et un système de fichiers aufs ou overlay est monté sur le POINT_DE_MONTAGE
          donné en argument, avec les branches paramètrées précédemment. L'entrée dans fstab est remplacée par trois lignes reflétant les appels réels à mount. Si quelque chose échoue, mount.lockfs  agit
          comme si le système de fichiers avait été mis de côté. Voir /usr/share/doc/bilibop-lockfs/README.Debian pour plus de détails.

OPTIONS
       lockfs_mount_helper  utilise les options et arguments tels que fournis par mount(8) après que cette dernière ait analysé l'entrée correspondante dans fstab(5). Ainsi, ces options et arguments sont
       obligatoires et sont fournis dans cet ordre:

       SYSTÈME_DE_FICHIERS
              Correspondant au premier champ dans fstab. Ce doit être un périphérique en mode bloc ou un lien symbolique vers un tel périphérique. Si ce champ est donné dans l'un des  formats  UUID=*  ou
              LABEL=*, alors la commande mount le traduit en nom du périphérique correspondant avant d'appeler le programme d'aide.

       POINT_DE_MONTAGE
              Correspondant au deuxième champ dans le fichier fstab.

       [DRAPEAUX]
              Drapeaux génériques passés dans la ligne de commande de mount (les plus communs étant -v et -n).

       -o OPTIONS_DE_MONTAGE
              Correspondant  au  quatrième champ dans fstab. Les options de montage sont analysées par le script d'aide: si l'option fstype=* est rencontrée, elle est retirée des options et utilisée pour
              monter la branche inférieure (en lecture seule) avec ce type de système de fichiers. Si les options ro, noexec, nosuid ou nodev sont rencontrées, elles sont ajoutées à la liste des  options
              de montage de la branche supérieure (accessible en écriture).

FICHIERS
       /etc/fstab
       /usr/libexec/bilibop/lockfs_mount_helper
       /usr/share/doc/bilibop-lockfs/README.Debian

VOIR AUSSI
       aufs(5), bilibop(7), bilibop.conf(5), fstab(5), mount(8)

AUTEUR
       Cette page de manuel a été traduite de l'anglais par Christophe Blanc <algebre@no-log.org> dans le cadre du projet bilibop.

bilibop                                                                                          2020-02-02                                                                                 MOUNT.LOCKFS(8)
