mysql‐zrm‐reporter(1)                                      mysql‐
zrm‐reporter(1)

NAME
       mysql‐zrm‐reporter ‐ ZRM for MySQL backup reporting utili‐
ty.

SYNOPSIS
       mysql‐zrm‐reporter  [‐‐fields  name1, name2, name3, name4,
name5 ....]
                       [‐‐destination dir ]
                       [‐‐where  fieldname=value]
                       [‐‐type  html]
                       [‐‐output filename]
                       [‐‐latest ]
                       [‐‐noheader ]
                       [‐‐show  backup‐method‐info |
                                backup‐status‐info |
                                backup‐retention‐info |
                                backup‐performance‐info |
                                restore‐full‐info |
                                restore‐incr‐info |
                                replication‐info |
                                backup‐app‐performance‐info ]
                       [‐‐help]

DESCRIPTION
       mysql‐zrm‐reporter   utility   provides  pre‐defined   and
user‐defined
       reports  about various MySQL database backup runs. The re‐
ports can be in
       text or HTML format. Backup report can be sent  as  a  RSS
feed.

       Backup         reports         can        be       config‐
ured       using
       /etc/mysql‐zrm/mysql‐zrm‐reporter.conf  file   parameters.
For  supported
       formats, see mysql‐zrm‐reporter.conf(5).

       ZRM   for MySQL configuration file, mysql‐zrm.conf(5) file
contains HTML
       configuration   and   RSS    feed    configuration     pa‐
rameters    for
       mysql‐zrm‐reporter       utility.      The     list     of
mysql‐zrm‐reporter parameters
       are:

       html‐report‐directory
              Set the directory where   text/HTML   reports   are
written.  This
              parameter        is        optional.       Example:
/var/www/html/mysql‐zrm‐reports/

       html‐reports
              List of pre‐defined report(s) to be  generated  af‐
ter  a  backup
              run. Example: backup‐status‐info

       webserver‐url
              RSS   feeds   URL   of  a  directory under document
root of the web
              server. If this  value  is  not  specified  in  the
mysql‐zrm.conf(5)
              configuration  file,  RSS  feeds will not be gener‐
ated. Example:
              http://backupserver.company.com/reports/

       rss‐header‐location
              The location of RSS feed properties  file  contain‐
ing  RSS  feed
              channel   and  item properties. This parameter must
be provided if
              webserver‐url is  specified.  Example:  /etc/mysql‐
zrm/RSS.header

BACKUP INFORMATION
       Each  backup run generates the following information about
the backup:

       backup‐date
              Date and time stamp of backup run.

       mysql‐version
              MySQL server version.

       backup‐directory
              The location of backup directory.

       backup‐level
              Lists the backup‐level ‐ 0 for a  full  and  1  for
incremental
              backup.

       raw‐databases
              List   of  databases  backed up using mysqlhotcopy.
If raw‐tables
              parameter is present, this will have only one data‐
base listed.

       raw‐tables
              List  of  tables backed up using mysqlhotcopy.  The
name  of  the
              database these tables  belong  to  is  found  under
raw‐databases.

       raw‐databases‐snapshot
              List  of  databases  backed up using lvm snapshots.
When raw‐tables
              parameter is specified, this  will  list  only  one
database.

       raw‐tables‐snapshot
              List  of  tables backed up using mysqlhotcopy.  The
name  of  the
              database these tables  belong  to  is  found  under
raw‐databases.

       backup‐time
              Time  taken  for the complete backup run. Format is
HH:MM:SS

       read‐locks‐time
              Time  read  lock  was  held   during   the   backup
run. Format is
              HH:MM:SS

       flush‐logs‐time
              Time  for flushing database pages to the disk. For‐
mat is HH:MM:SS

       backup‐size
              The size, in megabytes, of data backed up.

       backup‐status
              Status  has three  values.  "Backup  Failed"  value
means that there
              was  a fatal error. "Backup done with errors" means
that  though
              there was some error during backup but some of  the
databases and
              tables were probably backed up. "Backup  succeeded"
means  that
              the backup run was completed successfully.

       logical‐databases
              List  of  databases  backed  up using mysqldump(1).
When ‐tables
              parameter  is  specified,  this will only one data‐
base.

       logical‐tables
              List  of  tables  belonging  to   logical‐databases
backed  up  using
              mysqldump(1). The name of the database these tables
belong to is
              found under ‐databases.

       replication
              List of  replication   files   backed   up   namely
master.info  and
              relay‐log.info

       slave‐load‐files
              Names of SQL_LOAD* files that were backed up.

       incremental
              Names of the binary log files backed up.

       backup‐set
              Name of the backup set this backup belongs to.

       comment
              Comment   about  the  backup  added  by  the admin‐
istrator in the
              mysql‐zrm.conf(5) file.

       retention‐policy
              Backup image will be retained for the  time  speci‐
fied as  parame‐
              ter  in  Days/Weeks/Months/Years.  For  example: if
the value is
              "10D" means the backup image will  be  retained  10
days  from  the
              backup‐date.   This  policy  assumes  365 days in a
year and 30 days
              in a month.

       compress
              Specifies that the backup was  compressed.  Default
compression
              method   is   gzip  program.  The  program used for
compression is
              value for this parameter.

       encrypt
              Program used for encryption if the backups are  en‐
crypted.

       host   Hostname of the MySQL server that was backed up.

       compress‐encrypt‐time
              Time  taken   by   compression  and/or  encryption.
This  time  is
              included in the backup time

       innodb‐data
              List of InnoDB shared data files backed up.

       innodb‐logs
              List of InnoDB logs backed up.

OPTIONS
       ‐‐show    backup‐method‐info   |   backup‐status‐info    |
backup‐retention‐info
       |     backup‐performance‐info     |     restore‐info     |
selective‐restore‐info  |
       replication‐info
              To  display  predefined  reports set  this  option.
The predefined
              reports, and what they contain, are listed below:

              backup‐status‐info   :   backup‐set,   backup‐date,
backup‐level,
              backup‐status,  backup  comment  backup‐method‐info
: backup‐set,
              raw‐databases, raw‐databases, logical‐databases

              backup‐retention‐info  :  backup‐set,  backup‐date,
backup‐level,
              backup‐size, retention‐policy

              backup‐performance‐info : backup‐set,  backup‐date,
backup‐level,
              backup‐size,     backup‐size‐compressed,    backup‐
time,     com‐
              press‐encrypt‐time

              backup‐app‐performance‐info      :      backup‐set,
backup‐date,
              backup‐level,              backup‐size,backup‐time,
read‐locks‐time,
              flush‐logs‐time

              restore‐info     :     backup‐set,     backup‐date,
backup‐level,
              backup‐directory, backup‐status, comment

              selective‐restore‐info :  backup‐set,  backup‐date,
incremental
              replication‐info   :    backup‐set,    backup‐date,
replication,
              slave‐load‐files

       ‐‐destination dir
              Set  the  backup  root  directory.  This  parameter
is  optional.
              Default value is /var/lib/mysql‐zrm

       ‐‐fields name1,name2,name3...
              Set  the  list  of  backup parameters  to  display.
List of valid
              field  names  are  described in BACKUP  INFORMATION
section.  This
              field           is           optional.           By
default
              backup‐set,backup‐date,backup‐level,backup‐status,comment
are
              displayed.  Spaces  are  not  allowed with  in  the
parameter name
              list.  If  spaces  must  be  used, list must within
quotes.

       ‐‐where fieldname=value
              The utility will display the MySQL  backup  parame‐
ters  where  the
              field name matches value. This field is optional.

       ‐‐type html
              Report will be in HTML format.

       ‐‐output filename
              HTML   report   will  be  written to filename under
"html" directory
              and text reports will be written to filename  under
"text" direc‐
              tory.    By  default, these directories are created
under the cur‐
              rent working directory.  The utility  allows  users
to  specify
              explicit   directory   location   for   reports  in
mysql‐zrm.conf(5)
              using "html‐report‐directory" parameter.  If   this
parameter  is
              set,  then the utility will create "html‐report‐di‐
rectory" direc‐
              tory (if it does  not  exist)  and  output   report
with  name  file
              name   will be written to "html" and/or "text" sub‐
directory under
              "html‐report‐directory" path.

       ‐‐latest
              Report about the most recent backup run.

       ‐‐noheader
              Generate TEXT reports with no page header, This op‐
tion  will  be
              ignored for HTML reports.

       ‐‐help Displays help message and exits.

EXAMPLES
       To   display  backup date, location of backups, and backup
set name use:
       mysql‐zrm‐reporter                           ‐‐destination
/var/lib/mysql‐zrm/backup   ‐‐fields
       backup‐date,backup‐directory,backup‐set

       To   display   backup  date,  backup  set  name,  and size
of backup use:
       mysql‐zrm‐reporter                           ‐‐destination
/var/lib/mysql‐zrm/backup   ‐‐fields
       backup‐date,backup‐set,backup‐size

       To   display   size  of  backup, backup set name, and date
of backup  for
       "config1"    backup    set     use:     mysql‐zrm‐reporter
‐‐destination
       /var/lib/mysql‐zrm/backup       ‐‐fields      backup‐date,
backup‐set, backup‐size
       ‐‐where backup‐set=config1

       To  display  backup  status  report  for  "config1"  back‐
up  set   use:
       mysql‐zrm‐reporter                           ‐‐destination
/var/lib/mysql‐zrm/backup   ‐‐show
       backup‐status‐info ‐‐where backup‐set=config1

       To display backup status report for "config1"  backup  set
in HTML format
       and     write     a     file    use:    mysql‐zrm‐reporter
‐‐destination
       /var/lib/mysql‐zrm/backup                           ‐‐show
backup‐status‐info     ‐‐where
       backup‐set=config1 ‐‐type html ‐‐output myreport.html

FILES
       /var/lib/mysql‐zrm
              Directory under which all backup data is stored.

       /etc/mysql‐zrm/mysql‐zrm‐reporter.conf
              Configuration file read by mysql‐zrm‐reporter util‐
ity.

RETURN VALUES
       On  success,  zero  is  returned. On error, non‐zero value
is returned.
       Output  messages  are written to STDOUT and error messages
are to STDERR.

SEE ALSO AUTHOR
       Zmanda Inc. (http://www.zmanda.com)

Zmanda, Inc.                    ZRM for  MySQL             mysql‐
zrm‐reporter(1)

