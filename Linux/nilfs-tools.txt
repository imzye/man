NILFS_CLEANERD.CONF(5)                                                                      File Formats Manual                                                                      NILFS_CLEANERD.CONF(5)

NAME
       nilfs_cleanerd.conf - nilfs_cleanerd(8) configuration file

DESCRIPTION
       The  nilfs_cleanerd.conf file is the configuration file for the nilfs_cleanerd(8) which reclaims disk space of the NILFS2 filesystem.  This file specifies the parameters related to garbage collec‚Äê
       tion (GC) and behaviour of the daemon program.

       The file contains keyword argument pairs or keyword-only directives, one per line.  Lines starting with '#' are interpreted as comments.  The comment lines and empty lines are ignored.

PARAMETERS
       The possible keywords and their meanings are as follows (keywords and arguments are both case-sensitive):

       protection_period
              Specify the period during which each checkpoint is protected from the garbage collector (in seconds).  NILFS2 GC never deletes checkpoints and their blocks whose duration time is less  than
              the value.  The default value is 3600, meaning one hour.

       min_clean_segments
              Specify the minimum number of clean segments. A value of 0 means continuous cleaning. A value greater than 0 means pause cleaning until less than min_clean_segments are available.

       max_clean_segments
              Specify  the  maximum  number  of  clean  segments.  If  min_clean_segments  is  0,  this  value is ignored. If more than max_clean_segments are available cleaning is paused until less than
              min_clean_segments are available.

       min_clean_segments and max_clean_segments may be followed by a percent sign or the  following  multiplicative  suffixes:  kB  1000,  K  1024,  MB  1000*1000,  M  1024*1024,  GB  1000*1000*1000,  G
       1024*1024*1024, and so on for T, P, E.  If the argument is followed by a percent sign, it represents a disk capacity ratio.

       The default values of min_clean_segments and max_clean_segments are 10 percent and 20 percent respectively.

       clean_check_interval
              Specify the interval to wait between checks of min_clean_segments.  If min_clean_segments is 0, this value is ignored.  The default value is 10.

       selection_policy
              Specify the GC policy. At present, only the `timestamp' policy, which reclaims segments in order from oldest to newest, is support.

       nsegments_per_clean
              Specify the number of segments reclaimed by a single cleaning step.  The default value is 2.

       mc_nsegments_per_clean
              Specify the number of segments reclaimed by a single cleaning step if clean segments < min_clean_segments.  The default value is 4.

       cleaning_interval
              Specify the cleaning interval in seconds.  The default value is 5.

       mc_cleaning_interval
              Specify the cleaning interval in seconds if clean segments < min_clean_segments.  The default value is 1.

       retry_interval
              Specify retry interval in seconds.  This value provides the retry interval of GC in case of resource shortages.  The default value is 60.

       use_mmap
              Specify whether to use mmap(2) for reading segments.  At present, this option is enabled if supported regardless of this directive.

       use_set_suinfo
              Specify whether to use the set_suinfo ioctl if it is supported. This is necessary for the min_reclaimable_blocks feature. By disabling this switch min_reclaimable_blocks is also disabled.

       min_reclaimable_blocks
              Specify the minimum number of reclaimable blocks in a segment before it can be cleaned.

       mc_min_reclaimable_blocks
              Specify the minimum number of reclaimable blocks in a segment before it can be cleaned. if clean segments < min_clean_segments.

       min_reclaimable_blocks  and  mc_min_reclaimable_blocks  may be followed by a percent sign or the following multiplicative suffixes: kB 1000, K 1024, MB 1000*1000, M 1024*1024, GB 1000*1000*1000, G
       1024*1024*1024, and so on for T, P, E.  If the argument is followed by a percent sign, it represents the ratio of blocks in a segment.

       The default values of min_reclaimable_blocks and mc_min_reclaimable_blocks are 10 percent and 1 percent respectively.

       log_priority
              Gives the verbosity level that is used when logging messages from nilfs_cleanerd(8).  The possible values are: emerg, alert, crit, err, warning, notice, info, and  debug.   The  default  is
              info.

       Since  nilfs-utils  2.1,  subsecond  value  can  be  specified for time interval parameters in decimal fraction format.  This applies to protection_period, clean_check_interval, cleaning_interval,
       mc_cleaning_interval, and retry_interval.

FILES
       /etc/nilfs_cleanerd.conf
              Configuration file for nilfs_cleanerd(8).

SEE ALSO
       nilfs_cleanerd(8).

nilfs-utils version 2.2                                                                           Apr 2014                                                                           NILFS_CLEANERD.CONF(5)
