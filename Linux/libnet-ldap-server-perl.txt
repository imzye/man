Net::LDAP::Server(3pm)                                                              User Contributed Perl Documentation                                                              Net::LDAP::Server(3pm)

NAME
       Net::LDAP::Server - LDAP server side protocol handling

SYNOPSIS
         package MyServer;
         use Net::LDAP::Server;
         use Net::LDAP::Constant qw(LDAP_SUCCESS);
         use base 'Net::LDAP::Server';
         sub search {
             my $self = shift;
             my ($reqData, $fullRequest) = @_;
             print "Searching\n";
             ...
             return {
                 'matchedDN' => '',
                 'errorMessage' => '',
                 'resultCode' => LDAP_SUCCESS
             }, @entries;
         }

         package main;
         my $handler = MyServer->new($socket);
         $handler->handle;

         # or with distinct input and output handles
         package main;
         my $handler = MyServer->new( $input_handle, $output_handle );
         $handler->handle;

ABSTRACT
       This class provides the protocol handling for an LDAP server. You can subclass it and implement the methods you need (see below). Then you just instantiate your subclass and call its "handle"
       method to establish a connection with the client.

SUBCLASSING
       You can subclass Net::LDAP::Server with the following lines:

         package MyServer;
         use Net::LDAP::Server;
         use base 'Net::LDAP::Server';

       Then you can add your custom methods by just implementing a subroutine named after the name of each method. These are supported methods:

       "bind"
       "unbind"
       "search"
       "add"
       "modify"
       "delete"
       "modifyDN"
       "compare"
       "abandon"

       For any method that is not supplied, Net::LDAP::Server will return an "LDAP_UNWILLING_TO_PERFORM".

   new()
       You can also subclass the "new" constructor to do something at connection time:

         sub new {
            my ($class, $sock) = @_;
            my $self = $class->SUPER::new($sock);
            printf "Accepted connection from: %s\n", $sock->peerhost();
            return $self;
         }

       Note that $self is constructed using the fields pragma, so if you want to add data to it you should add a line like this in your subclass:

         use fields qw(myCustomField1 myCustomField2);

   Methods
       When a method is invoked it will be obviously passed $self as generated by "new", and two variables:

       •   the Request datastructure that is specific for this method (e.g. BindRequest);

       •   the full request message (useful if you want to access messageID or controls parts)

       You can look at Net::LDAP::ASN or use Data::Dumper to find out what is presented to your method:

         use Data::Dumper;
         sub search {
            print Dumper \@_;
         }

       If  anything goes wrong in the module you specify (e.g. it died or the result is not a correct ldapresult structure) Net::LDAP::Server will return an "LDAP_OPERATIONS_ERROR" where the errorMessage
       will specify what went wrong.

       All methods should return a LDAPresult hashref, for example:

         return({
             'matchedDN' => '',
             'errorMessage' => '',
             'resultCode' => LDAP_SUCCESS
         });

       "search" should return a LDAPresult hashref followed by a list of entries (if applicable). Entries may be coded either as searchResEntry or searchRefEntry  structures  or  as  Net::LDAP::Entry  or
       Net::LDAP::Reference objects.

CLIENT HANDLING
   handle()
       When you get a socket from a client you can instantiate the class and handle the request:

         my $handler = MyServer->new($socket);
         $handler->handle;

       Or, alternatively, you can pass two handles for input and output, respectively.

         my $handler = MyServer->new(*STDIN{IO},*STDOUT{IO});
         $handler->handle;

       See examples in examples/ directory for sample servers, using IO::Select, Net::Daemon or Net::Server.

DEPENDENCIES
        Net::LDAP::ASN
        Net::LDAP::Constant

SEE ALSO
       Net::LDAP
       Examples in "examples" directory.

BUGS AND FEEDBACK
       There are no known bugs. You are very welcome to write mail to the maintainer (aar@cpan.org) with your contributions, comments, suggestions, bug reports or complaints.

COPYRIGHT
       This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.

AUTHOR
       Alessandro Ranellucci <aar@cpan.org> The original author of a Net::LDAP::Daemon module is Hans Klunder <hans.klunder@bigfoot.com>

perl v5.36.0                                                                                     2022-12-11                                                                          Net::LDAP::Server(3pm)
