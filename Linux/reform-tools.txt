REFORM-SETUP-ENCRYPTED-DISK(1)                                                                 User Commands                                                                 REFORM-SETUP-ENCRYPTED-DISK(1)

NAME
       reform-setup-encrypted-disk - setup encrypted disk

SYNOPSIS
       reform-setup-encrypted-disk [--help] [DEVICE_PATH]

DESCRIPTION
       Set  up  a disk with LUKS encryption containing LVM2 volumes for swap and the rootfs. Offers to run reform-migrate and reform-boot-config to set up the initramfs in /boot on the first partition of
       the eMMC or SD-card to load the rootfs from the encrypted disk.

OPTIONS
       --help Display this help and exit.

       --force
              Avoid user interaction: run reform-migrate and put /boot on eMMC if allowed. Requires passphrase on standard input.

   Arguments:
       [DEVICE_PATH]
              Disk, partition or regular file to set up with LUKS and LVM. If this argument is missing, defaults to the SSD.  If the eMMC device is provided, it will be partitioned with the first  parti‐
              tion for /boot and the second partition for LUKS&LVM.  The shorthands ssd, emmc, sd and usb can be used to install to the SSD, the eMMC, the SD card or to a USB drive respectively.  To copy
              to a file of the same name as one of the shorthands, prefix the filename with a dot and and a slash for a relative path.

       Example  1:  When booted from SD-card set up the first partition on eMMC as /boot and set up the SSD with LUKS. Set up LVM inside LUKS with one volume for swap and the other for the root file sys‐
       tem. Copy the current system to /dev/reformvg/root:

              ./bin/reform-setup-encrypted-disk

       Example 2: When booted from SD-card, set up eMMC with two partitions, the first one for /boot and the second for LUKS. Set up LVM inside LUKS with one volume for swap and the other  for  the  root
       file system. Copy the current system to /dev/reformvg/root. Suppress any interactivity by using --force and obtain the LUKS passphrase from standard input.

              echo hunter2 | ./bin/reform-setup-encrypted-disk --force emmc

reform-setup-encrypted-disk 1.79                                                                October 2025                                                                 REFORM-SETUP-ENCRYPTED-DISK(1)
