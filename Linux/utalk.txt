UTALK(1)                                                                                General Commands Manual                                                                               UTALK(1)

NAME
       utalk - a UDP-based full screen talk program

SYNOPSIS
       utalk [options] user[@host][#tty]
       utalk [options] !port@host
       utalk [options] -s port
       utalk [options] -c host port

OPTIONS
       -s, --server
              Tells utalk not to use the talk daemons to announce itself, and instead wait for a connection on the given port number.

       -c, --client
              Tells utalk not to use the talk daemons to announce itself, and instead connect to the given port number on the given host.

       -a, --announce-only
              Makes  utalk  decide on a local port number, and send out an announce with the port number instead of your username.  Useful to start a utalk session with a host that has a talk daemon
              when yours doesn't.

       -7, --seven-bit
              Makes utalk convert all characters to 7-bit US-ASCII before displaying them; useful if you don't have an iso-8859-1 capable terminal.

       -8, --eight-bit
              Makes utalk show iso-8859-1 encoded characters on the screen, as they are received.

ARGUMENTS
       user@host[#tty]
              Specifies the user to ring.  The "user@host" part can be replaced with an alias name defined in your ~/.utalkrc.  If you specify the tty, utalk will ask the talk  daemon  to  ring  the
              user on that particular tty.  The username can be prefixed by a '!', which utalk will strip.

       !port@host
              Specifies the port number to connect to, and the host.  Useful to answer to a utalk -a.

DESCRIPTION
       utalk  is  a  text-based chat program in the vein of talk and YTalk, which uses a better protocol built over UDP for communication.  Because it does not require that network packets arrive in
       sequence to be able to display them, utalk can be used over unreliable links where a TCP/IP connection such as a telnet or a talk would be too slow to be usable.

       Additionally, utalk supports full editing of previously typed text, scrollback, keyboard bindings, and aliases.

       utalk is incompatible with any other talk programs, as it uses a completely different protocol.  Unfortunately, the text "respond with:  talk" is hard-coded in the talk daemon, and cannot  be
       set by the client.

       To avoid confusion, utalk's talk requests send the username prefixed with a '!', which must be understood as ``respond with utalk''.

DISPLAY
       As in talk and YTalk, the utalk screen is divided in two separate scrolling areas or windows, at the top one for yourself and at the bottom one for the other connected user.

       At any time, one of these windows is active.  Each scrolling area has a status line at the top, with the name of the client and the following flags:

       [m]    This flag is always present on the top window that it's your own window, from your point of view it means it's "my" window.

       [o]    This flag means that your own window is in overwrite mode.

       [i]    This flag means that your own window is in insert mode.

       [*]    This  flag  means  that  the  window is active and in read-write mode.  This is the normal mode for your own window;  in this mode, you can type and edit, and when you move your cursor
              and/or scroll back, the other connected user can see the cursor movement too.

       [R]    This flag means that the window is active and in read-only mode.  This is the only way another window than yours can be active (i.e you can't type text in someone else's window);  set‐
              ting your own window in read-only mode lets you scroll back through what you typed without the other user seeing you doing it.

       [n]    Means that the window is not yet connected; the user hasn't responded yet.

       [c]    Means that the window is connected.

       [b]    Means  that the window is connected, but no data (even control data that utalk sends periodically) has been received for a while, so the connection might be broken or the client on the
              other side might have crashed.  utalk will not interrupt a connection because of this, it's up to you to stop it after a while if it doesn't come back.

EDITING
       utalk's editing keys can be configured to emulate either vi or emacs, in a limited way.  By default, utalk is in emacs mode.

       utalk keeps a table of bindings for each of three modes: emacs mode, vi command mode, and vi insert mode.  These tables are initialized to suitable defaults, and you can add bindings with the
       bind command in your ~/.utalkrc file.

       The following is a list of all key commands and their default bindings in emacs mode, vi command mode, and vi insert/replace mode respectively.

       self-insert (printable chars) (unbound) (printable chars)
              In overwrite mode (replace in vi mode) the keypress gets inserted at the current cursor position, the character at this position is replaced by the new one, and the cursor  moves  for‐
              ward one step.

              In insert mode the key gets inserted as well at the current cursor position but the rest of the line (if any) is moved one step to the right.

       toggle-overwrite (ESC [2~) (unbound) (unbound)
              Change between overwrite and insert modes.
              In most systems the sequence ESC [2~ is mapped to the insert key.

       insert-in-place (unbound) (unbound) (unbound)
              The keypress gets inserted at the current cursor position, and the cursor does not move.

       quote-char (^Q) (unbound) (^V)
              Insert the following key literally.

       tab (^I) (unbound) (^I)
              Moves the cursor to the next tab stop.

       new-line (^M, ^J) (^M, ^J) (^M, ^J)
              Moves the cursor to the first position on the next line, possibly creating the line.
              In most systems the control codes ^M or ^J are mapped to the enter key.

       delete (^D, ESC [3~) (x) (unbound)
              Deletes the character under the cursor.
              In most systems the sequence ESC [3~ is mapped to the delete key.

       delete-end-of-line (^K) (D, d$) (unbound)
              Deletes from the cursor to the end of the line.

       delete-beginning-of-line (unbound) (d0, d^) (unbound)
              Deletes from the beginning of the line to the cursor.

       delete-line (^U) (dd) (^U)
              Deletes the current line.

       delete-word (ESC d) (dw, dW) (unbound)
              Deletes to the beginning of the next word.

       delete-end-of-word (unbound) (de) (unbound)
              Deletes to the end of the current word.

       backspace (^H, DEL) (X) (^H, DEL)
              Moves back the cursor one position, erasing the character in that position, the rest of the line (if any) is moved one step to the left.
              In most systems the control codes ^H or DEL are mapped to the backspace key.

       backspace-word (^W) (unbound) (^W)
              Backspaces over one word.

       backward (^B, ESC [D) (h, [D) (unbound)
              Moves backward one position.
              In most systems the sequence ESC [D is mapped to the left arrow key.

       forward (^F, ESC [C) (l, [C) (unbound)
              Moves forward one position.
              In most systems the sequence ESC [C is mapped to the right arrow key.

       backward-word (ESC b) (b, B) (unbound)
              Moves backward one word.

       forward-word (ESC f) (w, W) (unbound)
              Moves forward one word.

       end-of-word (unbound) (e) (unbound)
              Moves to the end of the current word.

       beginning-of-line (^A, ESC [7~) (0, ^) (unbound)
              Moves to the beginning of the current line.
              In most systems the sequence ESC [7~ is mapped to the home key.

       end-of-line (^E, ESC [8~) ($) (unbound)
              Moves to the end of the current line.
              In most systems the sequence ESC [8~ is mapped to the end key.

       nop (unbound) (ESC) (unbound)
              Does nothing.

       beep (unbound) (unbound) (unbound)
              Beeps the terminal (does not send a beep across to the other clients).

       up (^P, ESC [A) (k, [A) (unbound)
              Moves the cursor up one line.
              In most systems the sequence ESC [A is mapped to the up arrow key.

       down (^N, ESC [B) (j, [B) (unbound)
              Moves the cursor down one line.
              In most systems the sequence ESC [B is mapped to the down arrow key.

       up-page (ESC v, ESC [5~) (^B) (unbound)
              Moves the cursor up one page if the screen is in read/write mode, and scrolls up by one page if it is in read-only mode.
              In most systems the sequence ESC [5~ is mapped to the page up key.

       down-page (^V, ESC [6~) (^F) (unbound)
              Moves the cursor down one page if the screen is in read/write mode, and scrolls down by one page if it is in read-only mode.
              In most systems the sequence ESC [6~ is mapped to the page down key.

       up-half-page (unbound) (^U) (unbound)
              Moves the cursor up half a page if the screen is in read/write mode, and scrolls up by half a page if it is in read-only mode.

       down-half-page (unbound) (^D) (unbound)
              Moves the cursor down half a page if the screen is in read/write mode, and scrolls down by half a page if it is in read-only mode.

       top-of-screen (unbound) (H) (unbound)
              Moves the cursor to the first line of the current visible screen.

       middle-of-screen (unbound) (M) (unbound)
              Moves the cursor to the middle of the screen.

       bottom-of-screen (unbound) (L) (unbound)
              Moves the cursor to the last line of the current visible screen.

       top-or-up-page (unbound) (unbound) (unbound)
              Moves the cursor to the top of the screen if it's not there, or scrolls up by one page if it is.

       bottom-or-down-page (unbound) (unbound) (unbound)
              Moves the cursor to the bottom of the screen if it's not there, or scrolls down by one page if it is.

       vi-goto-line (unbound) (G) (unbound)
              Moves the cursor to the line number entered as a prefix, if any; otherwise moves to the last line of the buffer.

       redisplay (^L) (^L) (^L)
              Redraws the screen.

       resynch (^R) (^R) (^R)
              Requests immediate transmission of all missing packets.

       next-window (^X b, ^X o, ^G) (g) (unbound)
              Cycles the active window between your window in read/write mode, your window in read-only mode, and each of the other windows.

       set-topic (^T) (^T) (unbound)
              Prompts the user for a ``topic'', which will be displayed at the top of the screen for all users.

       vi-insert-mode (unbound) (i) (unbound)
              Sets vi insert mode.

       vi-replace-mode (unbound) (R) (unbound)
              Sets vi replace (overwrite) mode.

       vi-command-mode (unbound) (unbound) (unbound)
              Sets vi command mode.

       emacs-mode (unbound) (unbound) (unbound)
              Sets emacs mode.

       quit (^X c, ^C) (ZZ) (unbound)
              Quits utalk.

       vi-escape (unbound) (unbound) (ESC)
              Sets vi command mode and moves the cursor one position to the left.

       vi-add (unbound) (a) (unbound)
              Moves the cursor one position to the right and sets vi insert mode.

       vi-add-at-end-of-line (unbound) (A) (unbound)
              Moves the cursor to the end of the current line and sets vi insert mode.

       vi-insert-at-beginning-of-line (unbound) (I) (unbound)
              Moves the cursor to the beginning of the current line and sets vi insert mode.

       vi-open (unbound) (o) (unbound)
              Moves the cursor to the beginning of the next line and sets vi insert mode.

       vi-open-above (unbound) (O) (unbound)
              Moves the cursor to the beginning of the previous line and sets vi insert mode.

       vi-replace-char (unbound) (r) (unbound)
              Replaces the char under the cursor with the following key.

       vi-find-char (unbound) (f) (unbound)
              Moves the cursor to the next occurrence of the following key on the same line.

       vi-reverse-find-char (unbound) (F) (unbound)
              Moves the cursor to the previous occurrence of the following key on the same line.

       vi-till-char (unbound) (t) (unbound)
              Moves the cursor to one position before the next occurrence of the following key on the same line.

       vi-reverse-till-char (unbound) (T) (unbound)
              Moves the cursor to one position after the previous occurrence of the following key on the same line.

       vi-repeat-find (unbound) (;) (unbound)
              Repeats the previous find or till command.

       vi-reverse-repeat-find (unbound) (,) (unbound)
              Repeats the previous find or till command, reversing the direction.

       vi-delete-find-char (unbound) (df) (unbound)
              Deletes all characters between the current position and the next occurrence of the following key on the same line, both included.

       vi-delete-reverse-find-char (unbound) (dF) (unbound)
              Deletes all characters between the current position and the previous occurrence of the following key on the same line, both included.

       vi-delete-till-char (unbound) (dt) (unbound)
              Deletes all characters between the current position and the next occurrence of the following key on the same line, not including the latter.

       vi-delete-reverse-till-char (unbound) (dF) (unbound)
              Deletes all characters between the current position and the previous occurrence of the following key on the same line, not including the latter.

       vi-flip-case (unbound) (~) (unbound)
              Flip the case of the character under the cursor.

CONFIGURATION
       You can specify a number of settings for utalk in a configuration file called .utalkrc in your home directory.

       Valid commands are:

           emacs-mode
           vi-mode
           bind key function
           bind! key function
           alias alias value
           set setting on|off

       Settings are:

       beep   Makes utalk let beeps through or silence them.

       word-wrap, wordwrap, ww
              Turns word-wrap on or off (only at the end of the last line in the buffer).

       eight-bit, eightbit, eb
              Lets eight-bit iso-latin-1 characters through or maps them to US-ASCII.

       meta-esc, metaesc, me
              Maps keys with the high bit set to ESC followed by key, or lets them through (only affects emacs-mode).

       overwrite
              Set initial overwrite mode "on", or "off" for insert mode, that can be changed later (usually with insert key), this setting in fact only affects emacs-mode because in vi-mode the mode
              is set explicitly with "i" and "R" commands.

       "toggle" and "se" are synonyms for "set".
       "bindkey" and "bindkey!" are synonyms for "bind" and "bind!", respectively.

       In settings, "on" and "off" arguments are optional, "on" is assumed by default, unless the setting's name is prefixed with "no".

       Bindings apply to the current mode; to change bindings in vi mode, put a "vi-mode" first, then your "bind"s and "bind!"s.  In emacs mode, "bind" and "bind!" are synonymous.

       In a binding, the key must be a character or sequence of characters, not separated with any spaces.  The following sequences are recognized to specify characters:

           ^char, C-char     --   Control-char
           M-char            --   Meta-char
           \e                --   ESC
           \t                --   Tab
           \r                --   Carriage return (^M)
           \n                --   Newline (^J)
           \xhex code        --   Ascii code given in hex
           char              --   That char, taken literally

       Note that you shouldn't bind functions to M-key combinations in emacs mode; use ESC key combinations instead, and turn meta-esc on if you want to use your Meta key like in emacs.

       You can make aliases for addresses of people to ring, in either of 3 forms:

       alias aliasname@ username@
                   Replaces aliasname@host with username@host for every host. The '@' at the end of username@ is not required.

       alias @aliashost @realhost
                   Replaces user@aliashost with user@realhost for every user. The '@' at the beginning of @realhost is not required.

       alias aliasname user@host
                   Replaces aliasname with user@host.

COPYING
       utalk is free software. You can redistribute it and/or modify it under the GNU General Public License as published by the Free Software Foundation.  See the file LICENSE for details.

SEE ALSO
       talk(1), ytalk(1), talkd(8), mesg(1)

FILES
       ~/.utalkrc           configuration file

BUGS
       Currently the wordwarp function only works in overwrite mode, not in insert mode. If the users have a different terminal width, the wordwrap is only done correctly in the local "my" window.

       The vi and emacs emulations are relatively primitive.

       There is an embedded help function but is not completed.

AUTHOR
       utalk was written by Roger Espel Llima <roger.espel.llima at pobox.com>.  Version 1.0.2 was released by E. Bosch <presidev at gmail.com>.

Roger Espel Llima                                                                            Dec 27, 2020                                                                                     UTALK(1)
