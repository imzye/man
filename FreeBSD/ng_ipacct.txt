ipacctctl(8)            FreeBSD System Manager's Manual           ipacctctl(8)

NAME
     ipacctctl – ÐÒÏÇÒÁÍÍÁ ÄÌÑ ÕÐÒÁ×ÌÅÎÉÑ netgraph ÕÚÌÁÍÉ ÔÉÐÁ ng_ipacct

SYNOPSIS
     ipacctctl [-nio] [-d level] nodename:prefixname command
               [command arguments]

DESCRIPTION
     ðÒÏÇÒÁÍÍÁ ipacctctl ÐÒÅÄÎÁÚÎÁÞÅÎÁ ÄÌÑ ÕÐÒÁ×ÌÅÎÉÑ É ÐÏÌÕÞÅÎÉÑ ÓÔÁÔÉÓÔÉËÉ
     ÉÚ netgraph(4) ÕÚÌÁ nodename ÔÉÐÁ ng_ipacct(4).  ðÏ ÕÍÏÌÞÁÎÉÀ ËÏÍÁÎÄÁ
     command ×ÙÐÏÌÎÑÅÔÓÑ ÄÌÑ ÈÕËÏ× prefixname _in É prefixname _out,
     ÉÓÐÏÌØÚÕÅÍÙÈ ÄÌÑ ÐÏÄÓÞ£ÔÁ ÓÏÏÔ×ÅÔÓÔ×ÅÎÎÏ ×ÈÏÄÑÝÅÇÏ É ÉÓÈÏÄÑÝÅÇÏ IP
     ÔÒÁÆÉËÁ.

     íÏÇÕÔ ÉÓÐÏÌØÚÏ×ÁÔØÓÑ ÓÌÅÄÕÀÝÉÅ ËÌÀÞÉ:

     -n          ÷Ù×ÏÄÉÔØ IP ÁÄÒÅÓÁ × ×ÉÄÅ unsigned int Á ÎÅ dot notation.
                 ðÏÚ×ÏÌÑÅÔ ÕÐÒÏÓÔÉÔØ ÉÍÐÏÒÔ ÄÁÎÎÙÈ × SQL ÓÅÒ×ÅÒÁ (× ÞÁÓÔÎÏÓÔÉ,
                 MySQL).

     -i          ðÒÉÍÅÎÑÔØ ËÏÍÁÎÄÕ ÔÏÌØËÏ Ë ÈÕËÕ prefixname_in.

     -o          ðÒÉÍÅÎÑÔØ ËÏÍÁÎÄÕ ÔÏÌØËÏ Ë ÈÕËÕ prefixname_out.

     -d level    ðÏÚ×ÏÌÑÅÔ ÚÁÄÁÔØ ÕÒÏ×ÅÎØ ÏÔÌÁÄËÉ ÄÌÑ netgraph(3).

     ipacctctl ÒÅÁÌÉÚÕÅÔ ÓÌÅÄÕÀÝÉÅ ËÏÍÁÎÄÙ:

     checkpoint  ðÅÒÅÍÅÓÔÉÔØ ÄÁÎÎÙÅ ÉÚ ÁËÔÉ×ÎÏÊ ÂÁÚÙ × checkpoint ÂÁÚÕ.

     clear       ïÞÉÓÔÉÔØ checkpoint ÂÁÚÕ.

     debug level
                 õÓÔÁÎÏ×ÉÔØ ÕÒÏ×ÅÎØ ÏÔÌÁÄËÉ ÄÌÑ ng_ipacct(4).  õÒÏ×ÅÎØ ÏÔÌÁÄËÉ
                 Ñ×ÌÑÅÔÓÑ ÇÌÏÂÁÌØÎÏÊ ÐÅÒÅÍÅÎÎÏÊ ÄÌÑ ×ÓÅÇÏ ÕÚÌÁ É ÏÐÒÅÄÅÌÑÅÔ
                 ÔÉÐÙ ÏÔÌÁÄÏÞÎÙÈ ÓÏÏÂÝÅÎÉÊ ×Ù×ÏÄÉÍÙÈ × ÐÒÏÃÅÓÓÅ ÒÁÂÏÔÙ.

     show        ÷Ù×ÅÓÔÉ ÓÏÄÅÒÖÉÍÏÅ checkpoint ÂÁÚÙ.

     stat arg    ÷Ù×ÅÓÔÉ ÉÎÆÏÒÍÁÃÉÀ Ï arg.  ÷ÏÚÍÏÖÎÙ ÓÌÅÄÕÀÝÉÅ ÚÎÁÞÅÎÉÑ arg:

                       a   ÷Ù×ÅÓÔÉ ÉÎÆÏÒÍÁÃÉÀ ÏÂ ÁËÔÉ×ÎÏÊ ÂÁÚÅ.

                       c   ÷Ù×ÅÓÔÉ ÉÎÆÏÒÍÁÃÉÀ Ï checkpoint ÂÁÚÅ.

                       h   ÷Ù×ÅÓÔÉ ÉÎÆÏÒÍÁÃÉÀ Ï ÈÕËÅ.

                       v   ÷Ù×ÅÓÔÉ ÔÅËÕÝÉÅ ×ÅÒÓÉÉ ipacctctl, ÍÏÄÕÌÑ ng_ipacct
                           É ×ÅÒÓÉÉ API.

     threshold nrecords
                 õÓÔÁÎÏ×ÉÔØ ÍÁËÓÉÍÁÌØÎÏÅ ËÏÌÉÞÅÓÔ×Ï ÚÁÐÉÓÅÊ × ÈÜÛ-ÔÁÂÌÉÃÅ ÄÌÑ
                 ÄÁÎÎÏÇÏ ÈÕËÁ. üÔÏÔ ÐÁÒÁÍÅÔÒ ÏÐÒÅÄÅÌÑÅÔ ËÏÌÉÞÅÓÔ×Ï kernel
                 ÐÁÍÑÔÉ, ËÏÔÏÒÏÅ ÂÕÄÅÔ ÉÓÐÏÌØÚÏ×ÁÔØÓÑ ÐÒÉ ÓÏÈÒÁÎÅÎÉÉ
                 ÓÔÁÔÉÓÔÉËÉ.

     saveuid on  ÷ËÌÀÞÉÔØ ÒÅÖÉÍ ÓÏÈÒÁÎÅÎÉÑ ÜÆÆÅËÔÉ×ÎÏÇÏ uid ÐÒÏÃÅÓÓÁ, Ë
                 ËÏÔÏÒÏÍÕ ÉÍÅÅÔ ÏÔÎÏÛÅÎÉÅ IP ÐÁËÅÔ. îÅÏÂÈÏÄÉÍÏ ÕÞÉÔÙ×ÁÔØ, ÞÔÏ
                 ÎÅ ×ÓÅÇÄÁ ×ÏÚÍÏÖÎÏ ÎÁÊÔÉ ÔÁËÏÊ ÐÒÏÃÅÓÓ - × ÜÔÏÍ ÓÌÕÞÁÅ × ÐÏÌÅ
                 uid ÐÒÉ ×Ù×ÏÄÅ ÓÔÁÔÉÓÔÉËÉ ÂÕÄÅÔ ÓÔÏÑÔØ '-1'.

     verbose on  ÷ËÌÀÞÉÔØ ÒÁÓÛÉÒÅÎÎÙÊ ÒÅÖÉÍ ÓÏÈÒÁÎÅÎÉÑ ÓÔÁÔÉÓÔÉËÉ -
                 ÄÏÐÏÌÎÉÔÅÌØÎÏ Ë IP ÁÄÒÅÓÁÍ, ËÏÌÉÞÅÓÔ×Õ ÐÁËÅÔÏ× É ÂÁÊÔ
                 ÓÏÈÒÁÎÑÅÔÓÑ ÎÏÍÅÒ IP ÐÒÏÔÏËÏÌÁ É ÐÏÒÔÙ ÄÌÑ ÐÒÏÔÏËÏÌÏ×
                 TCP/UDP/ICMP.

     savetime on
                 óÏÈÒÁÎÑÔØ ×ÒÅÍÑ ËÏÇÄÁ ÂÙÌ ÐÏÌÕÞÅÎ ÐÅÒ×ÙÊ ÐÁËÅÔ, ÏÔÎÏÓÑÝÉÊÓÑ Ë
                 ÄÁÎÎÏÊ ÚÁÐÉÓÉ.

     dlt type    õÓÔÁÎÏ×ÉÔØ ÄÌÑ ÈÕËÁ ÔÉÐ ×ÈÏÄÑÝÉÈ ÐÁËÅÔÏ× × type.  ÷ÏÚÍÏÖÎÙÅ
                 ÚÎÁÞÅÎÉÑ type:

                       EN10MB
                           Ethernet/FastEthernet/GigabitEthernet ÆÒÅÊÍÙ.

                       RAW
                           IP ÐÁËÅÔÙ.

                       NGGIF
                           ÐÁËÅÔÙ ÏÔ ng_ipacct(4).
                 ðÏ ÕÍÏÌÞÁÎÉÀ ÐÒÉ ÓÏÚÄÁÎÉÉ ÈÕËÁ ÔÉÐ ×ÈÏÄÑÝÉÈ ÐÁËÅÔÏ×
                 ÐÏÌÁÇÁÅÔÓÑ ÒÁ×ÎÙÍ EN10MB.

     ðÒÉ ÉÓÐÏÌØÚÏ×ÁÎÉÉ ËÏÍÁÎÄÙ show ×Ù×ÏÄÉÔÓÑ ÓÏÄÅÒÖÉÍÏÅ checkpoint ÂÁÚÙ
     ÄÁÎÎÙÈ × ÆÏÒÍÁÔÅ:

     ip_from ip_to packets bytes

     üÔÏÔ ÆÏÒÍÁÔ ÁÎÁÌÏÇÉÞÅÎ ×Ù×ÏÄÕ ËÏÍÁÎÄÙ IOS:

     show ip accounting

     ÷ ÓÌÕÞÁÅ ÉÓÐÏÌØÚÏ×ÁÎÉÑ ÏÐÃÉÉ verbose ÓÔÁÔÉÓÔÉËÁ ×Ù×ÏÄÉÔÓÑ × ×ÉÄÅ:

     ip_from s_port ip_to d_port proto packets bytes

     åÓÌÉ proto - ICMP, ÔÏ s_port - ICMP type, d_port - ICMP sub-code.

     ðÒÉ ×ËÌÀÞ£ÎÎÏÍ ÒÅÖÉÍÅ saveuid ÄÏÂÁ×ÌÑÅÔÓÑ ÐÏÌÅ, ÓÏÄÅÒÖÁÝÅÅ euid ÐÒÏÃÅÓÓÁ.
     ðÒÉ ×ËÌÀÞ£ÎÎÏÍ ÒÅÖÉÍÅ savetime ÄÏÂÁ×ÌÑÅÔÓÑ ÐÏÌÅ, ÓÏÄÅÒÖÁÝÅÅ ×ÒÅÍÑ ×
     ÆÏÒÍÁÔÅ UNIX time.

EXAMPLES
     ðÒÉÍÅÒÙ ÉÓÐÏÌØÚÏ×ÁÎÉÑ ipacctctl ÐÒÉ×ÅÄÅÎÙ × ËÁÔÁÌÏÇÅ scripts.

DIAGNOSTICS
     îÅÏÂÈÏÄÉÍÏ ÏÂÒÁÝÁÔØ ×ÎÉÍÁÎÉÅ ÎÁ ÓÏÏÂÝÅÎÉÑ ×ÉÄÁ (port %d) accounting
     threshold exceeded for %d packet(s) and %d byte(s).  ïÎÉ ÇÏ×ÏÒÑÔ Ï ÔÏÍ,
     ÞÔÏ ÕËÁÚÁÎÎÏÅ ËÏÌÉÞÅÓÔ×Ï ÐÁËÅÔÏ× ÂÙÌÏ ÐÒÉÎÑÔÏ, ÎÏ ÎÅ ÐÏÄÓÞÉÔÁÎÏ ÉÚ-ÚÁ
     ÐÒÅ×ÙÛÅÎÉÑ ËÏÌÉÞÅÓÔ×Á ÚÁÐÉÓÅÊ × ÈÜÛ-ÔÁÂÌÉÃÅ. ÷ÏÚÍÏÖÎÙÅ ÒÅÛÅÎÉÑ - ÞÁÝÅ
     ÓÎÉÍÁÔØ ÓÔÁÔÉÓÔÉËÕ ÉÌÉ Õ×ÅÌÉÞÉÔØ ËÏÌÉÞÅÓÔ×Ï ÚÁÐÉÓÅÊ × ÈÜÛ-ÔÁÂÌÉÃÅ Ó
     ÐÏÍÏÝØÀ ËÏÍÁÎÄÙ threshold.  îÅÏÂÈÏÄÉÍÏ ÕÞÉÔÙ×ÁÔØ, ÞÔÏ Õ×ÅÌÉÞÉ×ÁÔØ
     threshold ÄÏ ÂÅÓËÏÎÅÞÎÏÓÔÉ ÎÅÌØÚÑ - ÍÏÖÅÔ ÚÁËÏÎÞÉÔØÓÑ kernel memory É
     ÍÁÛÉÎÁ ÐÏÄ×ÉÓÎÅÔ/ÐÅÒÅÚÁÇÒÕÚÉÔÓÑ.

SEE ALSO
     netgraph(4), ng_ipacct(4).

AUTHORS
     Roman V. Palagin ⟨romanp@unshadow.net⟩.

BUGS
     åÓÌÉ ×Ù ÎÁÛÌÉ ÏÛÉÂËÉ - ÐÏÖÁÌÕÊÓÔÁ, Ó×ÑÖÉÔÅÓØ Ó Á×ÔÏÒÏÍ.

FreeBSD 14.1-RELEASE             Mach 10, 2005            FreeBSD 14.1-RELEASE
