LMTP(3)               User Contributed Perl Documentation              LMTP(3)


NAME
       Net::LMTP - Local Mail Transfer Protocol Client

SYNOPSIS
           use Net::LMTP;

           # Constructors
           $lmtp = Net::LMTP->new('mailhost', 2003);
           $lmtp = Net::LMTP->new('mailhost', 2003, Timeout => 60);

DESCRIPTION
       This module implements a client interface to the LMTP protocol,
       enabling a perl5 application to talk to LMTP servers. This
       documentation assumes that you are familiar with the concepts of the
       LMTP protocol described in RFC2033.  This module is based on Net::SMTP
       and shares more than %95 of its code with Net::SMTP.

       A new Net::LMTP object must be created with the new method. Once this
       has been done, all LMTP commands are accessed through this object.

       The Net::LMTP class is a subclass of Net::Cmd and IO::Socket::INET.

       Net::LMTP does not yet implement full implementation of the protocol as
       specified in RFC2033.  In particular, handling per-recipient reply
       codes from the DATA command is not yet implemented.  Net::LMTP can
       still be used to deliver to multiple recipients, but you will not be
       able to get the DATA reply code for each recipient.

EXAMPLES
       This example prints the mail domain name of the LMTP server known as
       mailboxhost with LMTP service on port 2003:

           #!/usr/local/bin/perl -w

           use Net::LMTP;

           my $lmtp = Net::LMTP->new('mailboxhost', 2003);
           print $lmtp->domain,"\n";
           $lmtp->quit;

       This example sends a small message to the postmaster at the SMTP server
       known as mailhost:

           #!/usr/local/bin/perl -w

           use Net::LMTP;

           my $lmtp = Net::LMTP->new('mailboxhost', 2003);

           $lmtp->mail($ENV{USER});
           $lmtp->to('postmaster');

           $lmtp->data();
           $lmtp->datasend("To: postmaster\n");
           $lmtp->datasend("\n");
           $lmtp->datasend("A simple test message\n");
           $lmtp->dataend();

           $lmtp->quit;

CONSTRUCTOR
       new Net::LMTP HOST, PORT [, OPTIONS ]
           This is the constructor for a new Net::LMTP object. "HOST" is the
           name of the remote host to which a LMTP connection is required.
           "PORT" is the port on which the LMTP service is running.  Both of
           these arguments are required.

           "OPTIONS" are passed in a hash like fashion, using key and value
           pairs.  Possible options are:

           Hello - SMTP requires that you identify yourself. This option
           specifies a string to pass as your mail domain. If not given a
           guess will be taken.

           Timeout - Maximum time, in seconds, to wait for a response from the
           SMTP server (default: 120)

           Debug - Enable debugging information

           Example:

               $lmtp = Net::SMTP->new('mailboxhost',2003,
                                      Hello => 'my.mail.domain'
                                      Timeout => 30,
                                      Debug   => 1,
                                     );

METHODS
       Unless otherwise stated all methods return either a true or false
       value, with true meaning that the operation was a success. When a
       method states that it returns a value, failure will be returned as
       undef or an empty list.

       banner ()
           Returns the banner message which the server replied with when the
           initial connection was made.

       domain ()
           Returns the domain that the remote LMTP server identified itself as
           during connection.

       hello ( DOMAIN )
           Tell the remote server the mail domain which you are in using the
           LHLO command.  Since this method is invoked automatically when the
           Net::LMTP object is constructed the user should normally not have
           to call it manually.

       etrn ( DOMAIN )
           Request a queue run for the DOMAIN given.

       mail ( ADDRESS [, OPTIONS] )
       send ( ADDRESS )
       send_or_mail ( ADDRESS )
       send_and_mail ( ADDRESS )
           Send the appropriate command to the server MAIL, SEND, SOML or
           SAML. "ADDRESS" is the address of the sender. This initiates the
           sending of a message. The method "recipient" should be called for
           each address that the message is to be sent to.

           The "mail" method can some additional ESMTP OPTIONS which is passed
           in hash like fashion, using key and value pairs.  Possible options
           are:

            Size        => <bytes>
            Return      => <???>
            Bits        => "7" | "8"
            Transaction => <ADDRESS>
            Envelope    => <ENVID>

       reset ()
           Reset the status of the server. This may be called after a message
           has been initiated, but before any data has been sent, to cancel
           the sending of the message.

       recipient ( ADDRESS [, ADDRESS [ ...]] [, OPTIONS ] )
           Notify the server that the current message should be sent to all of
           the addresses given. Each address is sent as a separate command to
           the server.  Should the sending of any address result in a failure
           then the process is aborted and a false value is returned. It is up
           to the user to call "reset" if they so desire.

           The "recipient" method can some additional OPTIONS which is passed
           in hash like fashion, using key and value pairs.  Possible options
           are:

            Notify    =>
            SkipBad   => ignore bad addresses

           If "SkipBad" is true the "recipient" will not return an error when
           a bad address is encountered and it will return an array of
           addresses that did succeed.

       to ( ADDRESS [, ADDRESS [...]] )
           A synonym for "recipient".

       data ( [ DATA ] )
           Initiate the sending of the data from the current message.

           "DATA" may be a reference to a list or a list. If specified the
           contents of "DATA" and a termination string ".\r\n" is sent to the
           server. And the result will be true if the data was accepted.

           If "DATA" is not specified then the result will indicate that the
           server wishes the data to be sent. The data must then be sent using
           the "datasend" and "dataend" methods described in Net::Cmd.

       expand ( ADDRESS )
           Request the server to expand the given address Returns an array
           which contains the text read from the server.

       verify ( ADDRESS )
           Verify that "ADDRESS" is a legitimate mailing address.

       help ( [ $subject ] )
           Request help text from the server. Returns the text or undef upon
           failure

       quit ()
           Send the QUIT command to the remote SMTP server and close the
           socket connection.

SEE ALSO
       Net::Cmd, Net::SMTP

AUTHOR
       Les Howard <lhoward@spamcop.net>

   THANKS
       Special thanks to Joe Minieri and ommTel (www.ctel.net) for providing
       the impetus (and funding) to get this module created.

COPYRIGHT
       Copyright (c) 2001 Les Howard. All rights reserved.  This program is
       free software; you can redistribute it and/or modify it under the same
       terms as Perl itself.

POD ERRORS
       Hey! The above document had some coding errors, which are explained
       below:

       Around line 478:
           You forgot a '=back' before '=head1'

perl v5.40.2                      2001-05-15                           LMTP(3)
