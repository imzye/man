CHECK_PUPPET(1)                  User Commands                 CHECK_PUPPET(1)

NAME
       check_puppet - manual page for check_puppet 1.3

SYNOPSIS
       check_puppet [-h | -v] [OPTIONS]

DESCRIPTION
       check_puppet observes for Puppet daemon activity by checking the pid
       file against the process running on the system for both Puppet master
       daemon and Puppet client.  In the client mode local configuration
       freshness is also being checked.

OPTIONS
       -h     Print this help and then exit immediately.

       -v     Print version and exit.

       -c     Enable puppet client checking mode. (default)

       -C     Do not check puppetd.

       -m     Enable puppet master daemon checking mode.

       -M     Do not check puppet master daemon. (default)

       -p path-to-pid
              Running puppet client pid file. You should ensure that user
              running this plugin have sufficient permissions to access this
              file. Default is /var/run/puppet/agent.pid

       -P path-to-pid
              Puppet master daemon pid file. Default pid file path is
              /var/run/puppet/master.pid

       -s path-to-yaml
              Puppet client local configuration YAML. By default puppet stores
              it's state in /var/puppet/state/state.yaml

       -e     Configuration expiration warning delay.

       -E     Configuration expiration critical delay.

ENVIRONMENT
       Although it is possible to set almost all options with command line
       arguments there are some environment variables can be set to change
       some script parameters. Note that command line options have higher
       priority before environment variables.

       PUPPETD_PIDFILE and PUPPET_MASTERD_PIDFILE environment variables
       specifies your Puppet installation pid files for client and master
       processes.

       PUPPETD_STATE variable allow to alternate the path to local client YAML
       configuration from the default value.

       Timeouts in seconds to set whether WARNING or CRITICAL states can be
       adjusted with PUPPETD_STATE_WARNING and PUPPETD_STATE_CRITICAL
       variables.  Note that the warning value must not exceed the value set
       to critical point.

       Triggers CHECK_PUPPETD, CHECK_PUPPET_MASTERD can be set to `yes' or
       `no' to indicate puppet client or puppet master installation, or ever
       both.

       It is possible to determine the check status from the remote host not
       only by checking the exit code of probe execution. If you would like to
       parse the output string and decide the exit status on the Nagios server
       - set the OUTPUT_PREFIXED variable to get output string prefixed with
       the following keywords: OK, WARNING, CRITICAL, UNKNOWN accoring to the
       status.

EXAMPLES
       You can use SNMP plugin from net-mgmt/nagios-plugins FreeBSD port to
       monitor Puppet daemon activity on remote host.

       First, you need to setup a working installation of SNMP-client on the
       host. For the details consult the offical Net-SNMP project site at

           http://net-snmp.sourceforge.net/

       Configure yet another probe in snmpd.conf(5) to execute check_puppet
       agent with any available command line options:

              exec check_puppet /usr/local/bin/check_puppet

       restart snmpd daemon, then query SNMP-client:

              $ snmpwalk -v 1 -c public localhost .1.3.6.1.4.1.2021.8

       You should see the output from snmpd daemon showing the result of
       check_puppet agent execution both the output status string and exit
       code.

       Now configure Nagios service check command. Be sure you have working
       check_snmp command definition in your Nagios configuration. You need to
       pass both OIDs to check_snmp command with -o option - one OID for
       string and another OID for exit status code in order to get correct
       status information and status code retrieving by Nagios poller.
       Specify warning and critical ranges with -w and -c options as `,0' and
       `,1' values accordingly. Check in more options for check_snmp command
       by typing

              $ /usr/local/libexec/nagios/check_snmp -h

       Consult any questions about Nagion configuration at

           http://www.nagios.org/docs/

AVAILABILITY
       The latest version of this distribution is available on-line from:

           http://www.renatasystems.org/freebsd/check_puppet.html

AUTHOR
       Written by Alexey V. Degtyarev

REPORTING BUGS
       Report bugs to <alexey@renatasystems.org>

SEE ALSO
       snmpd.conf(5) snmpd(8)

FreeBSD                            July 2012                   CHECK_PUPPET(1)
