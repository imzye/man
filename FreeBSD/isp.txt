ISP(4)                 FreeBSD Kernel Interfaces Manual                 ISP(4)

NAME
     isp – Qlogic FibreChannel SCSI Host Adapters driver

SYNOPSIS
     To compile this driver into the kernel, place the following lines in your
     kernel configuration file:

           device scbus
           device isp
           device ispfw

     Alternatively, to load the driver as a module at boot time, place the
     following lines in loader.conf(5):

           isp_load="YES"
           ispfw_load="YES"

DESCRIPTION
     This driver provides access to FibreChannel SCSI devices.

     It supports initiator and target modes of FCP SCSI profile, utilizing
     Class 3 and Class 2 connections.  Support is available for Public and
     Private loops, Point-to-Point and Fabric connections.

     Supported FC-Tape functionality is highly recommended for connections to
     tape drives that support it.  It encompasses four elements from the T-10
     FCP-4 specification:

           •   Precise Delivery of Commands

           •   Confirmed Completion of FCP I/O Operations

           •   Retransmission of Unsuccessfully Transmitted IUs

           •   Task Retry Identification

     Together these features allow for link level error recovery with tape
     devices.  Without it, an initiator cannot, for instance, tell whether a
     tape write command that has timed out resulted in all, part or none of
     the data going to the tape drive.  FC-Tape is automatically enabled when
     connecting controller that supports it to a target that supports it.  It
     may be disabled using configuration and hint options described below.

FIRMWARE
     Firmware loading is supported if the ispfw(4) module is loaded.  It is
     strongly recommended that you use the firmware available from ispfw(4) as
     it is the most likely to have been tested with this driver.

HARDWARE
     Cards supported by the isp driver include:

           Qlogic 2422
                   Optical 4Gb Fibre Channel PCI-X cards.

           Qlogic 246x (aka 2432)
                   Optical 4Gb Fibre Channel PCIe cards.

           Qlogic 256x (aka 2532)
                   Optical 8Gb Fibre Channel PCIe cards.

           Qlogic 267x/836x (aka 2031/8031)
                   Optical 16Gb FC/FCoE PCIe cards.

           Qlogic 2690/2692/2694 (aka 2684/2692)
                   Optical 16Gb Fibre Channel PCIe cards.

           Qlogic 2740/2742/2764 (aka 2722/2714)
                   Optical 32Gb Fibre Channel PCIe cards.

CONFIGURATION OPTIONS
     Target mode support for Fibre Channel adapters may be enabled with the

     options ISP_TARGET_MODE

     option.

     To disable FC-Tape, use the following configuration option:

     options ISP_FCTAPE_OFF

     Note that even if the ISP_FCTAPE_OFF option is used, it may be overridden
     by the fctape hint described below.

BOOT OPTIONS
     The following options are switchable by setting values in
     /boot/device.hints.

     They are:

     hint.isp.N.msi
             Limit on number of Message Signaled Interrupts (MSI) to be used.

     hint.isp.N.msix
             Limit on number of Extended Message Signaled Interrupts (MSI-X)
             to be used.

     hint.isp.N.fwload_disable
             A hint value to disable loading of firmware ispfw(4).

     hint.isp.N.ignore_nvram
             A hint value to ignore board NVRAM settings for.  Otherwise use
             NVRAM settings.

     hint.isp.N.fullduplex
             A hint value to set full duplex mode.

     hint.isp.N.topology
             A hint value to select topology of connection.  Supported values
             are:

             lport           Prefer loopback and fallback to point to point.
             nport           Prefer point to point and fallback to loopback.
             lport-only      Loopback only.
             nport-only      Point to point only.

     hint.isp.N.portwwn
             This should be the full 64 bit World Wide Port Name you would
             like to use, overriding the value in NVRAM for the card.

     hint.isp.N.nodewwn
             This should be the full 64 bit World Wide Node Name you would
             like to use, overriding the value in NVRAM for the card.

     hint.isp.N.iid
             A hint to override or set the Initiator ID or Loop ID.  For Fibre
             Channel cards in Local Loop topologies it is strongly recommended
             that you set this value to non-zero.

     hint.isp.N.role
             A hint to define default role for isp instance (0 -- none, 1 --
             target, 2 -- initiator, 3 -- both).

     hint.isp.N.debug
             A hint value for a driver debug level (see the file
             /usr/src/sys/dev/isp/ispvar.h for the values.

     hint.isp.N.vports
             A hint to create specified number of additional virtual ports.

     hint.isp.N.nofctape
             Set this to 1 to disable FC-Tape operation on the given isp
             instance.

     hint.isp.N.fctape
             Set this to 1 to enable FC-Tape operation on the given isp
             instance for targets that support it.

SYSCTL OPTIONS
     dev.isp.N.loop_down_limit
             This value says how long to wait in seconds after loop has gone
             down before giving up and expiring all of the devices that were
             visible.  The default is 300 seconds (5 minutes).  A separate
             (nonadjustable) timeout is used when booting to not stop booting
             on lack of FC connectivity.

     dev.isp.N.gone_device_time
             This value says how long to wait for devices to reappear if they
             (temporarily) disappear due to loop or fabric events.  While this
             timeout is running, I/O to those devices will simply be held.

     dev.isp.N.use_gff_id

     dev.isp.N.use_gft_id
             Setting those options to 0 allows to disable use of GFF_ID and
             GFT_ID SNS requests during FC fabric scan.  It may be useful if
             switch does not implement them correctly, preventing some devices
             from being found.  Disabling them may cause unneeded logins to
             ports not supporting target role or even FCP at all.  The default
             is 1 (enabled).

     dev.isp.N.wwnn
             This is the readonly World Wide Node Name value for this port.

     dev.isp.N.wwpn
             This is the readonly World Wide Port Name value for this port.

SEE ALSO
     da(4), intro(4), ispfw(4), sa(4), scsi(4), gmultipath(8)

AUTHORS
     The isp driver was written by Matthew Jacob originally for NetBSD at
     NASA/Ames Research Center.  Later improvement was done by
     Alexander Motin <mav@FreeBSD.org>.

BUGS
     The driver currently ignores some NVRAM settings.

FreeBSD 13.1-RELEASE-p2        November 19, 2020       FreeBSD 13.1-RELEASE-p2
