PDUMPFS(8)              FreeBSD System Manager's Manual             PDUMPFS(8)

Ì¾Á°
     pdumpfs – Plan9 ¤â¤É¤¤Î¥Ð¥Ã¥¯¥¢¥Ã¥×¥·¥¹¥Æ¥à

·Á¼°
     pdumpfs src-dir dest-dir [dest-basename]

ÀâÌÀ
     pdumpfs ¤Ï Ruby (ruby(1)) ¤Ç¼ÂÁõ¤µ¤ì¤¿ Plan9 ¤Î dumpfs
     ¤â¤É¤¤ÎÃ±½ã¤Ê¥Ð¥Ã¥¯¥¢¥Ã¥×¥·¥¹¥Æ¥à¤Ç¤¹¡£
     ËèÆü¤Î¥¹¥Ê¥Ã¥×¥·¥ç¥Ã¥È¤òÊÝÂ¸¤¹¤ë¤¿¤á¡¢
     ¤¤¤Ä¤Ç¤â²áµî¤Î¥Õ¥¡¥¤¥ë¤ò¼è¤êÌá¤¹¤³¤È¤¬¤Ç¤¤Þ¤¹¡£
     ¥Û¡¼¥à¥Ç¥£¥ì¥¯¥È¥ê¤Î¥Ð¥Ã¥¯¥¢¥Ã¥×¤ËÍøÍÑ¤¹¤ë¤ÈÊØÍø¤Ç¤¹¡£

     pdumpfs ¤Ï¥Ð¥Ã¥¯¥¢¥Ã¥×Àè¥Ç¥£¥ì¥¯¥È¥ê¤Ë Ç¯/·î/Æü
     ¤Î·Á¼°¤Ç¥¹¥Ê¥Ã¥×¥·¥ç¥Ã¥È¤òÊÝÂ¸¤·¤Þ¤¹¡£
     ½é²ó¤Î¤ß¥Ð¥Ã¥¯¥¢¥Ã¥×ÂÐ¾Ý¥Ç¥£¥ì¥¯¥È¥êÁ´ÂÎ¤ò¥³¥Ô¡¼¤·¤Æ¡¢
     2ÆüÌÜ°Ê¹ß¤Ïº¹Ê¬¤Ç¥Ð¥Ã¥¯¥¢¥Ã¥×¤·¤Æ¤¤¤¤Þ¤¹¡£
     ¥Ç¥£¥¹¥¯¤Î¾ÃÈñÎÌ¤òÀáÌó¤¹¤ë¤¿¤á¤Ë¡¢
     ¹¹¿·¤µ¤ì¤Ê¤«¤Ã¤¿¥Õ¥¡¥¤¥ë¤ÏÁ°Æü¤Î¥¹¥Ê¥Ã¥×¥·¥ç¥Ã¥È¤Î
     ¥Õ¥¡¥¤¥ë¤Ø¤Î¥Ï¡¼¥É¥ê¥ó¥¯¤È¤·¤ÆµÏ¿¤µ¤ì¤Þ¤¹¡£

     ºÇ¿·ÈÇ¤Ï¾ï¤Ë http://namazu.org/~satoru/pdumpfs/ ¤«¤éÆþ¼ê²ÄÇ½¤Ç¤¹¡£

»ÈÍÑÎã
     ¼«Ê¬¤Î¥Û¡¼¥à¥Ç¥£¥ì¥¯¥È¥ê /home/yourname ¤ò /backup
     ¤Ë¥Ð¥Ã¥¯¥¢¥Ã¥×¤¹¤ë¤Ë¤Ï¼¡¤Î¤è¤¦¤Ë¼Â¹Ô¤·¤Þ¤¹¡£

           pdumpfs /home/yourname /backup >/backup/log 2>/backup/error-log

     2ÆüÌÜ°Ê¹ß¤Î¥Ð¥Ã¥¯¥¢¥Ã¥×¤Ï cron(5) ¤Ç¹Ô¤¦¤È¤¤¤¤¤Ç¤·¤ç¤¦¡£ËèÄ« 5
     »þ¤Ë¥Ð¥Ã¥¯¥¢¥Ã¥×¤ò¹Ô¤¦¤Ë¤Ï crontab(5)
     ¤Ë¼¡¤Î¤è¤¦¤ÊÀßÄê¤ò(1¹Ô¤Ç)µ½Ò¤·¤Þ¤¹¡£

           00 05 * * * pdumpfs /home/yourname /backup >/backup/log
           2>/backup/error-log

     ËèÆü¤Î¥Ð¥Ã¥¯¥¢¥Ã¥×¤¬½çÄ´¤Ë¿Ê¤à¤È¡¢ /backup/2001/02/19/yourname/...
     ¤Î¤è¤¦¤Ê¥Õ¥¡¥¤¥ëÌ¾¤Ç²áµî¤Î¥Õ¥¡¥¤¥ë¤Ë¥¢¥¯¥»¥¹¤Ç¤¤Þ¤¹¡£

À©¸Â»ö¹à
     -   pdumpfs
         ¤ÏÄÌ¾ï¤Î¥Õ¥¡¥¤¥ë¡¢¥Ç¥£¥ì¥¯¥È¥ê¡¢¤ª¤è¤Ó¥·¥ó¥Ü¥ê¥Ã¥¯¥ê¥ó¥¯¤Î¤ß¤Ë
         ÂÐ±þ¤·¤Æ¤¤¤Þ¤¹¡£

     -   ÆÃ¼ì¤Ê¥Ç¥Ð¥¤¥¹¥Õ¥¡¥¤¥ë¤Ê¤É¤Ï°·¤¨¤Þ¤»¤ó¡£¥Ï¡¼¥É¥ê¥ó¥¯¤òÍøÍÑ¤·¤Æ¤¤¤ë¤Î¤Ç¡¢
         ¤ª¤½¤é¤¯ UNIX °Ê³°¤Î¥·¥¹¥Æ¥à¤Ç¤Ï»È¤¨¤Þ¤»¤ó¡£

     -   µðÂç¤Ê¥Õ¥¡¥¤¥ë¤òÉÑÈË¤ËÄÉ²Ã¡¦¹¹¿·¤¹¤ë¥Ç¥£¥ì¥¯¥È¥ê¤ËÂÐ¤·¤Æ¤Ï¸þ¤¤¤Æ¤Þ¤»¤ó¡£

     -   ¥Ð¥Ã¥¯¥¢¥Ã¥×¤ÏËèÆü¹Ô¤¤¤Þ¤·¤ç¤¦¡£¥Ð¥Ã¥¯¥¢¥Ã¥×¤Î´Ö³Ö¤¬32Æü°Ê¾å¶õ¤¯¤È¡¢
         º¹Ê¬¥Ð¥Ã¥¯¥¢¥Ã¥×¤Ï¹Ô¤¨¤Ê¤¯¤Ê¤ê¤Þ¤¹¡£

     -   pdumpfs ¤ò±¿ÍÑ¤¹¤ë¤È¡¢²áµî¤Î¥Õ¥¡¥¤¥ë¤ò¤¤¤Ä¤Ç¤â¼è¤êÌá¤»¤ë¤Î¤Ç¡¢
         ÉÔÍ×¤Ë¤Ê¤Ã¤¿¥Õ¥¡¥¤¥ë¤òµ¤·Ú¤Ëºï½ü¤¹¤ë¤³¤È¤¬¤Ç¤¤Þ¤¹¡£
         ¤·¤«¤·¡¢²á¿®¤Ï¶ØÊª¤Ç¤¹¡£ pdumpfs ¤Ë¤Ï½ÅÂç¤Ê¥Ð¥°¤¬¤¢¤ë¤«¤â¤·¤ì¤Þ¤»¤ó¡£

Æ¦ÃÎ¼±
     -   1Æü¤¢¤¿¤ê 10 MB ¤º¤Ä¥Õ¥¡¥¤¥ë¤¬ÄÉ²Ã¡¦¹¹¿·¤µ¤ì¤ë¤È¤·¤Æ¡¢ 1 Ç¯¤Ç 4 GB
         ¤¯¤é¤¤¥Ç¥£¥¹¥¯¾ÃÈñ¤¬Áý¤¨¤ë·×»»¤Ç¤¹¡£
         ¶áÇ¯¤Î·×»»µ¡»ö¾ð¤ò¹Í¤¨¤ì¤Ð¡¢¤³¤Î¤¯¤é¤¤¤ÏÊ¿µ¤¤Ç¤·¤ç¤¦¡£

     -   ¥Ð¥Ã¥¯¥¢¥Ã¥×¤ÏÊªÍýÅª¤Ë°Û¤Ê¤ë¥Ç¥Ð¥¤¥¹¤Ë¼è¤ê¤Þ¤·¤ç¤¦¡£

     -   ¤¤¤¯¤Ä¤«¤Î¥·¥¹¥Æ¥à¤Ç¤Ï¡¢¥Õ¥¡¥¤¥ë¤òÊÑ¹¹ÉÔ²ÄÇ½ (immutable)
         ¤Ë¤¹¤ë¤³¤È¤¬¤Ç¤¤Þ¤¹¡£

         Linux ¤Ç /backup °Ê²¼¤Î¤¹¤Ù¤Æ¤Î¥Õ¥¡¥¤¥ë¤òÊÑ¹¹ÉÔ²ÄÇ½¤Ë¤¹¤ë¤Ë¤Ï¡¢ root
         ¸¢¸Â¤Ç°Ê²¼¤Î¥³¥Þ¥ó¥É¤ò¼Â¹Ô¤·¤Þ¤¹¡£

               chattr -R +i /backup

         4.4BSD Í³Íè¤Î¥·¥¹¥Æ¥à¤Ç¤Ï¡¢¤ä¤Ï¤ê root ¸¢¸Â¤Ç°Ê²¼¤Î¤è¤¦¤Ë¼Â¹Ô¤·¤Þ¤¹¡£

               chflags -R schg /backup

         ¤³¤ì¤é¤Î¥³¥Þ¥ó¥É¤ò»È¤¨¤Ð¡¢¥Ð¥Ã¥¯¥¢¥Ã¥×¤ò¤¦¤Ã¤«¤ê rm -rf
         ¤·¤Æ¤·¤Þ¤¦¤È¤¤¤¦Èï³²¤òÍ½ËÉ¤Ç¤¤Þ¤¹¡£

Ãø¼Ô
     ¤³¤Î¥Þ¥Ë¥å¥¢¥ë¤Ï ¹âÎÓ Å¯ ⟨satoru@namazu.org⟩ ¤µ¤ó¤¬½ñ¤«¤ì¤¿ HTML
     ¥É¥¥å¥á¥ó¥È¤ò ÅçÅÄ Çî¹¬ ⟨shimaden@din.or.jp⟩ ¤¬ÊÑ´¹¤·¤¿¤â¤Î¤ò Éð¼Ô ¾½µª
     ⟨knu@iDaemons.org⟩ ¤¬ºÆÀ°·Á¤·¤¿¤â¤Î¤Ç¤¹¡£

´ØÏ¢¹àÌÜ
     chattr(1), chflags(1), crontab(5), cron(8)


                                 11·î 25, 2001
