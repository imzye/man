SYMPA(1)                         sympa 6.2.76                         SYMPA(1)


NAME
       sympa, sympa.pl - Command line utility to manage Sympa

SYNOPSIS
       "sympa" command [ general options... ] ...

DESCRIPTION
       NOTE: On overview of Sympa documentation see sympa_toc(1).

       sympa is invoked from command line then performs various administration
       tasks.

GENERAL OPTIONS
       sympa may run with following options in general.

       "-d", "--debug"
           Enable debug mode.

       "-f", "--config="file
           Force Sympa to use an alternative configuration file instead of
           /usr/local/etc/sympa/sympa.conf.

       "-l", "--lang="lang
           Set this option to use a language for Sympa. The corresponding
           gettext catalog file must be located in $LOCALEDIR directory.

       "--log_level="level
           Sets Sympa log level.

       "-m", "--mail"
           Enable SMTP logging.

       "--noout"
           Skip output to the console except for fatal error messages.

COMMANDS
       Currently following commands are available.  To see detail of each
       command, run '"sympa help" command'.

       "sympa add"
           Add users to the list

       "sympa bouncers"
           Manipulate list bounced users

       "sympa check"
           Check environment

       "sympa close"
           Close a list or the lists belonging to a family

       "sympa config"
           Manipulate configuration of Sympa

       "sympa copy"
           Copy the list

       "sympa create"
           Create a list

       "sympa del"
           Delete users from the list

       "sympa dump"
           Dump users of the lists

       "sympa export_list"
           TBD

       "sympa help"
           Display help information about Sympa CLI

       "sympa include"
           Update inclusion

       "sympa instantiate"
           Instantiate the lists in a family

       "sympa lowercase"
           Lowercase email addresses in database

       "sympa make_alias_file"
           Create aliases file

       "sympa md5_digest"
           Output a MD5 digest

       "sympa move"
           Move or copy the list

       "sympa open"
           Open the list

       "sympa rebuildarc"
           Rebuild the archives of the list

       "sympa reload_list_config"
           Recreate config cache of the lists

       "sympa restore"
           Restore users of the lists

       "sympa review"
           Show subscribers of the list

       "sympa send_digest"
           Send digest

       "sympa set"
           Set properties of the users of the list

       "sympa show_pending_lists"
           Show pending lists

       "sympa sync_list_db"
           Synchronize database cache of the lists

       "sympa test"
           Test the functions of Sympa

       "sympa update"
           Modify the existing list in the family

       "sympa upgrade"
           Upgrade Sympa

       "sympa upgrade_config_location"
           TBD

       "sympa user"
           Manipulate list users

       "sympa version"
           Print the version number of Sympa

DESCRIPTION FOR EARLIER VERSION
       NOTE: Description in this section is kept for compatibility to earlier
       versions.  Run "sympa help" or see sympa(1) to see recent conventions.

   Synopsis
       "sympa.pl" [ "-d, --debug" ] [ "-f, --file"=another.sympa.conf ]
       [ "-l, --lang"=lang ] [ "-m, --mail" ] [ "-h, --help" ]
       [ "-v, --version" ]

       [ "--add"=list@domain [--role=role] [--quiet] [--notify] [--force] ]
       [ "--del"=list@domain [--role=role] [--quiet] [--notify] [--force] ]
       [ "--open_list"=list[@robot] [--notify] ]
       [ "--close_list"=list[@robot] ] [ "--purge_list"=list[@robot] ]
       [ "--lowercase" ] [ "--make_alias_file" ]
       [ "--dump_users" "--list"=list@domain|ALL [ "--role"=roles ] ]
       [ "--restore_users" "--list"=list@domain|ALL [ "--role"=roles ] ]
       [ "--show_pending_lists"=robot ] [ "--rebuildarc"=list[@robot] ]

   Options
       sympa.pl may run with following options in general.

       "-d", "--debug"
           Enable debug mode.

       "-f", "--config="file
           Force Sympa to use an alternative configuration file instead of
           /usr/local/etc/sympa/sympa.conf.

       "-l", "--lang="lang
           Set this option to use a language for Sympa. The corresponding
           gettext catalog file must be located in $LOCALEDIR directory.

       "--log_level="level
           Sets Sympa log level.

       With the following options sympa.pl will run in batch mode:

       "--add="list@domain [ "--role"=role ] [ "--quiet" ] [ "--notify" ] [
       "--force" ]
           Add email(s) from the list. Data are read from standard input.  The
           data should contain one email address per line.

           Sample:

               ## emails to be added
               john.steward@some.company.com       John Steward
               mary.blacksmith@another.company.com Mary Blacksmith

           Note: This option was added on Sympa 6.2.67b.2.

           New command line format:

           "sympa add" [ "--role"=role ] [ "--quiet" ] [ "--notify" ] [
           "--force" ] list"@"domain
       "--add_list="family_name "--robot="robot_name
       "--input_file="/path/to/file.xml
           Add the list described by the file.xml under robot_name, to the
           family family_name.

           New command line format:

           "sympa create" "--input_file="/path/to/file.xml
           family_name"@@"robot_name
       "--change_user_email" "--current_email="current "--new_email="new
           Changes a user email address in all Sympa  databases
           (subscriber_table, list config, etc) for all virtual robots.

           New command line format:

           "sympa user move" current new
       "--close_family="family_name "--robot="robot_name
           Close lists of family_name family under robot_name.

           New command line format:

           "sympa close" family_name"@@"robot_name
       "--close_list="list["@"robot]
           Close the list (changing its status to closed), remove aliases and
           remove subscribers from DB (a dump is created in the list directory
           to allow restoring the list)

           New command line format:

           "sympa close" list["@"robot]
       "--conf_2_db"
           Deprecated.  Load sympa.conf and each robot.conf into database.

           New command line format:

           None.

       "--copy_list="listname"@"robot "--new_listname="newlistname
       "--new_listrobot="newrobot
           Copy a list.

           New command line format:

           "sympa move --mode=copy" listname"@"robot newlistname"@"newrobot
           "sympa copy" listname"@"robot newlistname"@"newrobot
       "--create_list" "--robot="robot_name "--input_file="/path/to/file.xml
           Create a list with the XML file under robot robot_name.

           New command line format:

           "sympa create" "--input_file="/path/to/file.xml robot_name
       "--del="list"@"domain [ "--role"=role ] [ "--quiet" ] [ "--notify" ] [
       "--force" ]
           Delete email(s) from the list. Data are read from standard input.
           The data should contain one email address per line.

           Sample:

               ## emails to be deleted
               john.steward@some.company.com
               mary.blacksmith@another.company.com

           Note: This options was added on Sympa 6.2.67b.2.

           New command line format:

           "sympa del" [ "--role"=role ] [ "--quiet" ] [ "--notify" ] [
           "--force" ] list"@"domain
       "--dump="list@domain|"ALL"
           Obsoleted option.  Use "--dump_users".

       "--dump_users" "--list="list@domain|"ALL" [ "--role="roles ]
           Dumps users of a list or all lists.

           "--role" may specify "member", "owner", "editor" or any of them
           separated by comma (","). Only "member" is chosen by default.

           Users are dumped in files role".dump" in each list directory.

           Note: On Sympa prior to 6.2.31b.1, subscribers were dumped in
           subscribers.db.dump file, and owners and moderators could not be
           dumped.

           See also "--restore_users".

           Note: This option replaced "--dump" on Sympa 6.2.34.

           New command line format:

           "sympa dump" [ "--roles="roles ] list"@"domain
           "sympa dump" [ "--roles="roles ] "*"
       "--health_check"
           Check if sympa.conf, robot.conf of virtual robots and database
           structure are correct.  If any errors occur, exits with non-zero
           status.

           New command line format:

           "sympa check"
       "--import="list@dom
           Deprecated.  Use "--add" instead.

       "--instantiate_family="family_name "--robot="robot_name
       "--input_file="/path/to/file.xml [ "--close_unknown" ] [ "--quiet" ]
           Instantiate family_name lists described in the file.xml under
           robot_name.  The family directory must exist; automatically close
           undefined lists in a new instantiation if --close_unknown is
           specified; do not print report if "--quiet" is specified.

           New command line format:

           "sympa instantiate" "--input_file="/path/to/file.xml [
           "--close_unknown" ] [ "--quiet" ] family_name"@@"robot_name
       "--lowercase"
           Lowercases email addresses in database.

           New command line format:

           TBD.

       "--make_alias_file" [ "--robot" robot ]
           Create an aliases file in /tmp/ with all list aliases. It uses the
           list_aliases.tt2 template  (useful when list_aliases.tt2 was
           changed).

           New command line format:

           TBD.

       "--md5_encode_password"
           Rewrite password in "user_table" of database using MD5 fingerprint.
           YOU CAN'T UNDO unless you save this table first.

           Note that this option was obsoleted.  Use sympa upgrade password.

       "--modify_list="family_name "--robot="robot_name
       "--input_file="/path/to/file.xml
           Modify the existing list installed under the robot robot_name and
           that belongs to the family family_name. The new description is in
           the "file.xml".

           New command line format:

           "sympa update" "--input_file="/path/to/file.xml
           family_name"@@"robot_name
       "--open_list="list["@"robot] [ "--notify" ]
           Restore the closed list (changing its status to open), add aliases
           and restore users to DB (dump files in the list directory are
           imported).

           The "--notify" is optional. If present, the owner(s) of the list
           will be notified.

           New command line format:

           "sympa open" [ "--notify" ] list["@"robot]
       "--purge_list"=list["@"robot]
           Remove the list (remove archive, configuration files, users and
           owners in admin table. Restore is not possible after this
           operation.

           New command line format:

           "sympa close" "--mode=purge" list["@"robot]
       "--show_pending_lists"=robot
           Print all pending lists for the robot, with information.

           New command line format:

           TBD.

       "--rebuildarc"=list[@robot]
           Rebuild the archives of the list.

           New command line format:

           TBD.

       "--reload_list_config" [ "--list="mylist@mydom ] [ "--robot="mydom ]
           Recreates all config.bin files or cache in "list_table".  You
           should run this command if you edit authorization scenarios.  The
           list and robot parameters are optional.

           New command line format:

           TBD.

       "--rename_list="listname"@"robot "--new_listname="newlistname
       "--new_listrobot="newrobot
           Renames a list or move it to another virtual robot.

           New command line format:

           "sympa move" listname"@"robot newlistname"@"newrobot
       "--send_digest" [ "--keep_digest" ]
           Send digest right now.  If "--keep_digest" is specified, stocked
           digest will not be removed.

           New command line format:

           TBD.

       "--restore_users" "--list="list@domain|"ALL" [ "--role="roles ]
           Restore users from files dumped by "--dump_users".

           Note: This option was added on Sympa 6.2.34.

           New command line format:

           "sympa restore" [ "--roles="roles ] list"@"domain
           "sympa restore" [ "--roles="roles ] "*"
       "--sync_include="listname"@"robot [ "--role="role ]
           Trigger update of the list users included from data sources.

           New command line format:

           "sympa include" [ "--role="role ] listname"@"robot
       "--sync_list_db" [ "--list="listname@robot ]
           Syncs filesystem list configs to the database cache of list
           configs, optionally syncs an individual list if specified.

           New command line format:

           TBD.

       "--test_database_message_buffer"
           Note: This option was deprecated.

           Test the database message buffer size.

       "--upgrade" [ "--from="X ] [ "--to="Y ]
           Runs Sympa maintenance script to upgrade from version X to version
           Y.

           New command line format:

           "sympa upgrade" [ <--from=>X ] [ "--to="Y ]
       "--upgrade_shared" [ "--list="X ] [ "--robot="Y ]
           Note: This option was deprecated.  See sympa upgrade shared command
           line.

           Rename files in shared.

           New command line format:

           "sympa upgrade shared" [ "--fix_qencode" ] listname@robot | "*"

       With following options sympa.pl will print some information and exit.

       "-h", "--help"
           Print this help message.

       "--md5_digest="password
           Output a MD5 digest of a password (useful for SOAP client trusted
           application).

       "-v", "--version"
           Print the version number.

       End of description for earlier version.

FILES
       /usr/local/etc/sympa/sympa.conf main configuration file.

SEE ALSO
       sympa_toc(1).

HISTORY
       sympa.pl was originally written by:

       Serge Aumont
           Comité Réseau des Universités

       Olivier Salaün
           Comité Réseau des Universités

       As of Sympa 6.2b.4, it was split into three programs: sympa.pl command
       line utility, sympa_automatic.pl daemon and sympa_msg.pl daemon.

       As of Sympa 6.2.68, sympa.pl was renamed to sympa and the new form of
       command line arguments was introduced.

       The "--noout" option was introduced on Sympa 6.2.71b.

6.2.76                            2025-08-09                          SYMPA(1)
