Control(3)            User Contributed Perl Documentation           Control(3)


NAME
       App::Control - Perl module for apachectl style control of another
       script or executable

SYNOPSIS
           use App::Control;
           my $ctl = App::Control->new(
               EXEC => $exec,
               ARGS => \@args,
               PIDFILE => $pidfile,
               SLEEP => 1,
               VERBOSE => 1,
           );
           my $pid = $ctl->pid;
           if ( $ctl->running )
           {
               print "$pid is running\n";
           }
           else
           {
               print "$pid is not running\n";
           }
           # or alternatively ...
           print $ctl->status;
           $ctl->start;
           # or alternatively ...
           $ctl->cmd( 'start' );
           $ctl->stop;
           $ctl->hup;
           $ctl->restart;

DESCRIPTION
       App::Control is a simple module to replicate the kind of functionality
       you get with apachectl to control apache, but for any script or
       executable. There is a very simple OO interface, where the constructor
       is used to specify the executable, command line arguments, and pidfile,
       and various methods (start, stop, etc.) are used to control the
       executable in the obvious way.

       The module is intended to be used in a simple wrapper control script.
       Currently the module does a fork and exec to start the executable, and
       sets the signal handler for SIGCHLD to 'IGNORE' to avoid zombie
       processes.

CONSTRUCTOR
       The constructor is called with a hash of options in the standard way.
       The options are as follows:

   EXEC
       Path to the executable to be controlled. This option is REQUIRED.

   ARGS
       Command line arguments for the executable. This option is OPTIONAL, but
       if set, should be an ARRAY reference.

   PIDFILE
       Path to the pidfile for the executable. This need not exists, but the
       constructor will die if it thinks it can't create it. If the path where
       the pidfile lives doesn't exist the constructor will try to create it.
       This option is REQUIRED.

   IGNOREFILE
       The ignore file allows you to temporarily disable the control
       functionality.  Suppose you have a chkdaemon / crontab entry that
       restarts a service; specifying an IGNOREFILE means that you can disable
       this wihtout having to edit the relevant config files.

   CREATE_PIDFILE
       By default, App::Control depends on the application to manage the pid
       file.  This is consistent will analogous utilities (apachectl,
       chkdaemon, etc.), but if you would like App::Control to create and
       remove pid files for you, then set this option to a true value.

   SLEEP
       Number of seconds to sleep before checking that the process has been
       started.  If the start fails, the control script will loop with a SLEEP
       delay per iteration until it has (see <"LOOP">). Default is 1 second.

       head2 LOOP

       Number of times to loop before giving up on starting the process.

   VERBOSE
       If set to a true value, the module will output verbose messages to
       STDERR.

METHODS
   start
       Start the executable specified in the constructor. This method waits
       until it is convinced that the executable has started. It then writes
       the new pid to the pidfile.

   stop
       Stop the executable specified in the constructor. It assumes that the
       pid listed in the pidfile specified in the constructor is the process
       to kill.  This method waits until it is convinced that the executable
       has stopped.

   hup
       Send a SIGHUP to the executable.

   restart
       Basically; stop if running, and then start.

   status
       Returns a status message along the lines of "$exec ($pid) is / is not
       running".

   cmd
       All of the above methods can also be invoked using cmd; i.e.:

           $ctl->start;

       is equivilent to:

           $ctl->cmd( 'start' );

       give or take a call to AUTOLOAD!

   pid
       Returns the current value of the pid in the pidfile.

   running
       returns true if the pid in the pidfile is running.

AUTHOR
       Ave Wrigley <ave.wrigley@gmail.com>

COPYRIGHT
       Copyright (c) 2001 Ave Wrigley. All rights reserved. This program is
       free software; you can redistribute it and/or modify it under the same
       terms as Perl itself.

perl v5.40.2                      2023-04-12                        Control(3)
