Test::Email(3)        User Contributed Perl Documentation       Test::Email(3)


NAME
       Test::Email - Test Email Contents

SYNOPSIS
         use Test::Email;

         # is-a MIME::Entity
         my $email = Test::Email->new(\@lines);

         # all-in-one test
         $email->ok({
           # optional search parameters
           from       => ($is or qr/$regex/),
           subject    => ($is or qr/$regex/),
           body       => ($is or qr/$regex/),
           headername => ($is or qr/$regex/),
         }, "passed tests");

         # single-test header methods
         $email->header_is($header_name, $value, "$header_name matches");
         $email->header_ok($header_name, $value, "$header_name matches");
         $email->header_like($header_name, qr/regex/, "$header_name matches");

         # single-test body methods
         $email->body_is($header_name, $value, "$header_name matches");
         $email->body_ok($header_name, $value, "$header_name matches");
         $email->body_like($header_name, qr/regex/, "$header_name matches");

         # how many MIME parts does the messages contain?
         $email->parts_ok($parts_count, "there were $parts_count parts found");

         # what is the MIME type of the firs part
         my @parts = $email->parts(); # see MIME::Entity
         $parts[0]->mime_type_ok('test/html', 'the first part is type text/html');

DESCRIPTION
       Please note that this is ALPHA CODE. As such, the interface is likely
       to change.

       Test::Email is a subclass of MIME::Entity, with the above methods.  If
       you want the messages fetched from a POP3 account, use Test::POP3.

       Tests for equality remove trailing newlines from strings before
       testing.  This is because some mail messages have newlines appended to
       them during the mailing process, which could cause unnecessary
       confusion.

       This module should be 100% self-explanatory. If not, then please look
       at Test::Simple and Test::More for clarification.

METHODS
       "my $email = Test::Email->new($lines_aref);"
           This is identical to "MIME::Entity->new()". See there for details.

       "$email->ok($test_href, $description);"
           Using this method, you can test multiple qualities of an email
           message with one test. This will execute the tests as expected and
           will produce output just like "Test::Simple::ok" and
           "Test::More::ok". Keys for $test_href are either "body", or they
           are considered to be the name of a header, case-insensitive.

       single-test methods
           The single-test methods in the synopsis above are very similar to
           their counterparts in Test::Simple and Test::More. Please consult
           those modules for documentation.

           Please note that tests for equality remove newlines from their
           operands before testing. This is because some email messages have
           newlines appended to them during mailing.

       "my $ok = $email-"parts_ok($parts_count, $description);>
           Check to see how many MIME parts this email contains. Each part is
           also a Test::Email object.

       "my $ok = $email-"mime_type_ok($expected_mime_type, $description);>
           Check the MIME type of an email or an email part.

EXPORT
       None.

SEE ALSO
       Test::Builder, Test::Simple, Test::More, Test::POP3

TODO
       I am open to suggestions.

AUTHOR
       James Tolley, <james@cpan.org>

COPYRIGHT AND LICENSE
       Copyright (C) 2007-2008 by James Tolley

       This library is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself, either Perl version 5.8.8 or, at
       your option, any later version of Perl 5 you may have available.

perl v5.40.2                      2008-10-24                    Test::Email(3)
