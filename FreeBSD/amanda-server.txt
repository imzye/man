AMANDA-COMMAND-FIL(5)    File formats and conventions    AMANDA-COMMAND-FIL(5)

NAME
       amanda-command-file - Keep status of outgoing dle commands

DESCRIPTION
       The command-file file keep information of outgoing dumps commands,
       dumps to flush from holding disk to storage, dumps to copy (vault) from
       one storage to another, dumps with outgoing restore request.

       The file is in text. The first line is the version of the file, the
       second line is an id that increment on each new insertion in the file.

       Each following line start with an id followed by one the keywords:

       FLUSH
           Entry that list a holding file and a storage where it must be
           flushed.

       COPY
           Entry that list a dump from a storage and a storage where to copy
           it (vault).

       RESTORE
           Entry that list a dump from a storage that have a restore request.
           An entry is automatically removed 24 hours after it is created.

       Amanda never overwrite a volume if one its dump have a command in the
       command-file.

FLUSH LINE
       id FLUSH config holding-file hostname diskname dump-timestamp dump-level storage WORKING:pid STATUS.fi

       id
           The id of the command.

       FLUSH
           The FLUSH keyword.

       config
           The config to which that command apply.

       holding-file
           The holding-file to flush.

       hostname
           The hostname of the dump.

       diskname
           The diskname of the dump.

       dump-timestamp
           The timestamp of the dump.

       dump-level
           The level of the dump.

       storage
           The storage where to flush the dump.

       WORKING:pid
           The pid of the process doing the flush, or 0.

       STATUS
           TODO or DONE.

COPY LINE
       id COPY config src-storage src-pool src-label src-fileno src-labels-str start-time hostname diskname dump-timestamp dump-level dest-storage WORKING:pid STATUS.fi

       id
           The id of the command.

       COPY
           The COPY keyword.

       config
           The config to which that command apply.

       src-srorage
           The storage where to find the dump.

       src-pool
           The pool where to find the dump.

       src-label
           The label of the first part of the dump

       src-fileno
           The fileno of the first part of the dump

       src-labels-str
           The list of all source labels required

       start-time
           When to start the copy

       hostname
           The hostname of the dump.

       diskname
           The diskname of the dump.

       dump-timestamp
           The timestamp of the dump.

       dump-level
           The level of the dump.

       dest-storage
           The storage where to copy the dump.

       WORKING:pid
           The pid of the process doing the copy, or 0.

       STATUS
           TODO or DONE.

RESTORE LINE
       To restore from a storage:

       id RESTORE config src-storage src-pool src-label    src-fileno expire hostname diskname dump-timestamp dump-level WORKING:pid STATUS.fi

       or to restore from a holding file:

       id RESTORE config HOLDING     HOLDING  holding-file 0          expire hostname diskname dump-timestamp dump-level WORKING:pid STATUS.fi


       id
           The id of the command.

       RESTORE
           The RESTORE keyword.

       config
           The config to which that command apply.

       src-srorage
           The storage where to find the dump.

       src-pool
           The pool where to find the dump.

       src-label
           The label of the first part of the dump.

       HOLDING
           The HOLDING keyword.

       holding-file
           The full path of the holding file.

       src-fileno
           The fileno of the first part of the dump

       expire
           When this command expire and can be automatically removed from the file.

       src-labels-str
           The list of all source labels required

       start-time
           When to start the copy

       hostname
           The hostname of the dump.

       diskname
           The diskname of the dump.

       dump-timestamp
           The timestamp of the dump.

       dump-level
           The level of the dump.

       WORKING:pid
           The pid of the process doing the copy, or 0.

       STATUS
           TODO or DONE.

SEE ALSO
       amanda(8), amanda.conf(5)

       The Amanda Wiki: : http://wiki.zmanda.com/

AUTHOR
       Jean-Louis Martineau <martineau@zmanda.com>
           Zmanda, Inc. (http://www.zmanda.com)

Amanda 3.5.1                      12/01/2017             AMANDA-COMMAND-FIL(5)
