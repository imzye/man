APCPWR(8)               FreeBSD System Manager's Manual              APCPWR(8)

NAME
     apcpwr â€“ control power on/off/reboot via an APC MasterSwitch

SYNOPSIS
     apcpwr list
     apcpwr probe
     apcpwr [-f] on outletname
     apcpwr [-f] off outletname
     apcpwr [-f] reboot outletname

DESCRIPTION
     The apcpwr utility is used to control power to systems connected to an
     APC MasterSwitch power distribution unit.  The following option is
     available for script usage:

     -f    Force the operation to occur without asking for final confirmation
           before execution.

COMMANDS
     The commands recognized by apcpwr are as follows:

     list    produces a list of the known APC MasterSwitches and the
             information associated with each port. The outlet status is
             dynamically determined via snmp request each time the list
             command is executed.

     probe   produces the .db file (default: /var/db/apcpwr.db ).

     on      turns on the output specified by outletname

     off     turns off the output specified by outletname

     reboot  turns off the outlet specified by outletname for (a default of) 5
             seconds and then turns it back on.

EXAMPLES
     The following command:

     apcpwr list

     produces a table listing all managed MasterSwitch units, the device name
     attached to each outlet, and it's status.

     pdu1 (172.21.251.251)
        1: triangle                         On
        2: 8ball                            On
        3: 9ball                            On
        4: cueball                          On
        5: avail-5                          On
        6: avail-6                          On
        7: avail-7                          On
        8: admin                            On

     apcpwr reboot admin

     will turn off power for the system attached to pdu1, outlet 8, for (a
     default of) 5 seconds, and then automatically turn the power back on.
     Since the -f option was not specified, the following text:

           Are you sure? [y|N]:

     will be printed to standard output and a positive response required
     before the operation will continue.

     apcpwr probe

     A sample /etc/crontab entry to build the .db file via the probe command
     is:

     #
     # Create /var/db/apcpwr.db
     #
     0       21      *       *       *       root    /usr/local/bin/apcpwr probe > /dev/null

FILES
     /usr/local/etc/apcpwr.conf
     /var/db/apcpwr.db

SEE ALSO
     snmpwalk(8), snmpget(8), snmpset(8)

CAVEATS
     These utilities are based upon the netsnmp port. Other snmp packages may
     work but are untested.

     The MIB file POWERNET344_MIB.txt is not required to use this port.
     However, if you with to debug this utility it must be copied from the
     provided media CD which came with the unit and installed into the correct
     MIB directory (in this instance: /usr/local/share/snmp/mibs).

FreeBSD 14.1-RELEASE             April 1, 2003            FreeBSD 14.1-RELEASE
