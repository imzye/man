ZFSBOOTCFG(8)           FreeBSD System Manager's Manual          ZFSBOOTCFG(8)

NAME
     zfsbootcfg – specify zfsboot options for the next boot

SYNOPSIS
     zfsbootcfg ⟨options⟩

DESCRIPTION
     zfsbootcfg is used to set boot.config(5)-style options to be used by
     zfsboot(8) or gptzfsboot(8) the next time the machine is booted.  Once
     zfsboot(8) or gptzfsboot(8) reads the information, it is deleted.  If
     booting fails, the machine automatically reverts to the previous boot
     configuration.  The information is stored in a special reserved area of a
     ZFS pool.  zfsboot(8) or gptzfsboot(8) read the boot option information
     from the first disk found in the first ZFS pool found.

ENVIRONMENT
     vfs.zfs.boot.primary_pool  The kenv(1) variable that identifies a pool
                                for which the options are written.
     vfs.zfs.boot.primary_vdev  The kenv(1) variable that identifies a disk
                                within the pool where the options are written.

EXAMPLES
     Try to boot to a new boot environment without changing the bootfs
     property of a pool:

           zfsbootcfg "zfs:tank/ROOT/newbe:"

     To clear the boot options:

           zfsbootcfg ""

SEE ALSO
     boot.config(5), gptzfsboot(8), zfsboot(8)

HISTORY
     zfsbootcfg appeared in FreeBSD 11.1.

AUTHORS
     This manual page was written by Andriy Gapon <avg@FreeBSD.org>.

CAVEATS
     At the moment, zfsbootcfg uses the vfs.zfs.boot.primary_pool and
     vfs.zfs.boot.primary_vdev kenv(1) variables to determine a ZFS pool and a
     disk in it where the options are to be stored.  The variables are set by
     the ZFS boot chain, so there is an assumption that the same boot disk is
     going to be used for the next reboot.  There is no zfsbootcfg option to
     specify a different pool or a different disk.

     zfsbootcfg should be extended to install new zfsboot(8) blocks in a ZFS
     pool.

FreeBSD 12.2-RELEASE-p1          May 24, 2017          FreeBSD 12.2-RELEASE-p1
